                 1 	
                 2 ; *** Chapter 0 page 0	
                 3 	
0:0:00 000:28    4 S000    ldx   0         	
0:0:01 001:21    5         tma             	
0:0:03 003:71    6         a9aac           	
0:0:07 007:BE    7         br    S03E      	
0:0:0F 00F:61    8 S00F    tcmiy 8         	
0:0:1F 01F:40    9         tcy   0         	
0:0:3F 03F:9B   10         br    S01B      	
0:0:3E 03E:60   11 S03E    tcmiy 0         	
                12 	
                13 ;	
                14 ; Rotate the drum to the position targeted in 4/0	
                15 ; Current position is in 0/0	
                16 ;	
0:0:3D 03D:28   17 S03D    ldx   0         	
0:0:3B 03B:40   18         tcy   0         	
0:0:37 037:21   19         tma             	
0:0:2F 02F:29   20         ldx   4         	
0:0:1E 01E:00   21         mnea            	
0:0:3C 03C:B3   22         br    S033      	
0:0:39 039:0F   23         retn            	
                24 	
0:0:33 033:18   25 S033    ldp   1         	
0:0:27 027:C0   26         call  L040      	
0:0:0E 00E:2D   27         ldx   5         	
0:0:1D 01D:40   28         tcy   0         	
0:0:3A 03A:21   29         tma             	
0:0:35 035:2C   30         ldx   1         	
0:0:2B 02B:01   31         alem            	
0:0:16 016:98   32         br    S018      	
0:0:2C 02C:80   33         br    S000      	
0:0:18 018:00   34 S018    mnea            	
0:0:30 030:9C   35         br    S01C      	
0:0:21 021:2B   36         ldx   6         	
0:0:02 002:21   37         tma             	
0:0:05 005:2A   38         ldx   2         	
0:0:0B 00B:01   39         alem            	
0:0:17 017:9C   40         br    S01C      	
0:0:2E 02E:80   41         br    S000      	
0:0:1C 01C:28   42 S01C    ldx   0         	
0:0:38 038:21   43         tma             	
0:0:31 031:71   44         a9aac           	
0:0:23 023:8F   45         br    S00F      	
0:0:06 006:3E   46         imac            	
0:0:0D 00D:27   47         tam             	
0:0:1B 01B:2B   48 S01B    ldx   6         	
0:0:36 036:21   49         tma             	
0:0:2D 02D:06   50         amaac           	
0:0:1A 01A:91   51         br    S011      	
0:0:34 034:2A   52         ldx   2         	
0:0:29 029:27   53         tam             	
0:0:12 012:2D   54         ldx   5         	
0:0:24 024:21   55         tma             	
0:0:08 008:A6   56         br    S026      	
0:0:11 011:2A   57 S011    ldx   2         	
0:0:22 022:27   58         tam             	
0:0:04 004:2D   59         ldx   5         	
0:0:09 009:3E   60         imac            	
0:0:13 013:8A   61         br    S00A      	
0:0:26 026:06   62 S026    amaac           	
0:0:0C 00C:8A   63         br    S00A      	
0:0:19 019:2C   64         ldx   1         	
0:0:32 032:27   65         tam             	
0:0:25 025:BD   66         br    S03D      	
0:0:0A 00A:2A   67 S00A    ldx   2         	
0:0:15 015:67   68         tcmiy 14        	
0:0:2A 02A:2C   69         ldx   1         	
0:0:14 014:40   70         tcy   0         	
0:0:28 028:6F   71         tcmiy 15        	
0:0:10 010:BD   72         br    S03D      	
0:0:20 020:00   73         mnea            	
                74 	
                75 ; *** Chapter 0 page 1	
                76 	
0:1:00 040:41   77 L040    tcy   8         ; Select the Rotation Sensor	
0:1:01 041:0D   78         setr            	
0:1:03 043:49   79         tcy   9         ; Select the Motor	
0:1:07 047:0D   80         setr            	
0:1:0F 04F:2B   81         ldx   6         	
0:1:1F 05F:40   82         tcy   0         	
0:1:3F 07F:60   83         tcmiy 0         	
0:1:3E 07E:2D   84         ldx   5         	
0:1:3D 07D:40   85         tcy   0         	
0:1:3B 07B:60   86         tcmiy 0         	
0:1:37 077:08   87 S077    tka             	
0:1:2F 06F:77   88         dan             	
0:1:1E 05E:8E   89         br    S04E      	
0:1:3C 07C:B7   90         br    S077      	
0:1:39 079:2B   91 S079    ldx   6         	
0:1:33 073:6F   92         tcmiy 15        	
0:1:27 067:B1   93         br    S071      	
0:1:0E 04E:4A   94 S04E    tcy   5         	
0:1:1D 05D:23   95         tya             	
0:1:3A 07A:41   96         tcy   8         	
0:1:35 075:04   97 S075    dyn             	
0:1:2B 06B:B5   98         br    S075      	
0:1:16 056:77   99         dan             	
0:1:2C 06C:B5  100         br    S075      	
0:1:18 058:2B  101         ldx   6         	
0:1:30 070:40  102         tcy   0         	
0:1:21 061:3E  103         imac            	
0:1:02 042:8B  104         br    S04B      	
0:1:05 045:B8  105         br    S078      	
0:1:0B 04B:27  106 S04B    tam             	
0:1:17 057:2D  107         ldx   5         	
0:1:2E 06E:3E  108         imac            	
0:1:1C 05C:B9  109         br    S079      	
0:1:38 078:27  110 S078    tam             	
0:1:31 071:08  111 S071    tka             	
0:1:23 063:77  112         dan             	
0:1:06 046:8E  113         br    S04E      	
0:1:0D 04D:41  114         tcy   8         	
0:1:1B 05B:0C  115         rstr            	
0:1:36 076:49  116         tcy   9         	
0:1:2D 06D:0C  117         rstr            	
0:1:1A 05A:0F  118         retn            	
               119 	
               120 ;	
               121 ; RANDOM routine continues	
               122 ;	
0:1:34 074:21  123 S074    tma             ; Pick up value at 3/0, 3/1, 3/2	
0:1:29 069:29  124         ldx   4         	
0:1:12 052:06  125         amaac           ; Add 4/0, 4/1, 4/2 to it	
0:1:24 064:D5  126         call  S055      ; Increment 6/0, 6/1, 6/2 if carry	
0:1:08 048:2D  127         ldx   5         	
0:1:11 051:06  128         amaac           ; Add 5/0, 5/1, 5/2 to it	
0:1:22 062:D5  129         call  S055      ; Increment 6/0, 6/1, 6/2 if carry	
0:1:04 044:2B  130         ldx   6         	
0:1:09 049:06  131         amaac           ; Add 6/0, 6/1, 6/2 to it	
0:1:13 053:D5  132         call  S055      ; Increment 6/0, 6/1, 6/2 if carry	
0:1:26 066:2E  133         ldx   3         	
0:1:0C 04C:25  134         tamiyc          ; Store it at 3/0, 3/1, 3/2 then increment Y	
0:1:19 059:5C  135         ynec  3         ; We done doing 0-2?	
0:1:32 072:B4  136         br    S074      ; Nope, do the next column	
0:1:25 065:44  137         tcy   2         	
0:1:0A 04A:0F  138         retn            	
               139 	
0:1:15 055:05  140 S055    iyc             	
0:1:2A 06A:2B  141         ldx   6         	
0:1:14 054:03  142         xma             	
0:1:28 068:70  143         iac             	
0:1:10 050:1E  144         ldp   7         	
0:1:20 060:94  145         br    L1D4      ; xma, dyn, retn	
               146 	
               147 ; *** Chapter 0 page 2	
               148 	
               149 ;	
               150 ; Using the R output in A, scan the K inputs to find a key pressed	
               151 ;	
               152 ; For some reason the R output we're looking at is stored in 6/13 with the high-order bit set.	
               153 ;	
0:2:00 080:4B  154 S080    tcy   13        	
0:2:01 081:27  155         tam             ; Save the R output we're using at 6/13	
0:2:03 083:7E  156         a8aac           ; Toggle high-order bit	
0:2:07 087:9F  157         br    S09F      ; There should have been a carry due to the way it's stored	
0:2:0F 08F:7E  158         a8aac           ; Nope, add 8 again to get it back (?)	
0:2:1F 09F:20  159 S09F    tay             	
0:2:3F 0BF:0D  160         setr            ; Set R output addressed by Y	
0:2:3E 0BE:08  161         tka             ; Pick up K inputs from keyboard	
0:2:3D 0BD:0C  162         rstr            ; Reset R output addressed by Y	
0:2:3B 0BB:47  163         tcy   14        	
0:2:37 0B7:03  164         xma             ; Exchange 6/14 and results of TKA - Look at the last read?	
               165 	
0:2:2F 0AF:38  166         tbit1 0         ; Keyboard row 1 - Dark Tower/Frontier/Inventory - set? (3/7/11)	
0:2:1E 09E:AE  167         br    S0AE      ; Add 3 to accumulator	
               168 	
0:2:3C 0BC:3B  169         tbit1 3         ; Keyboard row 2 - Tomb-Ruin/Move/Sanctuary-Citadel - set? (2/6/10)	
0:2:39 0B9:9C  170         br    S09C      ; Add 2 to accumulator	
               171 	
0:2:33 0B3:39  172         tbit1 2         ; Keyboard row 3 - Haggle/Bazaar/Clear - set? (1/5/9)	
0:2:27 0A7:B8  173         br    S0B8      ; Add 1 to accumulator	
               174 	
0:2:0E 08E:3A  175         tbit1 1         ; Keyboard row 4 - Yes-Buy/Repeat/No-End - set? (0/4/8)	
0:2:1D 09D:B1  176         br    S0B1      ; Add nothing to accumulator	
               177 	
               178 ;	
               179 ; No keys were detected, fall through	
               180 ;	
0:2:3A 0BA:7C  181         a4aac           ; Nothing was read? - A = 4	
0:2:35 0B5:27  182         tam             ; Save results at 6/14	
               183 ;	
               184 ; Entry point for keyboard read routine.  Loop through the R output and scan the K inputs at S080	
               185 ;	
0:2:2B 0AB:4B  186 READKBD tcy   13        	
0:2:16 096:07  187         dman            ; Pick up the last R output we looked at and subtract one	
0:2:2C 0AC:B0  188         br    S0B0      ; We're not done scanning	
0:2:18 098:85  189         br    S085      	
0:2:30 0B0:20  190 S0B0    tay             	
0:2:21 0A1:5E  191         ynec  7         	
0:2:02 082:80  192         br    S080      ; Go back and scan the next R output	
               193 	
0:2:05 085:47  194 S085    tcy   14        	
0:2:0B 08B:21  195         tma             ; Load 6/14	
0:2:17 097:B1  196         br    S0B1      	
               197 	
0:2:2E 0AE:70  198 S0AE    iac             	
0:2:1C 09C:70  199 S09C    iac             	
0:2:38 0B8:70  200 S0B8    iac             	
0:2:31 0B1:4F  201 S0B1    tcy   15        	
0:2:23 0A3:03  202         xma             ; Swap 6/15 with results	
0:2:06 086:00  203         mnea            ; Compare this result to the last result	
0:2:0D 08D:8A  204         br    S08A      ; Go back to prompt routine if they're different	
               205 	
0:2:1B 09B:20  206         tay             	
0:2:36 0B6:53  207         ynec  12        	
0:2:2D 0AD:91  208         br    S091      	
0:2:1A 09A:4B  209         tcy   13        	
0:2:34 0B4:33  210         sbit  3         ; Set 6/13 bit 3	
0:2:29 0A9:43  211         tcy   12        	
0:2:12 092:38  212         tbit1 0         ; 6/12 bit 0 set?	
0:2:24 0A4:8A  213         br    S08A      ; Go back to prompt routine	
0:2:08 088:89  214         br    S089      ; Success, return?	
               215 	
0:2:11 091:43  216 S091    tcy   12        	
0:2:22 0A2:38  217         tbit1 0         ; 6/12 bit 0 set?	
0:2:04 084:99  218         br    S099      	
               219 	
0:2:09 089:7F  220 S089    cla             	
0:2:13 093:77  221         dan             	
0:2:26 0A6:15  222         ldp   10        	
0:2:0C 08C:A2  223         br    L2A2      ; TDO, pick up value in 6/15 to Y and return	
               224 	
0:2:19 099:4B  225 S099    tcy   13        	
0:2:32 0B2:3B  226         tbit1 3         ; 6/13 bit 3 set?	
0:2:25 0A5:AA  227         br    S0AA      	
0:2:0A 08A:1E  228 S08A    ldp   7         	
0:2:15 095:86  229         br    L1C6      ; Jump back into prompt routine and refresh the LEDs some more	
               230 	
0:2:2A 0AA:1C  231 S0AA    ldp   3         	
0:2:14 094:0B  232         tpc             	
0:2:28 0A8:18  233         ldp   1         	
0:2:10 090:EC  234         call  PLYTICK      	
0:2:20 0A0:89  235         br    S089      	
               236 	
               237 	
               238 ; *** Chapter 0 page 3	
               239 	
               240 ;********************************************************************************	
               241 ; RANDOM 	
               242 ;	
               243 ; Generate a random number based on the seed at 3/0-2 and 4/0-2	
               244 ; 5/0-2 and 6/0-2 are overwritten.	
               245 ;	
               246 ; Return value in A (0-F); Y=2	
               247 ;	
               248 ; The formula is:	
               249 ;	
               250 ; 3/0 * 2 -> 4/0 * 2 -> 5/1	
               251 ; 3/1 * 2 -> 4/1 * 2 -> 5/2	
               252 ; 3/2 * 2 -> 4/2	
               253 ; 3/0 + 4/0 + 5/0 + 6/0 -> 3/0 using 6/0 as carry	
               254 ; 3/1 + 4/1 + 5/1 + 6/1 -> 3/1 using 6/1 as carry	
               255 ; 3/2 + 4/2 + 5/2 + 6/2 -> 3/2 using 6/2 as carry	
               256 ;	
               257 ; Example: 3/0 = 0; 3/1 = 1; 3/2 = 2	
               258 ;          4/0 = 0; 4/1 = 0	
               259 ;	
               260 ; Results:  0 1 2    Y=2; A=A	
               261 ;           -----	
               262 ;         3|0 3 A	
               263 ;         4|0 2 4	
               264 ;         5|0 0 4	
               265 ;         6|0 0 0	
               266 ;********************************************************************************	
0:3:00 0C0:2D  267 RANDOM  ldx   5         	
0:3:01 0C1:D5  268         call  S0D5      ; Clear 5/0-2	
0:3:03 0C3:2B  269         ldx   6         	
0:3:07 0C7:D5  270         call  S0D5      ; Clear 6/0-2	
0:3:0F 0CF:2E  271         ldx   3         	
0:3:1F 0DF:40  272         tcy   0         	
0:3:3F 0FF:21  273         tma             ; Pick up value at 3/0 (Starting value)	
0:3:3E 0FE:06  274         amaac           ; Double it	
0:3:3D 0FD:89  275         br    S0C9      ; Branch if it overflowed	
0:3:3B 0FB:29  276         ldx   4         	
0:3:37 0F7:27  277         tam             ; Save it at 4/0	
0:3:2F 0EF:06  278 S0EF    amaac           ; Double it	
0:3:1E 0DE:A9  279         br    S0E9      ; Branch if it overflowed	
0:3:3C 0FC:2D  280         ldx   5         	
0:3:39 0F9:48  281         tcy   1         	
0:3:33 0F3:27  282         tam             ; Save doubled value at 5/1	
0:3:27 0E7:2E  283 S0E7    ldx   3         	
0:3:0E 0CE:21  284         tma             ; Pick up value at 3/1 (Starting value)	
0:3:1D 0DD:06  285         amaac           ; Double it	
0:3:3A 0FA:A3  286         br    S0E3      ; Branch if it overflowed	
0:3:35 0F5:29  287         ldx   4         	
0:3:2B 0EB:27  288         tam             ; Save doubled value at 4/1	
0:3:16 0D6:06  289 S0D6    amaac           ; Double it	
0:3:2C 0EC:2D  290         ldx   5         	
0:3:18 0D8:44  291         tcy   2         	
0:3:30 0F0:27  292         tam             ; Save it at 5/2	
0:3:21 0E1:2E  293         ldx   3         	
0:3:02 0C2:21  294         tma             ; Pick up value at 3/2 (Starting value)	
0:3:05 0C5:06  295         amaac           ; Double it	
0:3:0B 0CB:29  296         ldx   4         	
0:3:17 0D7:27  297         tam             ; Save it at 4/2	
0:3:2E 0EE:2E  298         ldx   3         	
0:3:1C 0DC:40  299         tcy   0         	
0:3:38 0F8:18  300         ldp   1         	
0:3:31 0F1:B4  301         br    S074      ; Out of room here...	
               302 	
0:3:23 0E3:29  303 S0E3    ldx   4         ; 3/1 doubling caused an overflow...	
0:3:06 0C6:25  304         tamiyc          ; Save doubled value at 4/1	
0:3:0D 0CD:2B  305         ldx   6         	
0:3:1B 0DB:3E  306         imac            	
0:3:36 0F6:24  307         tamdyn          ; Add one to 6/2	
0:3:2D 0ED:29  308         ldx   4         	
0:3:1A 0DA:21  309         tma             ; Pick up 4/1	
0:3:34 0F4:96  310         br    S0D6      ; Go back and deal with the next digit	
0:3:29 0E9:2D  311 S0E9    ldx   5         	
0:3:12 0D2:48  312         tcy   1         	
0:3:24 0E4:25  313         tamiyc          	
0:3:08 0C8:2B  314         ldx   6         	
0:3:11 0D1:3E  315         imac            	
0:3:22 0E2:24  316         tamdyn          	
0:3:04 0C4:A7  317         br    S0E7      	
0:3:09 0C9:29  318 S0C9    ldx   4         ; 3/0 doubling caused an overflow	
0:3:13 0D3:25  319         tamiyc          ; Save doubled value at 4/0	
0:3:26 0E6:2B  320         ldx   6         	
0:3:0C 0CC:68  321         tcmiy 1         ; Store a 1 at 6/1	
0:3:19 0D9:64  322         tcmiy 2         ; Store a 2 at 6/2	
0:3:32 0F2:29  323         ldx   4         	
0:3:25 0E5:40  324         tcy   0         	
0:3:0A 0CA:AF  325         br    S0EF      ; Go back and deal with the next digit	
               326 	
0:3:15 0D5:40  327 S0D5    tcy   0         	
0:3:2A 0EA:60  328         tcmiy 0         	
0:3:14 0D4:60  329         tcmiy 0         	
0:3:28 0E8:60  330         tcmiy 0         	
0:3:10 0D0:0F  331         retn            	
               332 	
0:3:20 0E0:00  333         mnea            	
               334 	
               335 ; *** Chapter 0 page 4	
               336 	
               337 ;********************************************************************************	
               338 ; AD2B10	
               339 ;	
               340 ; Perform Base 10 arithmetic on values in scratchpad RAM 4/1-2 and 5/1-2	
               341 ;	
               342 ; Add the two-digit base 10 number encoded in 4/1 and 4/2 to the two-digit 	
               343 ; base 10 number encoded in 5/1 and 5/2 giving a three-digit base-10 number	
               344 ; encoded in 5/0-2.	
               345 ;	
               346 ; For example:   0 1 2     (x means doesn't matter--overwritten)	
               347 ;              4 x 1 9	
               348 ;              5 x 2 2	
               349 ;	
               350 ; Returns:       0 1 2	
               351 ;              4 0 1 9	
               352 ;              5 0 4 1	
               353 ;********************************************************************************	
0:4:00 100:2D  354 AD2B10  ldx   5         	
0:4:01 101:40  355         tcy   0         	
0:4:03 103:60  356         tcmiy 0         ; 5/0 = 0	
0:4:07 107:29  357 L107    ldx   4         	
0:4:0F 10F:40  358         tcy   0         	
0:4:1F 11F:60  359         tcmiy 0         ; 4/0 = 0	
0:4:3F 13F:7F  360 SUMB10  cla             ; SUMB10 - don't initialize 100s digit	
0:4:3E 13E:44  361         tcy   2         ; Start at 4/2 with A=0	
               362 ;	
               363 ; Perform (4/Y + 5/Y) mod 10	
               364 ;	
0:4:3D 13D:29  365 S13D    ldx   4         	
0:4:3B 13B:06  366         amaac           	
0:4:37 137:2D  367         ldx   5         	
0:4:2F 12F:06  368         amaac           ; A = 4/Y + 5/Y (Y = 2-0)	
0:4:1E 11E:9D  369         br    S11D      ; Overflow?	
0:4:3C 13C:7A  370         a6aac           ; Add 6 to Accumulator - (do a MOD 10 operation; is the result >= 10?)	
0:4:39 139:BA  371         br    S13A      ; Yes	
               372 	
0:4:33 133:79  373         a10aac          ; Add 10 to Accumulator - (effectively back out the A6AAC operation)	
0:4:27 127:26  374         tamza           ; Save to 5/Y (Y = 2-0)	
0:4:0E 10E:AB  375         br    S12B      	
0:4:1D 11D:7A  376 S11D    a6aac           	
0:4:3A 13A:26  377 S13A    tamza           	
0:4:35 135:70  378         iac             	
0:4:2B 12B:04  379 S12B    dyn             	
0:4:16 116:BD  380         br    S13D      	
0:4:2C 12C:40  381         tcy   0         	
0:4:18 118:0F  382         retn            	
               383 	
               384 ;	
               385 ; Generate a random number between 17 and 32 - used to give a base Brigand count	
               386 ;	
0:4:30 130:1C  387 L130    ldp   3         	
0:4:21 121:C0  388         call  RANDOM    ; Get a random number in ACC	
0:4:02 102:29  389         ldx   4         	
0:4:05 105:48  390         tcy   1         	
0:4:0B 10B:60  391         tcmiy 0         ; 4/1 = 0	
0:4:17 117:29  392         ldx   4         	
0:4:2E 12E:24  393         tamdyn          ; 4/2 = ACC	
0:4:1C 11C:2D  394         ldx   5         	
0:4:38 138:60  395         tcmiy 0         ; 5/1 = 0	
0:4:31 131:60  396         tcmiy 0         ; 5/2 = 0	
0:4:23 123:12  397         ldp   4         	
0:4:06 106:C0  398         call  AD2B10    ; Copy random number to 5/2 via addition (?!)	
0:4:0D 10D:29  399         ldx   4         	
0:4:1B 11B:48  400         tcy   1         	
0:4:36 136:68  401         tcmiy 1         ; 4/1 = 1	
0:4:2D 12D:6E  402         tcmiy 7         ; 4/2 = 7	
0:4:1A 11A:12  403         ldp   4         	
0:4:34 134:80  404         br    AD2B10    ; Add 17 and return	
               405 	
               406 ;	
               407 ; Generate a random number between 9 and 16.  Used by Santuary to calculate	
               408 ; how much food or gold to provide the player.	
               409 ;	
0:4:29 129:1C  410 L129    ldp   3         	
0:4:12 112:C0  411         call  RANDOM    	
0:4:24 124:29  412         ldx   4         	
0:4:08 108:24  413         tamdyn          ; 4/2 = ACC	
0:4:11 111:60  414         tcmiy 0         ; 4/1 = 0	
0:4:22 122:37  415         rbit  3         ; Limit 4/2 to 0-7	
0:4:04 104:2D  416         ldx   5         	
0:4:09 109:48  417         tcy   1         	
0:4:13 113:60  418         tcmiy 0         ; 5/1 = 0	
0:4:26 126:69  419         tcmiy 9         ; 5/2 = 9	
0:4:0C 10C:C0  420         call  AD2B10    	
0:4:19 119:18  421         ldp   1         	
0:4:32 132:0B  422         tpc             	
0:4:25 125:13  423         ldp   12        	
0:4:0A 10A:A7  424         br    CPY5TO4   ; Be neat about it and copy the amount up to the top of the formula	
               425 	
               426 ;	
               427 ; Add 16 to 5/1-2	
               428 ;	
0:4:15 115:29  429 ADD16   ldx   4         	
0:4:2A 12A:48  430         tcy   1         	
0:4:14 114:68  431         tcmiy 1         ; 4/1 = 16	
0:4:28 128:66  432         tcmiy 6         	
0:4:10 110:12  433         ldp   4         	
0:4:20 120:80  434         br    AD2B10    	
               435 	
               436 ; *** Chapter 0 page 5	
               437 	
               438 ;********************************************************************************	
               439 ; DSPRSLT	
               440 ;	
               441 ; Display the results of an encounter or inventory	
               442 ; Called after encounter as well as when Repeat button is hit	
               443 ;	
               444 ; Note about status flags.  The tests assume the bit being set means	
               445 ; the inventory doesn't need to be shown.  Cleared means display the	
               446 ; current status.	
               447 ;********************************************************************************	
0:5:00 140:29  448 DSPRSLT ldx   4         	
0:5:01 141:4B  449         tcy   13        	
0:5:03 143:38  450         tbit1 0         ; Warrior count change during encounter	
0:5:07 147:B3  451         br    S173      	
               452 ;	
               453 ; Display Warrior count	
               454 ;	
0:5:0F 14F:48  455         tcy   1         ; Switch drum to Warrior/Food/Beast position	
0:5:1F 15F:11  456         ldp   8         	
0:5:3F 17F:D5  457         call  ROTDRUM   	
0:5:3E 17E:18  458         ldp   1         	
0:5:3D 17D:0B  459         tpc             	
0:5:3B 17B:16  460         ldp   6         	
0:5:37 177:F2  461         call  CPY2TO5   ; Copy the warrior count for current player to 5/1 and 5/2	
0:5:2F 16F:11  462         ldp   8         	
0:5:1E 15E:E4  463         call  BUF2DSP   ; Update display buffer with contents of 5/1 and 5/2	
0:5:3C 17C:19  464         ldp   9         	
0:5:39 179:C1  465         call  L241      ; Light top window and update display from display buffer???	
               466 	
0:5:33 173:29  467 S173    ldx   4         	
0:5:27 167:4B  468         tcy   13        	
0:5:0E 14E:3A  469         tbit1 1         ; Food change during encounter	
0:5:1D 15D:97  470         br    S157      	
               471 ;	
               472 ; Display Food	
               473 ;	
0:5:3A 17A:48  474         tcy   1         ; Switch drum to Warrior/Food/Beast position	
0:5:35 175:11  475         ldp   8         	
0:5:2B 16B:D5  476         call  ROTDRUM   	
0:5:16 156:18  477         ldp   1         	
0:5:2C 16C:0B  478         tpc             	
0:5:18 158:13  479         ldp   12        	
0:5:30 170:EC  480         call  CPY1TO5   ; Copy the gold amount for current player to 5/1 and 5/2	
0:5:21 161:11  481         ldp   8         	
0:5:02 142:E4  482         call  BUF2DSP   ; Update display buffer with contents of 5/1 and 5/2	
0:5:05 145:19  483         ldp   9         	
0:5:0B 14B:DF  484         call  L25F      	
               485 	
0:5:17 157:29  486 S157    ldx   4         	
0:5:2E 16E:4B  487         tcy   13        	
0:5:1C 15C:3B  488         tbit1 3         ; Beast found during encounter	
0:5:38 178:92  489         br    S152      	
               490 ;	
               491 ; Display Beast	
               492 ;	
0:5:31 171:2C  493         ldx   1         	
0:5:23 163:4C  494         tcy   3         	
0:5:06 146:38  495         tbit1 0         ; Check inventory for Beast	
0:5:0D 14D:B6  496         br    S176      	
0:5:1B 15B:92  497         br    S152      	
0:5:36 176:48  498 S176    tcy   1         ; Switch drum to Warrior/Food/Beast position	
0:5:2D 16D:11  499         ldp   8         	
0:5:1A 15A:D5  500         call  ROTDRUM   	
0:5:34 174:19  501         ldp   9         	
0:5:29 169:FD  502         call  LTLWRCL   ; Light lower window	
               503 	
0:5:12 152:29  504 S152    ldx   4         	
0:5:24 164:47  505         tcy   14        	
0:5:08 148:38  506         tbit1 0         ; Scout found during encounter	
0:5:11 151:95  507         br    S155      	
               508 ;	
               509 ; Display Scout	
               510 ;	
0:5:22 162:2C  511         ldx   1         	
0:5:04 144:4C  512         tcy   3         	
0:5:09 149:3B  513         tbit1 3         ; Check inventory for Scout	
0:5:13 153:8C  514         br    S14C      	
0:5:26 166:95  515         br    S155      	
0:5:0C 14C:44  516 S14C    tcy   2         ; Switch drum to Scout/Healer/Gold position	
0:5:19 159:11  517         ldp   8         	
0:5:32 172:D5  518         call  ROTDRUM   	
0:5:25 165:19  519         ldp   9         	
0:5:0A 14A:C0  520         call  LTTOPCL   ; Light Scout and clear display	
               521 	
0:5:15 155:29  522 S155    ldx   4         	
0:5:2A 16A:47  523         tcy   14        	
0:5:14 154:16  524         ldp   6         	
0:5:28 168:3A  525         tbit1 1         ; Healer found during encounter?	
0:5:10 150:B7  526         br    L1B7      	
0:5:20 160:80  527         br    S180	
               528 	
               529 	
               530 ; *** Chapter 0 page 6	
               531 	
               532 ;	
               533 ; Display Healer	
               534 ;	
0:6:00 180:2C  535 S180    ldx   1         	
0:6:01 181:4C  536         tcy   3         	
0:6:03 183:3A  537         tbit1 1         ; Check inventory for Healer	
0:6:07 187:9F  538         br    S19F      	
0:6:0F 18F:B7  539         br    L1B7      	
0:6:1F 19F:44  540 S19F    tcy   2         ; Switch drum to Scout/Healer/Gold position	
0:6:3F 1BF:11  541         ldp   8         	
0:6:3E 1BE:D5  542         call  ROTDRUM   	
0:6:3D 1BD:19  543         ldp   9         	
0:6:3B 1BB:CF  544         call  LTMIDCL   ; Light Healer and clear display	
               545 	
0:6:37 1B7:29  546 L1B7    ldx   4         	
0:6:2F 1AF:4B  547         tcy   13        	
0:6:1E 19E:39  548         tbit1 2         ; Gold found during encounter?	
0:6:3C 1BC:B0  549         br    S1B0      	
               550 ;	
               551 ; Display Gold	
               552 ;	
0:6:39 1B9:44  553         tcy   2         ; Switch drum to Scout/Healer/Gold position	
0:6:33 1B3:11  554         ldp   8         	
0:6:27 1A7:D5  555         call  ROTDRUM   	
0:6:0E 18E:18  556         ldp   1         	
0:6:1D 19D:0B  557         tpc             	
0:6:3A 1BA:13  558         ldp   12        	
0:6:35 1B5:D7  559         call  CPY0TO5   	
0:6:2B 1AB:11  560         ldp   8         	
0:6:16 196:E4  561         call  BUF2DSP   ; Update display buffer with contents of 5/1 and 5/2	
0:6:2C 1AC:19  562         ldp   9         	
0:6:18 198:FB  563         call  L27B      ; Light bottom window and update display from display buffer???	
               564 	
0:6:30 1B0:29  565 S1B0    ldx   4         	
0:6:21 1A1:4F  566         tcy   15        	
0:6:02 182:38  567         tbit1 0         ; Gold Key found during encounter?	
0:6:05 185:B6  568         br    S1B6      	
               569 ;	
               570 ; Display Gold Key	
               571 ;	
0:6:0B 18B:2A  572         ldx   2         	
0:6:17 197:4C  573         tcy   3         	
0:6:2E 1AE:3B  574         tbit1 3         ; Check inventory for Gold Key	
0:6:1C 19C:B1  575         br    S1B1      	
0:6:38 1B8:B6  576         br    S1B6      	
0:6:31 1B1:4C  577 S1B1    tcy   3         ; Switch drum to Gold Key/Silver Key/Brass Key	
0:6:23 1A3:11  578         ldp   8         	
0:6:06 186:D5  579         call  ROTDRUM   	
0:6:0D 18D:19  580         ldp   9         	
0:6:1B 19B:C0  581         call  LTTOPCL   ; Light Gold Key and clear display	
               582 	
0:6:36 1B6:29  583 S1B6    ldx   4         	
0:6:2D 1AD:47  584         tcy   14        	
0:6:1A 19A:3B  585         tbit1 3         ; Silver Key found during encounter?	
0:6:34 1B4:8C  586         br    S18C      	
               587 ;	
               588 ; Display Silver Key	
               589 ;	
0:6:29 1A9:2A  590         ldx   2         	
0:6:12 192:4C  591         tcy   3         	
0:6:24 1A4:39  592         tbit1 2         ; Check inventory for Silver Key	
0:6:08 188:A2  593         br    S1A2      	
0:6:11 191:8C  594         br    S18C      	
0:6:22 1A2:4C  595 S1A2    tcy   3         ; Switch drum to Gold Key/Silver Key/Brass Key	
0:6:04 184:11  596         ldp   8         	
0:6:09 189:D5  597         call  ROTDRUM   	
0:6:13 193:19  598         ldp   9         	
0:6:26 1A6:CF  599         call  LTMIDCL   ; Light Silver Key and clear display	
               600 	
0:6:0C 18C:29  601 S18C    ldx   4         	
0:6:19 199:47  602         tcy   14        	
0:6:32 1B2:1E  603         ldp   7         	
0:6:25 1A5:39  604         tbit1 2         ; Brass Key found during encounter?	
0:6:0A 18A:9F  605         br    L1DF      	
               606 ;	
               607 ; Display Brass Key	
               608 ;	
0:6:15 195:2A  609         ldx   2         	
0:6:2A 1AA:4C  610         tcy   3         	
0:6:14 194:3A  611         tbit1 1         ; Check inventory for Brass Key	
0:6:28 1A8:80  612         br    L1C0      	
0:6:10 190:9F  613         br    L1DF      	
0:6:20 1A0:00  614         mnea            	
               615 	
               616 ; *** Chapter 0 page 7	
               617 	
0:7:00 1C0:4C  618 L1C0    tcy   3         ; Switch drum to Gold Key/Silver Key/Brass Key	
0:7:01 1C1:11  619         ldp   8         	
0:7:03 1C3:D5  620         call  ROTDRUM   	
0:7:07 1C7:19  621         ldp   9         	
0:7:0F 1CF:FD  622         call  LTLWRCL   ; Light lower window	
               623 	
0:7:1F 1DF:29  624 L1DF    ldx   4         	
0:7:3F 1FF:4F  625         tcy   15        	
0:7:3E 1FE:3A  626         tbit1 1         ; Sword resulting from encounter?	
0:7:3D 1FD:BA  627         br    S1FA      	
               628 ;	
               629 ; Display Sword if in inventory	
               630 ;	
0:7:3B 1FB:2C  631         ldx   1         	
0:7:37 1F7:4C  632         tcy   3         	
0:7:2F 1EF:39  633         tbit1 2         ; Check inventory for Sword	
0:7:1E 1DE:B9  634         br    S1F9      	
0:7:3C 1FC:BA  635         br    S1FA      	
0:7:39 1F9:42  636 S1F9    tcy   4         ; Switch drum to Dragon/Sword/Pegasus	
0:7:33 1F3:11  637         ldp   8         	
0:7:27 1E7:D5  638         call  ROTDRUM   	
0:7:0E 1CE:19  639         ldp   9         	
0:7:1D 1DD:CF  640         call  LTMIDCL   ; Light Sword and clear display	
               641 ;	
               642 ; Display Pegasus?	
               643 ;	
               644 ; Note, Pegasus isn't an inventory item so there is no check for it	
               645 ;	
0:7:3A 1FA:29  646 S1FA    ldx   4         	
0:7:35 1F5:4F  647         tcy   15        	
0:7:2B 1EB:39  648         tbit1 2         ; Pegasus resulting from encounter?	
0:7:16 1D6:85  649         br    S1C5      	
               650 	
0:7:2C 1EC:42  651         tcy   4         ; Switch drum to Dragon/Sword/Pegasus	
0:7:18 1D8:11  652         ldp   8         	
0:7:30 1F0:D5  653         call  ROTDRUM   	
0:7:21 1E1:19  654         ldp   9         	
0:7:02 1C2:FD  655         call  LTLWRCL   ; Light lower window	
0:7:05 1C5:0F  656 S1C5    retn            	
               657 	
               658 ;********************************************************************************	
               659 ; PROMPT - Prompt user for input	
               660 ;	
               661 ; Update display with contents of 7/14 and 7/15, flash and wait for keypress	
               662 ;	
               663 ; Return key pressed in Y:	
               664 ;  0 = Yes/Buy          6 = Move	
               665 ;  1 = Haggle           7 = Frontier	
               666 ;  2 = Tomb/Ruin        8 = No/End	
               667 ;  3 = Dark Tower       9 = Clear	
               668 ;  4 = Repeat          10 = Sanctuary/Citadel	
               669 ;  5 = Bazaar          11 = Inventory	
               670 ;********************************************************************************	
0:7:0B 1CB:2B  671 PROMPT  ldx   6         	
0:7:17 1D7:43  672         tcy   12        	
0:7:2E 1EE:30  673         sbit  0         	
0:7:1C 1DC:35  674         rbit  2         ; Don't update LEDs immediately (?)	
0:7:38 1F8:2B  675 L1F8    ldx   6         	
0:7:31 1F1:4B  676         tcy   13        	
0:7:23 1E3:37  677         rbit  3         	
               678 	
0:7:06 1C6:15  679 L1C6    ldp   10        	
0:7:0D 1CD:C0  680         call  REFRLED   	
0:7:1B 1DB:15  681         ldp   10        	
0:7:36 1F6:C0  682         call  REFRLED   	
0:7:2D 1ED:15  683         ldp   10        	
0:7:1A 1DA:C0  684         call  REFRLED   	
0:7:34 1F4:2E  685         ldx   3         	
0:7:29 1E9:44  686         tcy   2         	
0:7:12 1D2:21  687         tma             	
0:7:24 1E4:76  688         a7aac           	
0:7:08 1C8:CA  689         call  S1CA      	
0:7:11 1D1:27  690         tam             	
               691 ;	
               692 ; Set things up before reading the keyboard	
               693 ;	
0:7:22 1E2:2B  694         ldx   6         	
0:7:04 1C4:4B  695         tcy   13        	
0:7:09 1C9:35  696         rbit  2         	
0:7:13 1D3:32  697         sbit  1         	
0:7:26 1E6:30  698         sbit  0         	
0:7:0C 1CC:47  699         tcy   14        	
0:7:19 1D9:60  700         tcmiy 0         	
0:7:32 1F2:14  701         ldp   2         	
0:7:25 1E5:AB  702         br    READKBD   	
               703 	
0:7:0A 1CA:24  704 S1CA    tamdyn          	
0:7:15 1D5:3E  705         imac            	
0:7:2A 1EA:0F  706         retn            	
               707 	
0:7:14 1D4:03  708 L1D4    xma             	
0:7:28 1E8:04  709         dyn             	
0:7:10 1D0:0F  710         retn            	
               711 	
0:7:20 1E0:00  712         mnea            	
               713 	
               714 ; *** Chapter 0 page 8	
               715 	
               716 ;	
               717 ; Rotate the player RAM buffer so the next player is in the first	
               718 ; position	
               719 ;	
0:8:00 200:28  720 L200    ldx   0         ; Rotate 0/1-12 left three times	
0:8:01 201:F0  721         call  S230      	
0:8:03 203:F0  722         call  S230      	
0:8:07 207:F0  723         call  S230      	
0:8:0F 20F:2C  724         ldx   1         ; Rotate 1/1-12 left three times	
0:8:1F 21F:F0  725         call  S230      	
0:8:3F 23F:F0  726         call  S230      	
0:8:3E 23E:F0  727         call  S230      	
0:8:3D 23D:2A  728         ldx   2         ; Rotate 2/1-12 left three times	
0:8:3B 23B:F0  729         call  S230      	
0:8:37 237:F0  730         call  S230      	
0:8:2F 22F:F0  731         call  S230      	
               732 	
0:8:1E 21E:2E  733         ldx   3         	
0:8:3C 23C:4D  734         tcy   11        	
0:8:39 239:21  735         tma             ; Pick up the current player from 3/11	
0:8:33 233:7D  736         a12aac          ; Add 12 to generate an overflow if we're on player 4	
0:8:27 227:9D  737         br    S21D      ; Overflow, it's P0 right now	
0:8:0E 20E:7C  738         a4aac           ; Add 4 to get us back to where we should be	
               739 	
0:8:1D 21D:70  740 S21D    iac             ; Next player...	
0:8:3A 23A:27  741         tam             ; Update current player at 3/11	
0:8:35 235:49  742         tcy   9         	
0:8:2B 22B:01  743         alem            ; Check that we're not exceeding the total number of players playing	
0:8:16 216:98  744         br    S218      ; We're done	
0:8:2C 22C:80  745         br    L200      ; Oops.  Do another rotation	
               746 	
0:8:18 218:0F  747 S218    retn            	
               748 	
               749 ;	
               750 ; Rotate the current register file words 1-12 left one word	
               751 ;	
0:8:30 230:43  752 S230    tcy   12        ; Start at 12	
0:8:21 221:21  753         tma             ; Get a copy of what's at the current position	
0:8:02 202:04  754         dyn             ; Move pointer left	
0:8:05 205:03  755 S205    xma             ; Swap	
0:8:0B 20B:04  756         dyn             ; Move pointer left	
0:8:17 217:50  757         ynec  0         ; Are we pointing at zero?	
0:8:2E 22E:85  758         br    S205      ; Nope, do it again	
0:8:1C 21C:43  759         tcy   12        ; Final step, copy what was at 1	
0:8:38 238:27  760         tam             ; To 12	
0:8:31 231:0F  761         retn            	
               762 	
               763 ;********************************************************************************	
               764 ; RND0TO2 - Return a random value from 0 to 2 in A	
               765 ;	
               766 ;        11 - 15 - A = 2	
               767 ;        6 - 10 - A = 1	
               768 ;        0 -  5 - A = 0	
               769 ;********************************************************************************	
0:8:23 223:1C  770 RND0TO2 ldp   3         	
0:8:06 206:C0  771         call  RANDOM    	
0:8:0D 20D:48  772 L20D    tcy   1         	
0:8:1B 21B:72  773 S21B    a5aac           	
0:8:36 236:B4  774         br    S234      	
0:8:2D 22D:04  775         dyn             	
0:8:1A 21A:9B  776         br    S21B      	
0:8:34 234:23  777 S234    tya             	
0:8:29 229:70  778         iac             	
0:8:12 212:0F  779         retn            	
               780 	
               781 ;********************************************************************************	
               782 ; BUF2DSP - Load 5/1 and 5/2 into the display buffer 7/14 and 7/15 respectively	
               783 ;********************************************************************************	
0:8:24 224:2D  784 BUF2DSP ldx   5         	
0:8:08 208:48  785         tcy   1         	
0:8:11 211:21  786         tma             	
0:8:22 222:2F  787         ldx   7         	
0:8:04 204:47  788         tcy   14        	
0:8:09 209:27  789         tam             	
0:8:13 213:2D  790         ldx   5         	
0:8:26 226:44  791         tcy   2         	
0:8:0C 20C:21  792         tma             	
0:8:19 219:2F  793         ldx   7         	
0:8:32 232:4F  794         tcy   15        	
0:8:25 225:27  795         tam             	
0:8:0A 20A:0F  796         retn            	
               797 	
               798 ;********************************************************************************	
               799 ; ROTDRUM - Rotate the drum to the position specified in Y	
               800 ;********************************************************************************	
0:8:15 215:23  801 ROTDRUM tya             	
0:8:2A 22A:29  802         ldx   4         	
0:8:14 214:40  803         tcy   0         	
0:8:28 228:27  804         tam             	
0:8:10 210:10  805         ldp   0         	
0:8:20 220:BD  806         br    S03D      	
               807 	
               808 ; *** Chapter 0 page 9	
               809 	
               810 ;********************************************************************************	
               811 ; LTTOPCL - Clear display and light top lamp	
               812 ;********************************************************************************	
0:9:00 240:DA  813 LTTOPCL call  S25A      ; Load blanks into 7/14-15	
0:9:01 241:C8  814 L241    call  S248      ; Set for immediate update of LEDS (6/12 bit 2 set)	
0:9:03 243:4E  815         tcy   7         ; Select upper lamp	
0:9:07 247:AF  816         br    S26F      	
               817 	
               818 ;********************************************************************************	
               819 ; LTMIDCL - Clear display and light middle lamp	
               820 ;********************************************************************************	
0:9:0F 24F:DA  821 LTMIDCL call  S25A      ; Load blanks into 7/14-15	
0:9:1F 25F:C8  822 L25F    call  S248      ; Set for immediate update of LEDS (6/12 bit 2 set)	
0:9:3F 27F:46  823         tcy   6         ; Select middle lamp	
0:9:3E 27E:AF  824         br    S26F      	
               825 	
               826 ;********************************************************************************	
               827 ; LTLWRCL - Clear display and light lower lamp	
               828 ;********************************************************************************	
0:9:3D 27D:DA  829 LTLWRCL call  S25A      ; Load blanks into 7/14-15	
0:9:3B 27B:C8  830 L27B    call  S248      ; Set for immediate update of LEDS (6/12 bit 2 set)	
0:9:37 277:4A  831         tcy   5         ; Select lower lamp	
               832 	
               833 ;	
               834 ; Light the lamp referenced in Y, beep, update the LEDs and loop over REFRLED	
               835 ;	
0:9:2F 26F:0D  836 S26F    setr            ; Light the selected lamp	
0:9:1E 25E:1C  837         ldp   3         	
0:9:3C 27C:0B  838         tpc             	
0:9:39 279:1B  839         ldp   13        	
0:9:33 273:C9  840         call  PLYBEEP   	
0:9:27 267:2B  841 L267    ldx   6         	
0:9:0E 24E:43  842         tcy   12        	
0:9:1D 25D:31  843         sbit  2         ; 6/12 bit 2 set - Immediate update of LEDs	
               844 ;	
               845 ; Call REFRLED $BF (191) times	
               846 ;	
0:9:3A 27A:2B  847         ldx   6         	
0:9:35 275:40  848         tcy   0         	
0:9:2B 26B:6F  849         tcmiy 15        ; 6/0 = 15	
0:9:16 256:6D  850         tcmiy 11        ; 6/1 = 11	
0:9:2C 26C:27  851 S26C    tam             ; 6/2 = A	
0:9:18 258:15  852         ldp   10        	
0:9:30 270:C0  853         call  REFRLED   	
0:9:21 261:2B  854         ldx   6         	
0:9:02 242:40  855         tcy   0         	
0:9:05 245:07  856         dman            ; Acc = 6/0 - 1	
0:9:0B 24B:AC  857         br    S26C      ; Update 6/0 and loop	
0:9:17 257:25  858         tamiyc          ; Acc has overflowed; update 6/0 and focus on 6/1	
0:9:2E 26E:07  859         dman            ; Decrement 6/1	
0:9:1C 25C:AC  860         br    S26C      ; Update 6/1 and loop	
               861 ;	
               862 ; We've called REFRLED enough times; turn off the lamps	
               863 ;	
0:9:38 278:0A  864         tdo             	
0:9:31 271:4E  865         tcy   7         ; Select Upper lamp	
0:9:23 263:0C  866         rstr            ; Turn it off	
0:9:06 246:46  867         tcy   6         ; Select Middle lamp	
0:9:0D 24D:0C  868         rstr            ; Turn it off	
0:9:1B 25B:4A  869         tcy   5         ; Select Lower lamp	
0:9:36 276:0C  870         rstr            ; Turn it off	
               871 	
0:9:2D 26D:0F  872         retn            	
               873 ;	
               874 ; Load blanks into display buffer (7/14-15)	
               875 ;	
0:9:1A 25A:2F  876 S25A    ldx   7         	
0:9:34 274:47  877         tcy   14        	
0:9:29 269:6F  878         tcmiy 15        ; 7/14 = 15 (" ")	
0:9:12 252:6F  879         tcmiy 15        ; 7/15 = 15 (" ")	
0:9:24 264:0F  880         retn            	
               881 ;	
               882 ; Set for immediate update of LEDs on call to REFRLED (6/12 bit 2 set)	
               883 ;	
0:9:08 248:2B  884 S248    ldx   6         	
0:9:11 251:43  885         tcy   12        	
0:9:22 262:31  886         sbit  2         	
0:9:04 244:0F  887         retn            	
               888 	
               889 ;********************************************************************************	
               890 ; CPYBRIG - Copy the current brigand count (3/12-13) to 5/1-2 for base 10 math	
               891 ;********************************************************************************	
0:9:09 249:2E  892 CPYBRIG ldx   3         	
0:9:13 253:43  893         tcy   12        	
0:9:26 266:21  894         tma             	
0:9:0C 24C:2D  895         ldx   5         	
0:9:19 259:48  896         tcy   1         	
0:9:32 272:27  897         tam             	
0:9:25 265:2E  898         ldx   3         	
0:9:0A 24A:4B  899         tcy   13        	
0:9:15 255:21  900         tma             	
0:9:2A 26A:2D  901         ldx   5         	
0:9:14 254:44  902         tcy   2         	
0:9:28 268:27  903         tam             	
0:9:10 250:0F  904         retn            	
               905 	
0:9:20 260:00  906         mnea            	
               907 	
               908 ; *** Chapter 0 page 10	
               909 	
               910 ;********************************************************************************	
               911 ; REFRLED	
               912 ;	
               913 ; Refresh the contents of the LEDs either with new data or handle flashing	
               914 ;	
               915 ;********************************************************************************	
0:A:00 280:2B  916 REFRLED ldx   6         	
0:A:01 281:43  917         tcy   12        	
0:A:03 283:39  918         tbit1 2         ; 6/12 Bit 2 - Immediate update of LEDs.  Bypass flashing.	
0:A:07 287:A1  919         br    S2A1      	
               920 ;	
               921 ; Decrement countdown timer in 7/12-13.  When it expires, it checks what's currently displayed	
               922 ; in the LED segments (6/12 Bit 1).  If it's reset, it does a TDO and clears the display.  It then	
               923 ; toggles the bit.	
               924 ;	
0:A:0F 28F:2F  925         ldx   7         	
0:A:1F 29F:4B  926         tcy   13        	
0:A:3F 2BF:07  927         dman            	
0:A:3E 2BE:AB  928         br    S2AB      	
0:A:3D 2BD:24  929         tamdyn          ; 7/13 = 7/13 - 1	
0:A:3B 2BB:07  930         dman            ; A = 7/12 - 1	
0:A:37 2B7:AB  931         br    S2AB      	
               932 ;	
               933 ; Countdown has expired.  Acc has 15 (" ") in it due to underflow.  If 6/12 bit 1 is reset, the	
               934 ; display has data in it.  Blank the display with a TDO.  In either case, toggle 6/12 bit 1.	
               935 ;	
0:A:2F 2AF:68  936         tcmiy 1         ; Reset 7/12 - $1F	
0:A:1E 29E:2B  937         ldx   6         	
0:A:3C 2BC:43  938         tcy   12        	
0:A:39 2B9:3A  939         tbit1 1         ; 6/12 Bit 1 - Display currently blank	
0:A:33 2B3:BA  940         br    S2BA      	
0:A:27 2A7:32  941         sbit  1         ; Set 6/12 Bit 1 - Display now blank	
0:A:0E 28E:0A  942         tdo             ; Transfer Accumulator to O outputs - Clear display (Load 15 [" "] into LED)	
0:A:1D 29D:9A  943         br    S29A      	
0:A:3A 2BA:36  944 S2BA    rbit  1         ; Clear 6/12 Bit 1 - Display now not blank	
0:A:35 2B5:A1  945         br    S2A1      	
               946 	
0:A:2B 2AB:27  947 S2AB    tam             	
0:A:16 296:2B  948         ldx   6         	
0:A:2C 2AC:43  949         tcy   12        	
0:A:18 298:3A  950         tbit1 1         ; Is display currently blank (6/12 Bit 1 set)?	
0:A:30 2B0:9A  951         br    S29A      ; Bit 1 is set.  Skip update and just delay	
               952 ;	
               953 ; Update the LED segments with the contents of 7/14-15	
               954 ;	
0:A:21 2A1:21  955 S2A1    tma             ; Load 6/12	
0:A:02 282:20  956         tay             ; Save it...	
0:A:05 285:7E  957         a8aac           ; Toggle 6/12 bit 3	
0:A:0B 28B:AE  958         br    S2AE      ; It's now clear; we want the Status Latch set to 1	
0:A:17 297:20  959         tay             ; It's now set; we want the Status Latch set to 0	
0:A:2E 2AE:02  960 S2AE    ynea            ; Update Status Latch to select correct LED segment based on prior steps	
0:A:1C 29C:43  961         tcy   12        	
0:A:38 2B8:27  962         tam             ; Update 6/12 with the new state of 6/12 Bit 3	
0:A:31 2B1:2F  963         ldx   7         	
0:A:23 2A3:47  964         tcy   14        ; Select 7/14	
0:A:06 286:7E  965         a8aac           ; Flip bit 3 of Accumulator BACK to test it (from the earlier work on 6/12)	
0:A:0D 28D:B6  966         br    S2B6      ; There was a carry, we have the right segment (Bit 3 was set)	
0:A:1B 29B:4F  967         tcy   15        ; Switch to 7/15 (Bit 3 was clear)	
0:A:36 2B6:21  968 S2B6    tma             ; Pick up value in the referenced LED display buffer	
0:A:2D 2AD:0A  969         tdo             ; Transfer Accumulator to O outputs - Update the LED display	
               970 	
               971 ;	
               972 ; Display has been updated; delay for 255 loops and return	
               973 ;	
0:A:1A 29A:4F  974 S29A    tcy   15        	
0:A:34 2B4:23  975         tya             	
0:A:29 2A9:04  976 S2A9    dyn             	
0:A:12 292:A9  977         br    S2A9      	
0:A:24 2A4:77  978         dan             	
0:A:08 288:A9  979         br    S2A9      	
0:A:11 291:0F  980         retn            	
               981 ;	
               982 ; Used by read keyboard routine	
               983 ;	
0:A:22 2A2:0A  984 L2A2    tdo             	
0:A:04 284:2B  985         ldx   6         	
0:A:09 289:4F  986         tcy   15        	
0:A:13 293:22  987         tmy             	
0:A:26 2A6:0F  988         retn            	
               989 ;	
               990 ; Copy 5/2-0 to 7/2-0	
               991 ;	
0:A:0C 28C:44  992 L28C    tcy   2         	
0:A:19 299:2D  993 S299    ldx   5         	
0:A:32 2B2:21  994         tma             	
0:A:25 2A5:2F  995         ldx   7         	
0:A:0A 28A:24  996         tamdyn          	
0:A:15 295:99  997         br    S299      	
0:A:2A 2AA:0F  998         retn            	
               999 ;	
              1000 ; This code looks to be unused...  Odd.  There's also a chunk of code	
              1001 ; like this at SFD4	
              1002 ;	
              1003 ; Values are 65 25 80 94	
              1004 ;	
0:A:14 294:65 1005 S294    tcmiy 10        	
0:A:28 2A8:25 1006         tamiyc          	
0:A:10 290:80 1007         br    REFRLED   	
0:A:20 2A0:94 1008         br    S294      	
              1009 	
              1010 ; *** Chapter 0 page 11	
              1011 	
              1012 ;	
              1013 ; Group of routines to rotate buffer of four two-word values at 5/8-1 by	
              1014 ; 6, 4 and 2 positions	
              1015 ;	
0:B:00 2C0:DF 1016 L2C0    call  ROL5      	
0:B:01 2C1:DF 1017         call  ROL5      	
0:B:03 2C3:DF 1018 L2C3    call  ROL5      	
0:B:07 2C7:DF 1019         call  ROL5      	
0:B:0F 2CF:DF 1020 L2CF    call  ROL5      	
              1021 	
0:B:1F 2DF:2D 1022 ROL5    ldx   5         	
0:B:3F 2FF:41 1023         tcy   8         	
0:B:3E 2FE:21 1024         tma             	
              1025 	
0:B:3D 2FD:04 1026 S2FD    dyn             	
0:B:3B 2FB:03 1027         xma             	
0:B:37 2F7:58 1028         ynec  1         	
0:B:2F 2EF:BD 1029         br    S2FD      	
0:B:1E 2DE:41 1030         tcy   8         	
0:B:3C 2FC:27 1031         tam             	
0:B:39 2F9:0F 1032         retn            	
              1033 	
0:B:33 2F3:44 1034 L2F3    tcy   2         	
0:B:27 2E7:2F 1035 S2E7    ldx   7         	
0:B:0E 2CE:21 1036         tma             	
0:B:1D 2DD:2D 1037         ldx   5         	
0:B:3A 2FA:24 1038         tamdyn          	
0:B:35 2F5:A7 1039         br    S2E7      	
0:B:2B 2EB:0F 1040         retn            	
              1041 ;	
              1042 ; Rotate the buffer of five 2-digit Base10 values left at 7/1-10.  Keep track of	
              1043 ; the position at 7/11.  Value at 7/11 is 1-5.	
              1044 ;	
0:B:16 2D6:2F 1045 L2D6    ldx   7         	
0:B:2C 2EC:4D 1046         tcy   11        	
0:B:18 2D8:21 1047         tma             ; Save the current position	
              1048 ;	
              1049 ; Limit the range of 7/11 to 0-4 (concerned someone futzed with it?)	
              1050 ;	
0:B:30 2F0:75 1051         a11aac          	
0:B:21 2E1:85 1052         br    S2C5      	
0:B:02 2C2:72 1053         a5aac           	
0:B:05 2C5:70 1054 S2C5    iac             ; Advance the position	
0:B:0B 2CB:24 1055         tamdyn          ; Save Acc at 7/11	
0:B:17 2D7:EE 1056         call  S2EE      ; Rotate all of the values in 7/10-1 left (twice)	
0:B:2E 2EE:21 1057 S2EE    tma             	
0:B:1C 2DC:04 1058         dyn             	
0:B:38 2F8:03 1059 S2F8    xma             	
0:B:31 2F1:04 1060         dyn             	
0:B:23 2E3:50 1061         ynec  0         	
0:B:06 2C6:B8 1062         br    S2F8      	
              1063 	
0:B:0D 2CD:45 1064         tcy   10        ; Finish up by copying what was in 7/1 to 7/10	
0:B:1B 2DB:27 1065         tam             	
              1066 	
0:B:36 2F6:0F 1067         retn            	
              1068 	
              1069 ;	
              1070 ; Called during Bazaar visit	
              1071 ;	
0:B:2D 2ED:1C 1072 L2ED    ldp   3         	
              1073 ;	
              1074 ; Generate a random number from 0-9 and add it to 17	
              1075 ; Results in 5/1 and 5/2	
              1076 ;	
0:B:1A 2DA:C0 1077         call  RANDOM    ; Generate a random number in A; return with Y=2	
0:B:34 2F4:29 1078         ldx   4         	
0:B:29 2E9:24 1079         tamdyn          ; 4/2 = ACC	
0:B:12 2D2:60 1080         tcmiy 0         ; 4/1 = 0	
0:B:24 2E4:37 1081         rbit  3         ; 4/2 = 4/2 & 0b0111	
0:B:08 2C8:2D 1082         ldx   5         	
0:B:11 2D1:48 1083         tcy   1         	
0:B:22 2E2:68 1084         tcmiy 1         ; 5/1 = 1	
0:B:04 2C4:6E 1085         tcmiy 7         ; 5/2 = 7	
0:B:09 2C9:12 1086         ldp   4         	
0:B:13 2D3:C0 1087         call  AD2B10    	
              1088 	
0:B:26 2E6:18 1089         ldp   1         	
0:B:0C 2CC:0B 1090         tpc             	
0:B:19 2D9:13 1091         ldp   12        	
0:B:32 2F2:A7 1092         br    CPY5TO4   	
0:B:25 2E5:2E 1093 L2E5    ldx   3         	
0:B:0A 2CA:48 1094         tcy   1         	
0:B:15 2D5:17 1095         ldp   14        	
0:B:2A 2EA:3A 1096 S2EA    tbit1 1         	
0:B:14 2D4:A6 1097         br    L2BINIT   	
0:B:28 2E8:AA 1098         br    BRGDONE      	
0:B:10 2D0:08 1099         tka             	
0:B:20 2E0:0A 1100         tdo             	
              1101 	
              1102 ; *** Chapter 0 page 12	
              1103 	
              1104 ;********************************************************************************	
              1105 ; SU2B10 - Perform Base 10 subtraction on values in scratchpad RAM 4/1-2 and 5/1-2	
              1106 ;	
              1107 ;          Subtract the two-digit base 10 number encoded in 4/1 and 4/2 from	
              1108 ;          the two-digit base 10 number encoded in 5/1 and 5/2 giving	
              1109 ;          a two-digit base-10 number encoded in 5/1 and 5/2	
              1110 ;	
              1111 ;          For example:   1 2	
              1112 ;                       4 1 9	
              1113 ;                       5 2 2	
              1114 ;	
              1115 ;          Returns:       1 2	
              1116 ;                       4 1 9	
              1117 ;                       5 0 3	
              1118 ;********************************************************************************	
0:C:00 300:2D 1119 SU2B10  ldx   5         	
0:C:01 301:40 1120         tcy   0         	
0:C:03 303:60 1121         tcmiy 0         ; 5/0 = 0	
0:C:07 307:29 1122 L307    ldx   4         	
0:C:0F 30F:40 1123         tcy   0         	
0:C:1F 31F:60 1124         tcmiy 0         ; 4/0 = 0	
0:C:3F 33F:7F 1125 L33F    cla             	
0:C:3E 33E:44 1126         tcy   2         	
0:C:3D 33D:29 1127 S33D    ldx   4         	
0:C:3B 33B:06 1128         amaac           	
0:C:37 337:2D 1129         ldx   5         	
0:C:2F 32F:3C 1130         saman           ; A = 5/Y - 4/Y (Y = 2-0)	
0:C:1E 31E:B5 1131         br    S335      ; Branch if no borrow	
0:C:3C 33C:79 1132         a10aac          	
0:C:39 339:26 1133         tamza           ; 5/Y = A + 10	
0:C:33 333:70 1134         iac             	
0:C:27 327:04 1135 S327    dyn             	
0:C:0E 30E:BD 1136         br    S33D      	
0:C:1D 31D:40 1137         tcy   0         	
0:C:3A 33A:0F 1138         retn            	
              1139 	
0:C:35 335:26 1140 S335    tamza           	
0:C:2B 32B:A7 1141         br    S327      	
              1142 ;	
              1143 ; Display key awarded	
              1144 ;	
0:C:16 316:29 1145 L316    ldx   4         	
0:C:2C 32C:42 1146         tcy   4         	
0:C:18 318:27 1147         tam             ; 4/4 = A	
0:C:30 330:4C 1148         tcy   3         ; Gold Key/Silver Key/Brass Key	
0:C:21 321:11 1149         ldp   8         	
0:C:02 302:D5 1150         call  ROTDRUM   	
0:C:05 305:29 1151         ldx   4         	
0:C:0B 30B:42 1152         tcy   4         	
0:C:17 317:21 1153         tma             ; A = 4/4	
0:C:2E 32E:19 1154         ldp   9         	
0:C:1C 31C:7B 1155         a14aac          ; A = A + 14	
0:C:38 338:80 1156         br    LTTOPCL   ; On overflow, light Gold Key and clear the display	
0:C:31 331:70 1157         iac             	
0:C:23 323:8F 1158         br    LTMIDCL   ; Light Silver Key and clear display	
0:C:06 306:BD 1159         br    LTLWRCL        ; Light Brass Key and clear display	
              1160 ;	
              1161 ; Copy 5/1 and 5/2 to 3/12 and 3/13 - Brigand count for fight	
              1162 ; 	
0:C:0D 30D:2D 1163 L30D    ldx   5         	
0:C:1B 31B:48 1164         tcy   1         	
0:C:36 336:21 1165         tma             ; A = 5/1	
0:C:2D 32D:2E 1166         ldx   3         	
0:C:1A 31A:43 1167         tcy   12        	
0:C:34 334:27 1168         tam             ; 3/12 = A	
0:C:29 329:2D 1169         ldx   5         	
0:C:12 312:44 1170         tcy   2         	
0:C:24 324:21 1171         tma             ; A = 5/2	
0:C:08 308:2E 1172         ldx   3         	
0:C:11 311:4B 1173         tcy   13        	
0:C:22 322:27 1174         tam             ; 3/13 = A	
0:C:04 304:0F 1175         retn            	
              1176 	
              1177 ;	
              1178 ; Continue setting up for Level 4	
              1179 ;	
0:C:09 309:2A 1180 S309    ldx   2         	
0:C:13 313:27 1181         tam             ; 2/3 = 15 - Give player all keys and ??? about the frontier	
0:C:26 326:2C 1182         ldx   1         	
0:C:0C 30C:25 1183         tamiyc          ; 1/3 = 15 - Give player all items (Sword, Scout, Healer, Beast)	
0:C:19 319:05 1184         iyc             	
0:C:32 332:05 1185         iyc             	
0:C:25 325:5F 1186         ynec  15        ; Have we done all players?	
0:C:0A 30A:89 1187         br    S309      ; Nope, go back and do the next player	
0:C:15 315:2D 1188         ldx   5         	
0:C:2A 32A:47 1189         tcy   14        	
0:C:14 314:64 1190         tcmiy 2         ; 5/14 = 2 - First key  - 2 = Gold	
0:C:28 328:68 1191         tcmiy 1         ; 5/15 = 1 - Second key - 1 = Silver	
0:C:10 310:1B 1192         ldp   13        	
0:C:20 320:AC 1193         br    L36C      ; Carry on with game setup	
              1194 	
              1195 	
              1196 ; *** Chapter 0 page 13	
              1197 	
              1198 ;	
              1199 ; Continue new game initialization	
              1200 ;	
0:D:00 340:2E 1201 L340    ldx   3         	
0:D:01 341:47 1202         tcy   14        	
0:D:03 343:27 1203         tam             ; Update Dark Tower brigand 10s digit from math	
0:D:07 347:2D 1204         ldx   5         	
0:D:0F 34F:44 1205         tcy   2         	
0:D:1F 35F:21 1206         tma             	
0:D:3F 37F:2E 1207         ldx   3         	
0:D:3E 37E:4F 1208         tcy   15        	
0:D:3D 37D:27 1209         tam             ; Update Dark Tower Brigand 1s digit from math	
0:D:3B 37B:11 1210         ldp   8         	
0:D:37 377:E3 1211         call  RND0TO2   	
0:D:2F 36F:2D 1212         ldx   5         	
0:D:1E 35E:47 1213         tcy   14        	
0:D:3C 37C:27 1214         tam             ; Set Dark Tower first key value	
0:D:39 379:11 1215 S379    ldp   8         	
0:D:33 373:E3 1216         call  RND0TO2   	
0:D:27 367:2D 1217         ldx   5         	
0:D:0E 34E:47 1218         tcy   14        	
0:D:1D 35D:00 1219         mnea            ; Make sure we didn't get the same key twice	
0:D:3A 37A:AB 1220         br    S36B      	
0:D:35 375:B9 1221         br    S379      ; We did; try again	
0:D:2B 36B:4F 1222 S36B    tcy   15        	
0:D:16 356:27 1223         tam             	
              1224 ;	
              1225 ; Game setup - Select number of players	
              1226 ;	
0:D:2C 36C:2F 1227 L36C    ldx   7         	
0:D:18 358:47 1228         tcy   14        	
0:D:30 370:63 1229         tcmiy 12        ; 7/14 = 12 ("P")	
0:D:21 361:68 1230         tcmiy 1         ; 7/15 = 1 ("1")	
0:D:02 342:1E 1231 S342    ldp   7         	
0:D:05 345:CB 1232         call  PROMPT      	
0:D:0B 34B:2F 1233         ldx   7         	
0:D:17 357:51 1234         ynec  8         ; Did they hit anything other than "No/End"?	
0:D:2E 36E:AD 1235         br    S36D      ; Yes, check to see if they hit "Yes/Buy"	
0:D:1C 35C:4F 1236         tcy   15        	
0:D:38 378:21 1237         tma             ; Get the current player count from the display (7/15)	
0:D:31 371:7D 1238         a12aac          ; Add 12 (overflow to 0 if it's 4)	
0:D:23 363:8D 1239         br    S34D      ; It overflowed...	
0:D:06 346:7C 1240         a4aac           ; It didn't overflow, add 4 to get it back to the original value	
0:D:0D 34D:70 1241 S34D    iac             ; Add one player	
0:D:1B 35B:27 1242         tam             ; Update display	
0:D:36 376:82 1243         br    S342      	
              1244 	
0:D:2D 36D:50 1245 S36D    ynec  0         ; Did they hit anything other than "Yes/Buy"?	
0:D:1A 35A:82 1246         br    S342      ; Yes.  Prompt again	
0:D:34 374:4F 1247         tcy   15        ; They hit "Yes/Buy"	
0:D:29 369:21 1248         tma             ; Pick up the player count from the display (7/15)	
0:D:12 352:2E 1249         ldx   3         	
0:D:24 364:49 1250         tcy   9         	
0:D:08 348:27 1251         tam             ; Save the player count in 3/9	
0:D:11 351:1C 1252         ldp   3         	
0:D:22 362:0B 1253         tpc             	
0:D:04 344:10 1254         ldp   0         	
0:D:09 349:CC 1255         call  PLYTHEM   ; Play the Dark Tower theme song	
0:D:13 353:18 1256         ldp   1         	
0:D:26 366:0B 1257         tpc             	
0:D:0C 34C:10 1258         ldp   0         	
0:D:19 359:97 1259         br    NEWTURN   	
              1260 ;	
              1261 ; Set the game up for Level 4 play	
              1262 ;	
0:D:32 372:2E 1263 L4INIT  ldx   3         	
0:D:25 365:47 1264         tcy   14        	
0:D:0A 34A:68 1265         tcmiy 1         ; 3/14 = 1 (Dark tower brigand count 10s digit)	
0:D:15 355:66 1266         tcmiy 6         ; 3/15 = 6 (Dark tower brigand count 1s digit)	
0:D:2A 36A:7F 1267         cla             	
0:D:14 354:77 1268         dan             	
0:D:28 368:4C 1269         tcy   3         	
0:D:10 350:13 1270         ldp   12        	
0:D:20 360:89 1271         br    S309      	
              1272 	
              1273 ; *** Chapter 0 page 14	
              1274 	
              1275 ;********************************************************************************	
              1276 ; Initialize player inventory information for new game (continued)	
              1277 ;********************************************************************************	
0:E:00 380:1F 1278 L380    ldp   15        	
0:E:01 381:5B 1279         ynec  13        ; On to next player; done with all 4 players?	
0:E:03 383:A5 1280         br    L3E5      ; No, fill in the next player	
              1281 	
0:E:07 387:2E 1282         ldx   3         	
0:E:0F 38F:40 1283         tcy   0         	
0:E:1F 39F:68 1284         tcmiy 1         ; 3/0 = 1	
0:E:3F 3BF:64 1285         tcmiy 2         ; 3/1 = 2	
0:E:3E 3BE:62 1286         tcmiy 4         ; 3/2 = 4	
0:E:3D 3BD:60 1287         tcmiy 0         ; 3/3 = 0 - Turn number 10s	
0:E:3B 3BB:60 1288         tcmiy 0         ; 3/4 = 0 - Turn number 1s	
0:E:37 3B7:60 1289         tcmiy 0         ; 3/5 = 0 - Dragon treasure Warriors 10s	
0:E:2F 3AF:64 1290         tcmiy 2         ; 3/6 = 2 - Dragon treasure Warriors 1s	
0:E:1E 39E:60 1291         tcmiy 0         ; 3/7 = 0 - Dragon treasure Gold 10s	
0:E:3C 3BC:66 1292         tcmiy 6         ; 3/8 = 6 - Dragon treasure Gold 1s	
0:E:39 3B9:4D 1293         tcy   11        	
0:E:33 3B3:60 1294         tcmiy 0         ; 3/11 = 0 - Current player	
              1295 ;	
              1296 ; Handle level selection	
              1297 ;	
0:E:27 3A7:2F 1298         ldx   7         	
0:E:0E 38E:47 1299         tcy   14        ; Reference display 10s digit (7/14)	
0:E:1D 39D:6B 1300         tcmiy 13        ; 7/14 = 13 ("L")	
0:E:3A 3BA:68 1301         tcmiy 1         ; 7/15 = 1 ("1")	
0:E:35 3B5:1E 1302 S3B5    ldp   7         	
0:E:2B 3AB:CB 1303         call  PROMPT    ; Display flashing "L1" and wait for keypress	
0:E:16 396:2F 1304         ldx   7         	
0:E:2C 3AC:51 1305         ynec  8         ; Did user hit "No"?	
0:E:18 398:B8 1306         br    S3B8      ; Nope, they hit something else.  This is the level they want to play	
0:E:30 3B0:4F 1307         tcy   15        	
0:E:21 3A1:21 1308         tma             ; Pick up the currently selected level	
0:E:02 382:7D 1309         a12aac          ; Add 12 to see if there's an overflow	
0:E:05 385:97 1310         br    S397      ; There was, ACC is now 0	
0:E:0B 38B:7C 1311         a4aac           ; Nope, add four more effectively doing a MOD 4	
0:E:17 397:70 1312 S397    iac             ; Increment ACC to select next level	
0:E:2E 3AE:27 1313         tam             ; Update 1s digit on display	
0:E:1C 39C:B5 1314         br    S3B5      	
0:E:38 3B8:50 1315 S3B8    ynec  0         ; Did the user hit "Yes"?	
0:E:31 3B1:B5 1316         br    S3B5      ; Nope, go prompt again at the same level	
0:E:23 3A3:4F 1317         tcy   15        ; Pick up the level selected	
0:E:06 386:21 1318         tma             ; and store it in the Accumulator	
0:E:0D 38D:1B 1319         ldp   13        	
0:E:1B 39B:7D 1320         a12aac          ; Add 12 to accumulator (See if it's level 4)	
0:E:36 3B6:B2 1321         br    L4INIT    ; Handle Level 4 separately (special conditions--see manual page 39)	
0:E:2D 3AD:12 1322         ldp   4         	
0:E:1A 39A:F0 1323         call  L130      ; Load 17 + a random number into 5/1 and 5/2 - Base Brigand count for Levels 1 and 4	
0:E:34 3B4:2F 1324         ldx   7         	
0:E:29 3A9:4F 1325         tcy   15        	
0:E:12 392:21 1326         tma             ; Pick up the level selected	
0:E:24 3A4:1D 1327         ldp   11        	
0:E:08 388:73 1328         a13aac          ; n = Level + 13 - Is this level 3 or 4? (n = 16 or 17)	
0:E:11 391:A5 1329         br    L2E5      ; If there was a carry, branch and deal with it	
0:E:22 3A2:17 1330         ldp   14        ; Level < 3	
0:E:04 384:70 1331         iac             ; n = n + 1 - Generate a carry if it's level 2	
0:E:09 389:A6 1332         br    L2BINIT   ; On carry, branch and deal with level 2; otherwise, set status=1	
0:E:13 393:AA 1333         br    BRGDONE   ; There wasn't a carry.  We're done calculating Brigands	
0:E:26 3A6:2E 1334 L2BINIT ldx   3         	
0:E:0C 38C:48 1335         tcy   1         	
0:E:19 399:12 1336         ldp   4         	
0:E:32 3B2:38 1337         tbit1 0         	
0:E:25 3A5:D5 1338         call  ADD16     ; Add 16 to 5/1-5/2 if bit 0 of 3/1 is set	
0:E:0A 38A:12 1339         ldp   4         	
0:E:15 395:D5 1340         call  ADD16     ; Add 16 more to 5/1-5/2	
0:E:2A 3AA:2D 1341 BRGDONE ldx   5         	
0:E:14 394:48 1342         tcy   1         	
0:E:28 3A8:21 1343         tma             	
0:E:10 390:1B 1344         ldp   13        	
0:E:20 3A0:80 1345         br    L340      	
              1346 	
              1347 ; *** Chapter 0 page 15	
              1348 	
              1349 ;********************************************************************************	
              1350 ; INIT - Called on power-up	
              1351 ;********************************************************************************	
0:F:00 3C0:40 1352 INIT    tcy   0         	
0:F:01 3C1:28 1353 S3C1    ldx   0         	
0:F:03 3C3:08 1354         tka             	
0:F:07 3C7:02 1355         ynea            	
0:F:0F 3CF:0A 1356         tdo             	
0:F:1F 3DF:20 1357         tay             	
0:F:3F 3FF:0D 1358         setr            	
0:F:3E 3FE:0C 1359         rstr            	
0:F:3D 3FD:0E 1360         knez            	
0:F:3B 3FB:81 1361         br    S3C1      	
0:F:37 3F7:2F 1362         ldx   7         	
0:F:2F 3EF:47 1363         tcy   14        ; Reference display 10s digit	
0:F:1E 3DE:67 1364         tcmiy 14        ; 7/14 = 14 ("-")	
0:F:3C 3FC:67 1365         tcmiy 14        ; 7/15 = 14 ("-")	
0:F:39 3F9:1E 1366         ldp   7         	
0:F:33 3F3:CB 1367         call  PROMPT    ; Display flashing "--" and wait for keypress	
0:F:27 3E7:18 1368         ldp   1         	
0:F:0E 3CE:C0 1369         call  L040      	
              1370 	
0:F:1D 3DD:28 1371         ldx   0         	
0:F:3A 3FA:40 1372         tcy   0         	
0:F:35 3F5:61 1373         tcmiy 8         ; 0/0 = 8 - Last display position 8=unknown?	
0:F:2B 3EB:2C 1374         ldx   1         	
0:F:16 3D6:40 1375         tcy   0         	
0:F:2C 3EC:6F 1376         tcmiy 15        ; 1/0 = 15	
0:F:18 3D8:2A 1377         ldx   2         	
0:F:30 3F0:40 1378         tcy   0         	
0:F:21 3E1:6F 1379         tcmiy 15        ; 2/0 = 15	
0:F:02 3C2:40 1380         tcy   0         	
0:F:05 3C5:11 1381         ldp   8         	
0:F:0B 3CB:D5 1382         call  ROTDRUM   ; Cycle display to position 0 - on return, 0/0=0; 1/0=4; 2/0=12	
0:F:17 3D7:2F 1383         ldx   7         	
0:F:2E 3EE:47 1384         tcy   14        ; Reference display 10s digit	
0:F:1C 3DC:61 1385         tcmiy 8         ; 7/14 = 8 ("8")	
0:F:38 3F8:61 1386         tcmiy 8         ; 7/15 = 8 ("8")	
0:F:31 3F1:19 1387         ldp   9         	
0:F:23 3E3:C1 1388         call  L241      ; Display 88, light top display light and beep	
0:F:06 3C6:19 1389         ldp   9         	
0:F:0D 3CD:DF 1390         call  L25F      ; Light middle display light and beep	
0:F:1B 3DB:19 1391         ldp   9         	
0:F:36 3F6:FB 1392         call  L27B      ; Light lower display light and beep	
              1393 ;********************************************************************************	
              1394 ; Initialize player inventory information for new game	
              1395 ;	
              1396 ; 30 Gold, 25 Food and 10 Warriors	
              1397 ;********************************************************************************	
0:F:2D 3ED:28 1398 L3ED    ldx   0         	
0:F:1A 3DA:48 1399         tcy   1         ; X = 0, Y = 1 - Player 1 Gold and ???	
0:F:34 3F4:6C 1400 S3F4    tcmiy 3         ; Set Gold 10s to 3	
0:F:29 3E9:60 1401         tcmiy 0         ; Set Gold 1s to 0	
0:F:12 3D2:64 1402         tcmiy 2         ; Set ??? to 2	
0:F:24 3E4:5B 1403         ynec  13        ; On to next player; done with all 4 players?	
0:F:08 3C8:B4 1404         br    S3F4      ; No, fill in the next player	
              1405 	
0:F:11 3D1:2C 1406         ldx   1         ; X = 1, Y = 1 - Player 1 Food and inventory pt 1	
0:F:22 3E2:48 1407         tcy   1         	
0:F:04 3C4:64 1408 S3C4    tcmiy 2         ; Set Food 10s to 2	
0:F:09 3C9:6A 1409         tcmiy 5         ; Set Food 1s to 5	
0:F:13 3D3:60 1410         tcmiy 0         ; Set Inventory pt 1 to 0 (No Scout - 1000, Sword - 0100, Healer - 0010, Beast - 0001)	
0:F:26 3E6:5B 1411         ynec  13        ; On to next player; done with all 4 players?	
0:F:0C 3CC:84 1412         br    S3C4      ; No, fill in the next player	
              1413 	
0:F:19 3D9:2A 1414         ldx   2         ; X = 2, Y = 1 - Player 1 Warriors and inventory pt 2	
0:F:32 3F2:48 1415         tcy   1         	
0:F:25 3E5:68 1416 L3E5    tcmiy 1         ; Set Warriors 10s to 1	
0:F:0A 3CA:60 1417         tcmiy 0         ; Set Warriors 1s to 0	
0:F:15 3D5:60 1418         tcmiy 0         ; Set Inventory pt 2 to 0 (No Gold key - 1000, No Silver key - 0100, No Brass key - 0010, ??? - 0001)	
0:F:2A 3EA:17 1419         ldp   14        	
0:F:14 3D4:80 1420         br    L380      ; Ran out of ROM in this page...	
0:F:28 3E8:25 1421 S3E8    tamiyc          	
0:F:10 3D0:23 1422         tya             	
0:F:20 3E0:A8 1423         br    S3E8      	
              1424 	
              1425 ; *** Chapter 1 page 0	
              1426 	
              1427 ;	
              1428 ; Main gameplay loop?	
              1429 ;	
1:0:00 400:1C 1430 L400    ldp   3         	
1:0:01 401:0B 1431         tpc             	
1:0:03 403:1B 1432         ldp   13        	
1:0:07 407:C9 1433         call  PLYBEEP   	
              1434 	
              1435 ;********************************************************************************	
              1436 ; ENDTURN - Prompt for player EOT	
              1437 ;********************************************************************************	
1:0:0F 40F:2E 1438 ENDTURN ldx   3         	
1:0:1F 41F:4D 1439         tcy   11        	
1:0:3F 43F:21 1440         tma             ; Pick up current player	
1:0:3E 43E:2F 1441         ldx   7         	
1:0:3D 43D:47 1442         tcy   14        	
1:0:3B 43B:67 1443         tcmiy 14        ; 7/14 = 14 ("-")	
1:0:37 437:27 1444         tam             ; 7/15 = Current Player	
1:0:2F 42F:10 1445         ldp   0         	
1:0:1E 41E:0B 1446         tpc             	
1:0:3C 43C:1E 1447         ldp   7         	
1:0:39 439:CB 1448         call  PROMPT    ; Update display from 7/14-15 and wait for keypress	
1:0:33 433:52 1449         ynec  4         ; Did they hit Repeat (4)?	
1:0:27 427:B5 1450         br    S435      ; Nope...	
              1451 ;	
              1452 ; Player hit Repeat	
              1453 ;	
1:0:0E 40E:13 1454         ldp   12        	
1:0:1D 41D:C9 1455         call  CALLDSP   ; Display results from last turn again	
1:0:3A 43A:8F 1456         br    ENDTURN   	
              1457 	
1:0:35 435:59 1458 S435    ynec  9         ; Did they hit Clear (9)?	
1:0:2B 42B:98 1459         br    S418      ; Nope...	
              1460 ;	
              1461 ; Player hit Clear	
              1462 ;	
1:0:16 416:18 1463         ldp   1         	
1:0:2C 42C:98 1464         br    DOCLEAR   	
              1465 	
1:0:18 418:51 1466 S418    ynec  8         ; Did they hit No/END	
1:0:30 430:8F 1467         br    ENDTURN   ; Nope, go back and prompt again	
1:0:21 421:1C 1468         ldp   3         	
1:0:02 402:0B 1469         tpc             	
1:0:05 405:1C 1470         ldp   3         	
1:0:0B 40B:D5 1471         call  PLAYEOT      	
              1472 ;	
              1473 ; Begin next player's turn	
              1474 ;	
1:0:17 417:29 1475 NEWTURN ldx   4         	
1:0:2E 42E:43 1476         tcy   12        	
1:0:1C 41C:34 1477         rbit  0         ; 4/12 Bit 0 = 0	
1:0:38 438:10 1478         ldp   0         	
1:0:31 431:0B 1479         tpc             	
1:0:23 423:11 1480         ldp   8         	
1:0:06 406:C0 1481         call  L200      ; Advance the next player's data into the active slot	
1:0:0D 40D:7B 1482         a14aac          	
1:0:1B 41B:A6 1483         br    S426      	
1:0:36 436:17 1484         ldp   14        	
1:0:2D 42D:DB 1485         call  CPYTRNC   ; Get the turn counter into 5/1-2	
1:0:1A 41A:29 1486         ldx   4         	
1:0:34 434:48 1487         tcy   1         	
1:0:29 429:60 1488         tcmiy 0         	
1:0:12 412:68 1489         tcmiy 1         	
1:0:24 424:13 1490         ldp   12        	
1:0:08 408:F4 1491         call  ADDB10    ; Add 1 to what was in 3/3-4	
1:0:11 411:17 1492         ldp   14        	
1:0:22 422:3F 1493         mnez            ; Is 5/0 non-zero (2-digit overflow?)	
1:0:04 404:F1 1494         call  LOAD99    ; 5/1 = 9; 5/2 = 9	
1:0:09 409:17 1495         ldp   14        	
1:0:13 413:DB 1496         call  CPYTRNC   ; Save the results of the math back to the turn counter at 3/3-4	
              1497 ;	
              1498 ; Update display with current player	
              1499 ;	
1:0:26 426:2E 1500 S426    ldx   3         	
1:0:0C 40C:4D 1501         tcy   11        	
1:0:19 419:21 1502         tma             ; Pick up current player from 3/11	
1:0:32 432:2F 1503         ldx   7         	
1:0:25 425:47 1504         tcy   14        	
1:0:0A 40A:6F 1505         tcmiy 15        ; 7/14 = 15 (" ")	
1:0:15 415:18 1506         ldp   1         	
1:0:2A 42A:80 1507         br    L440      	
              1508 	
1:0:14 414:29 1509 L414    ldx   4         	
1:0:28 428:43 1510         tcy   12        	
1:0:10 410:30 1511         sbit  0         ; 4/12 Bit 0 = 1.  Player was lost but had a Scout.	
1:0:20 420:A6 1512         br    S426      	
              1513 	
              1514 	
              1515 ; *** Chapter 1 page 1	
              1516 	
1:1:00 440:27 1517 L440    tam             	
              1518 ;	
              1519 ; Get player move	
              1520 ;	
1:1:01 441:10 1521 S441    ldp   0         	
1:1:03 443:0B 1522         tpc             	
1:1:07 447:1E 1523         ldp   7         	
1:1:0F 44F:CB 1524         call  PROMPT      	
              1525 ;	
              1526 ; Process input	
              1527 ;	
              1528 ; First, handle non-move buttons.  Either invalid keys or Clear	
              1529 ;	
1:1:1F 45F:50 1530         ynec  0         ; Did they hit Yes/Buy?	
1:1:3F 47F:BD 1531         br    S47D      ; Nope	
1:1:3E 47E:81 1532         br    S441      ; Yes - Error; prompt again	
              1533 	
1:1:3D 47D:51 1534 S47D    ynec  8         ; Did they hit No/End?	
1:1:3B 47B:AF 1535         br    S46F      ; Nope	
1:1:37 477:81 1536         br    S441      ; Yes - Error; prompt again	
              1537 	
1:1:2F 46F:52 1538 S46F    ynec  4         ; Did they hit Repeat?	
1:1:1E 45E:B9 1539         br    S479      ; Nope	
1:1:3C 47C:81 1540         br    S441      ; Yes - Error; prompt again	
              1541 	
1:1:39 479:58 1542 S479    ynec  1         ; Did they hit Haggle?	
1:1:33 473:8E 1543         br    S44E      ; Nope	
1:1:27 467:81 1544         br    S441      ; Yes - Error; prompt again	
              1545 	
1:1:0E 44E:59 1546 S44E    ynec  9         ; Did they hit Clear?	
1:1:1D 45D:84 1547         br    DOBUTTN   ; Nope.  Process the button pressed	
              1548 ;	
              1549 ; Player hit Clear.  Deal with it	
              1550 ;	
1:1:3A 47A:29 1551         ldx   4         	
1:1:35 475:43 1552         tcy   12        	
1:1:2B 46B:38 1553         tbit1 0         ; Check to see if this is still the beginning of their turn	
1:1:16 456:98 1554         br    DOCLEAR   ; Nope	
1:1:2C 46C:81 1555         br    S441      ; Yeah, beginning of turn--Clear does nothing	
              1556 ;	
              1557 ; Handle player hitting Clear to clear up an illegal move	
              1558 ;	
              1559 ; Restore the saved copy of the player's inventory and status from 0/13-15, 1/13-15 and 2/13-15	
              1560 ; and start the next player's turn.	
              1561 ;	
1:1:18 458:28 1562 DOCLEAR ldx   0         	
1:1:30 470:C6 1563         call  S446      	
1:1:21 461:2C 1564         ldx   1         	
1:1:02 442:C6 1565         call  S446      	
1:1:05 445:2A 1566         ldx   2         	
1:1:0B 44B:C6 1567         call  S446      	
1:1:17 457:1C 1568         ldp   3         	
1:1:2E 46E:0B 1569         tpc             	
1:1:1C 45C:17 1570         ldp   14        	
1:1:38 478:E9 1571         call  PLYCLR    	
1:1:31 471:10 1572         ldp   0         	
1:1:23 463:97 1573         br    NEWTURN   	
              1574 ;	
              1575 ; Restore saved player information to recover from illegal move	
              1576 ;	
1:1:06 446:4B 1577 S446    tcy   13        	
1:1:0D 44D:21 1578         tma             	
1:1:1B 45B:48 1579         tcy   1         	
1:1:36 476:27 1580         tam             	
1:1:2D 46D:47 1581         tcy   14        	
1:1:1A 45A:21 1582         tma             	
1:1:34 474:44 1583         tcy   2         	
1:1:29 469:27 1584         tam             	
1:1:12 452:4F 1585         tcy   15        	
1:1:24 464:21 1586         tma             	
1:1:08 448:4C 1587         tcy   3         	
1:1:11 451:27 1588         tam             	
1:1:22 462:0F 1589         retn            	
              1590 ;	
              1591 ; Player has hit a button to make a move of some sort	
              1592 ; First, initialize the encounter results 4/13-15 to "No changes"	
              1593 ; (all flags set)	
              1594 ;	
1:1:04 444:29 1595 DOBUTTN ldx   4         	
1:1:09 449:4B 1596         tcy   13        	
1:1:13 453:6F 1597         tcmiy 15        ; 4/13 = 0b1111 - Beast/Gold/Food/Warriors unchanged	
1:1:26 466:6F 1598         tcmiy 15        ; 4/14 = 0b1111 - Silver key/Brass key/Healer/Scout not found this round	
1:1:0C 44C:6F 1599         tcmiy 15        ; 4/15 = 0b1111 - ???/Pegasus/Sword/Gold key not found this round	
1:1:19 459:28 1600         ldx   0         	
1:1:32 472:4C 1601         tcy   3         	
1:1:25 465:14 1602         ldp   2         	
1:1:0A 44A:3A 1603         tbit1 1         ; Player status flag at 0/3 - bit 1 - Cursed when clear	
1:1:15 455:B7 1604         br    L4B7      	
              1605 ;	
              1606 ; Player was cursed (0/3 bit 1 is clear).  Provide status update to player.	
              1607 ;	
1:1:2A 46A:29 1608         ldx   4         	
1:1:14 454:4B 1609         tcy   13        	
1:1:28 468:65 1610         tcmiy 10        ; 4/13 = 0b1010 - Gold and Warriors have changed	
1:1:10 450:19 1611         ldp   9         	
1:1:20 460:AA 1612         br    L66A      ; Player was cursed - rotate drum to Cursed/Lost/Plague then branch back to L480	
              1613 	
              1614 	
              1615 ; *** Chapter 1 page 2	
              1616 	
              1617 ;	
              1618 ; Display Cursed!	
              1619 ;	
1:2:00 480:4E 1620 L480    tcy   7         ; Select upper lamp	
1:2:01 481:0D 1621         setr            ; Turn it on	
1:2:03 483:1C 1622         ldp   3         	
1:2:07 487:0B 1623         tpc             	
1:2:0F 48F:10 1624         ldp   0         	
1:2:1F 49F:D3 1625         call  LC13      ; Play the "lose round of battle" sound	
1:2:3F 4BF:4E 1626         tcy   7         ; Select upper lamp	
1:2:3E 4BE:0C 1627         rstr            ; Turn it off	
1:2:3D 4BD:13 1628         ldp   12        	
1:2:3B 4BB:C9 1629         call  CALLDSP   ; Display results	
              1630 ;	
              1631 ; Determine how much food the warriors consumed this turn	
              1632 ;	
              1633 ; 15 Warriors or less consume 1 food per turn	
              1634 ; 16-30 Warriors consume 2 per turn	
              1635 ; 31-45 Warriors consume 3 per turn, etc.	
              1636 ;	
1:2:37 4B7:16 1637 L4B7    ldp   6         	
1:2:2F 4AF:F2 1638         call  CPY2TO5   ; Copy current player Warrior count to 5/1-2	
1:2:1E 49E:29 1639         ldx   4         	
1:2:3C 4BC:48 1640         tcy   1         	
1:2:39 4B9:68 1641         tcmiy 1         ; 4/1 = 1	
1:2:33 4B3:66 1642         tcmiy 6         ; 4/2 = 6 - Start by subtracting 15	
1:2:27 4A7:64 1643         tcmiy 2         ; 4/3 = 2 - contains the amount of food consumed	
              1644 ;	
              1645 ; Loop through, repeatedly subtracting until there's a borrow.  Basically, divide by 15 (kind of, as the first iteration was 16)	
              1646 ; to determine how much food was consumed.	
              1647 ;	
1:2:0E 48E:13 1648 S48E    ldp   12        	
1:2:1D 49D:C8 1649         call  SUBB10    ; Subtract value in row 4 from Warrior count - first time 16; afterward 15	
1:2:3A 4BA:3F 1650         mnez            ; Was there a borrow in the subtraction routine?  (5/0 will be 9)	
1:2:35 4B5:8B 1651         br    S48B      ; Yes.  We're done	
              1652 ;	
              1653 ; No borrow, add one food to counter and set up to subtract 15 more warriors	
              1654 ;	
1:2:2B 4AB:29 1655         ldx   4         	
1:2:16 496:4C 1656         tcy   3         	
1:2:2C 4AC:3E 1657         imac            	
1:2:18 498:27 1658         tam             ; Increment 4/3 - We had no borrow so add another food consumed this round	
1:2:30 4B0:29 1659         ldx   4         	
1:2:21 4A1:44 1660         tcy   2         	
1:2:02 482:6A 1661         tcmiy 5         ; 4/2 = 5 - Subtract 15 on the second and subsequent iterations	
1:2:05 485:8E 1662         br    S48E      ; Subtract again	
              1663 ;	
              1664 ; There was a borrow; we're done with the subtract loop (aka division).  4/3 has how much food was consumed + 1	
              1665 ;	
1:2:0B 48B:2C 1666 S48B    ldx   1         	
1:2:17 497:4C 1667         tcy   3         	
1:2:2E 4AE:38 1668         tbit1 0         ; Beast in player inventory?	
1:2:1C 49C:29 1669         ldx   4         	
1:2:38 4B8:07 1670         dman            ; Pick up 4/3 and subtract 1	
1:2:31 4B1:27 1671         tam             ; Save corrected food consumed	
              1672 ;	
              1673 ; Set up to subtract food consumed from player's food inventory	
              1674 ;	
1:2:23 4A3:29 1675         ldx   4         	
1:2:06 486:21 1676         tma             ; Pick up food consumed (again?)	
1:2:0D 48D:48 1677         tcy   1         	
1:2:1B 49B:60 1678         tcmiy 0         ; 4/1 = 0	
1:2:36 4B6:27 1679         tam             ; Store food consumed in 4/2	
1:2:2D 4AD:13 1680         ldp   12        	
1:2:1A 49A:EC 1681         call  CPY1TO5   ; Copy current player Food count to 5/1-2	
1:2:34 4B4:13 1682         ldp   12        	
1:2:29 4A9:C8 1683         call  SUBB10    ; Subtract food consumed from food count	
1:2:12 492:3F 1684         mnez            ; Was there a borrow during subtraction?	
1:2:24 4A4:D4 1685         call  S494      ; Yep.  We're at negative food, set it back to 00	
1:2:08 488:15 1686         ldp   10        	
1:2:11 491:E4 1687         call  CPY5TO1   ; Update player food inventory from math results in 5/1-2	
              1688 ;	
              1689 ; Now, deal with soldiers dying from starvation if applicable	
              1690 ;	
1:2:22 4A2:2D 1691         ldx   5         	
1:2:04 484:40 1692         tcy   0         	
1:2:09 489:1C 1693         ldp   3         	
1:2:13 493:3F 1694         mnez            ; Check 5/0 for borrow	
1:2:26 4A6:80 1695         br    L4C0      ; Yep.  Warriors died; play the death march and update counts	
              1696 ;	
              1697 ; Nobody died...	
              1698 ;	
1:2:0C 48C:29 1699         ldx   4         	
1:2:19 499:4C 1700         tcy   3         	
1:2:32 4B2:21 1701         tma             ; Pick up how much food was consumed from 4/3	
1:2:25 4A5:48 1702         tcy   1         ; Prep for doing the math	
1:2:0A 48A:60 1703         tcmiy 0         ; 4/1 = 0	
1:2:15 495:24 1704         tamdyn          ; 4/2 = consumed food	
1:2:2A 4AA:AF 1705         br    L4EF      ; Check to see if the low food warning should be played	
              1706 	
1:2:14 494:48 1707 S494    tcy   1         	
1:2:28 4A8:60 1708         tcmiy 0         	
1:2:10 490:60 1709         tcmiy 0         	
1:2:20 4A0:0F 1710         retn            	
              1711 	
              1712 	
              1713 ; *** Chapter 1 page 3	
              1714 	
              1715 ;	
              1716 ; Handle warrior starvation	
              1717 ;	
1:3:00 4C0:29 1718 L4C0    ldx   4         	
1:3:01 4C1:48 1719         tcy   1         	
1:3:03 4C3:60 1720         tcmiy 0         ; 4/1 = 0	
1:3:07 4C7:68 1721         tcmiy 1         ; 4/2 = 1	
1:3:0F 4CF:1A 1722         ldp   5         	
1:3:1F 4DF:C0 1723         call  SUBWARR   	
1:3:3F 4FF:1C 1724         ldp   3         	
1:3:3E 4FE:0B 1725         tpc             	
1:3:3D 4FD:1D 1726         ldp   11        	
1:3:3B 4FB:C5 1727         call  PLYDETH   	
1:3:37 4F7:B8 1728         br    S4F8      	
              1729 ;	
              1730 ; Determine if the Low Food warning should be played by multiplying the consumed food by 4	
              1731 ; and subtracting it from the player's current inventory	
              1732 ;	
1:3:2F 4EF:2D 1733 L4EF    ldx   5         	
1:3:1E 4DE:60 1734         tcmiy 0         ; 5/1 = 0	
1:3:3C 4FC:27 1735         tam             ; 5/2 = consumed food	
1:3:39 4F9:13 1736         ldp   12        	
1:3:33 4F3:F4 1737         call  ADDB10    ; Double consumed food	
1:3:27 4E7:13 1738         ldp   12        	
1:3:0E 4CE:E7 1739         call  CPY5TO4   ; Copy total to 4/1-2	
1:3:1D 4DD:13 1740         ldp   12        	
1:3:3A 4FA:F4 1741         call  ADDB10    ; Double it again	
1:3:35 4F5:13 1742         ldp   12        	
1:3:2B 4EB:E7 1743         call  CPY5TO4   ; Copy it	
1:3:16 4D6:13 1744         ldp   12        	
1:3:2C 4EC:EC 1745         call  CPY1TO5   ; Pick up player food	
1:3:18 4D8:13 1746         ldp   12        	
1:3:30 4F0:C8 1747         call  SUBB10    ; Subtract food from total player food	
1:3:21 4E1:3F 1748         mnez            ; Check for borrow	
1:3:02 4C2:8B 1749         br    S4CB      ; Yep, play the low food warning	
1:3:05 4C5:B8 1750         br    S4F8      ; Nope carry on	
              1751 ;	
              1752 ; Play the low food warning	
              1753 ;	
1:3:0B 4CB:1C 1754 S4CB    ldp   3         	
1:3:17 4D7:0B 1755         tpc             	
1:3:2E 4EE:17 1756         ldp   14        	
1:3:1C 4DC:C3 1757         call  PLWFOOD   	
              1758 ;	
              1759 ; Save current player information into save buffer	
              1760 ;	
1:3:38 4F8:28 1761 S4F8    ldx   0         	
1:3:31 4F1:D3 1762         call  S4D3      	
1:3:23 4E3:2C 1763         ldx   1         	
1:3:06 4C6:D3 1764         call  S4D3      	
1:3:0D 4CD:2A 1765         ldx   2         	
1:3:1B 4DB:D3 1766         call  S4D3      	
              1767 ;	
              1768 ; Check to see if player was cursed.  If so, clear the curse and end their turn.	
              1769 ;	
1:3:36 4F6:28 1770         ldx   0         	
1:3:2D 4ED:4C 1771         tcy   3         	
1:3:1A 4DA:3A 1772         tbit1 1         ; Was player cursed (0/3 bit 1 clear)?	
1:3:34 4F4:88 1773         br    S4C8      ; Nope - bit 1 was set	
1:3:29 4E9:32 1774         sbit  1         ; Clear the curse and end their turn	
1:3:12 4D2:10 1775         ldp   0         	
1:3:24 4E4:8F 1776         br    ENDTURN   	
              1777 	
1:3:08 4C8:2B 1778 S4C8    ldx   6         	
1:3:11 4D1:4F 1779         tcy   15        	
1:3:22 4E2:22 1780         tmy             ; See what key was pressed	
1:3:04 4C4:12 1781         ldp   4         	
1:3:09 4C9:80 1782         br    L500      	
              1783 ;	
              1784 ; Copy current player information into save buffer	
              1785 ;	
1:3:13 4D3:48 1786 S4D3    tcy   1         ; Copy X/1 to X/13	
1:3:26 4E6:21 1787         tma             	
1:3:0C 4CC:4B 1788         tcy   13        	
1:3:19 4D9:27 1789         tam             	
1:3:32 4F2:44 1790         tcy   2         ; Copy X/2 to X/14	
1:3:25 4E5:21 1791         tma             	
1:3:0A 4CA:47 1792         tcy   14        	
1:3:15 4D5:27 1793         tam             	
1:3:2A 4EA:4C 1794         tcy   3         ; Copy X/3 to X/15	
1:3:14 4D4:21 1795         tma             	
1:3:28 4E8:4F 1796         tcy   15        	
1:3:10 4D0:27 1797         tam             	
1:3:20 4E0:0F 1798         retn            	
              1799 	
              1800 	
              1801 ; *** Chapter 1 page 4	
              1802 	
              1803 ;	
              1804 ; Handle Move being pressed	
              1805 ;	
1:4:00 500:56 1806 L500    ynec  6         	
1:4:01 501:8F 1807         br    S50F      	
1:4:03 503:1E 1808         ldp   7         	
1:4:07 507:80 1809         br    DOMOVE    	
              1810 ;	
              1811 ; Handle Sanctuary/Citadel being pressed	
              1812 ;	
1:4:0F 50F:55 1813 S50F    ynec  10        	
1:4:1F 51F:BD 1814         br    S53D      	
1:4:3F 53F:13 1815         ldp   12        	
1:4:3E 53E:99 1816         br    DOSANCT   	
              1817 ;	
              1818 ; Handle Frontier being pressed	
              1819 ;	
1:4:3D 53D:5E 1820 S53D    ynec  7         ; Did they hit the Frontier button?	
1:4:3B 53B:A3 1821         br    S523      	
1:4:37 537:1C 1822         ldp   3         	
1:4:2F 52F:0B 1823         tpc             	
1:4:1E 51E:11 1824         ldp   8         	
1:4:3C 53C:EE 1825         call  PLYFRNT   	
              1826 ;	
              1827 ; Handle determining whether they've found the key in this region or not	
              1828 ;	
              1829 ; There's no real magic to the Frontier thing.  The entirety of it is the "KeyNotFound" flag at 2/3 bit 0.  If	
              1830 ; it's set to 1, the key hasn't been found yet and you can still be awarded a key.  If it's set to 0, the key	
              1831 ; has been found and you won't be awarded a key as loot.  The Frontier button simply checks this flag; if it's	
              1832 ; set, you get a Key Missing.  If it's cleared, it gets set.	
              1833 ;	
1:4:39 539:2A 1834         ldx   2         	
1:4:33 533:4C 1835         tcy   3         	
1:4:27 527:38 1836         tbit1 0         ; If bit 0 is set the key hasn't been found yet	
1:4:0E 50E:AB 1837         br    S52B      ; It was set - Key missing	
1:4:1D 51D:30 1838         sbit  0         ; Reset Key not found (move us to a new region)	
1:4:3A 53A:10 1839 S53A    ldp   0         	
1:4:35 535:8F 1840         br    ENDTURN   ; End the turn	
1:4:2B 52B:3E 1841 S52B    imac            ; Increment key flags and load into accumulator	
1:4:16 516:BA 1842         br    S53A      ; Overflow - They have all of the keys already; they can go to any territory	
              1843 ;	
              1844 ; Handle showing Key Missing	
              1845 ;	
1:4:2C 52C:4A 1846 KEYMISS tcy   5         ; Wizard/Bazaar Closed/Key Missing	
1:4:18 518:15 1847         ldp   10        	
1:4:30 530:D4 1848         call  ROTDRM2   	
1:4:21 521:4A 1849         tcy   5         ; Select lower map	
1:4:02 502:0D 1850         setr            ; Turn it on	
1:4:05 505:1C 1851 L505    ldp   3         	
1:4:0B 50B:0B 1852         tpc             	
1:4:17 517:1D 1853         ldp   11        	
1:4:2E 52E:C0 1854         call  PLYFAIL   	
1:4:1C 51C:4A 1855         tcy   5         ; Select lower lamp	
1:4:38 538:0C 1856         rstr            ; Turn it off	
1:4:31 531:BA 1857         br    S53A      ; End their turn	
              1858 ;	
              1859 ; Handle Inventory being pressed	
              1860 ;	
1:4:23 523:5D 1861 S523    ynec  11        ; Did they hit Inventory?	
1:4:06 506:A9 1862         br    S529      ; Nope	
1:4:0D 50D:29 1863         ldx   4         	
1:4:1B 51B:4B 1864         tcy   13        	
1:4:36 536:60 1865         tcmiy 0         ; No changes for this round (4/13-14 = 0)	
1:4:2D 52D:60 1866         tcmiy 0	
1:4:1A 51A:13 1867         ldp   12        	
1:4:34 534:8D 1868         br    L70D      ; Put a 12 in 4/15 then run through the inventory	
              1869 ;	
              1870 ; Player is doing an activity that resets the "Citadel visited" flag; reset it	
              1871 ;	
1:4:29 529:23 1872 S529    tya             	
1:4:12 512:28 1873         ldx   0         	
1:4:24 524:4C 1874         tcy   3         	
1:4:08 508:34 1875         rbit  0         ; Reset 0/3 Bit 0 "Citadel visited" flag	
1:4:11 511:20 1876         tay             	
              1877 ;	
              1878 ; Handle Tomb/Ruin being pressed	
              1879 ;	
1:4:22 522:54 1880         ynec  2         ; Did they hit Tomb/Ruin?	
1:4:04 504:99 1881         br    S519      ; Nope	
1:4:09 509:14 1882         ldp   2         	
1:4:13 513:0B 1883         tpc             	
1:4:26 526:1C 1884         ldp   3         	
1:4:0C 50C:99 1885         br    L8D9      	
              1886 ;	
              1887 ; Handle Bazaar being pressed	
              1888 ;	
1:4:19 519:5A 1889 S519    ynec  5         ; Did they hit Bazaar?	
1:4:32 532:94 1890         br    S514      ; Nope	
1:4:25 525:14 1891         ldp   2         	
1:4:0A 50A:0B 1892         tpc             	
1:4:15 515:15 1893         ldp   10        	
1:4:2A 52A:98 1894         br    LA98      	
              1895 ;	
              1896 ; All that's left is Dark Tower, handle it	
              1897 ;	
1:4:14 514:14 1898 S514    ldp   2         	
1:4:28 528:0B 1899         tpc             	
1:4:10 510:15 1900         ldp   10        	
1:4:20 520:A7 1901         br    LAA7      	
              1902 	
              1903 ; *** Chapter 1 page 5	
              1904 	
              1905 ;********************************************************************************	
              1906 ; SUBWARR - Warriors have died.  Subtract count in 4/1-2 from player forces	
              1907 ;********************************************************************************	
1:5:00 540:16 1908 SUBWARR ldp   6         	
              1909 ;	
              1910 ; Copy current player's Warrior count into 5/1-2; subtract the deaths and update their count	
              1911 ;	
1:5:01 541:F2 1912         call  CPY2TO5   	
1:5:03 543:13 1913         ldp   12        	
1:5:07 547:C8 1914         call  SUBB10    	
1:5:0F 54F:13 1915         ldp   12        	
1:5:1F 55F:C0 1916         call  CPY5TO2   	
              1917 ;	
              1918 ; Subtract one more warrior and see if the count goes negative, if so, the current player	
              1919 ; is out of warriors.  Deal with the situation appropriately.	
              1920 ;	
1:5:3F 57F:29 1921         ldx   4         	
1:5:3E 57E:48 1922         tcy   1         	
1:5:3D 57D:60 1923         tcmiy 0         ; 4/1 = 0	
1:5:3B 57B:68 1924         tcmiy 1         ; 4/2 = 1	
1:5:37 577:10 1925         ldp   0         	
1:5:2F 56F:0B 1926         tpc             	
1:5:1E 55E:13 1927         ldp   12        	
1:5:3C 57C:C7 1928         call  L307      ; Do a subtraction without clearing 5/0 (borrow)	
1:5:39 579:3F 1929         mnez            ; Check borrow (negative warriors?)	
1:5:33 573:AC 1930         br    S56C      ; Yep.  Everyone died.	
              1931 	
1:5:27 567:16 1932 S567    ldp   6         	
1:5:0E 54E:BB 1933         br    L5BB      ; Go figure out how much Gold the remaining Warriors can carry	
              1934 ;	
              1935 ; Multiplayer game and player has lost all of their warriors.  Give them one.	
              1936 ;	
1:5:1D 55D:2A 1937 S55D    ldx   2         	
1:5:3A 57A:48 1938         tcy   1         	
1:5:35 575:60 1939         tcmiy 0         ; 2/1 = 0	
1:5:2B 56B:68 1940         tcmiy 1         ; 2/1 = 1	
1:5:16 556:A7 1941         br    S567      ; Carry on...	
              1942 ;	
              1943 ; Warrior count is negative; deal with it appropriately	
              1944 ;	
1:5:2C 56C:2E 1945 S56C    ldx   3         	
1:5:18 558:49 1946         tcy   9         ; 3/9 = player count	
1:5:30 570:21 1947         tma             ; Pick up number of players	
1:5:21 561:7B 1948         a14aac          ; Add 14 (2+ players)	
1:5:02 542:9D 1949         br    S55D      ; This isn't a single-player game	
              1950 ;	
              1951 ; Single player game - they lost all of their warriors so they lose with a score of 00	
              1952 ;	
1:5:05 545:46 1953         tcy   6         ; Victory/Warrior/Brigand	
1:5:0B 54B:15 1954         ldp   10        	
1:5:17 557:D4 1955         call  ROTDRM2   	
1:5:2E 56E:46 1956         tcy   6         ; Select middle lamp	
1:5:1C 55C:0D 1957         setr            ; Light it	
1:5:38 578:1C 1958         ldp   3         	
1:5:31 571:0B 1959         tpc             	
1:5:23 563:1D 1960         ldp   11        	
1:5:06 546:C5 1961         call  PLYDETH   	
1:5:0D 54D:46 1962         tcy   6         ; Select middle lamp	
1:5:1B 55B:0C 1963         rstr            ; Turn it off	
1:5:36 576:2D 1964         ldx   5         	
1:5:2D 56D:48 1965         tcy   1         	
1:5:1A 55A:60 1966         tcmiy 0         ; 5/1 = 0	
1:5:34 574:60 1967         tcmiy 0         ; 5/2 = 0	
1:5:29 569:10 1968 L569    ldp   0         	
1:5:12 552:0B 1969         tpc             	
1:5:24 564:11 1970         ldp   8         	
1:5:08 548:E4 1971         call  BUF2DSP   ; Update display buffer with contents of 5/1 and 5/2 (Display "00")	
1:5:11 551:17 1972         ldp   14        	
1:5:22 562:B2 1973         br    L7B2      ; Prompt the player and end the game	
              1974 	
              1975 ;********************************************************************************	
              1976 ; SUBGOLD - Subtract the number of bags of gold in 4/1-2 from the player's hoard	
              1977 ;********************************************************************************	
1:5:04 544:13 1978 SUBGOLD ldp   12        	
1:5:09 549:D7 1979         call  CPY0TO5   	
1:5:13 553:13 1980         ldp   12        	
1:5:26 566:C8 1981         call  SUBB10    	
1:5:0C 54C:3F 1982         mnez            	
1:5:19 559:CA 1983         call  S54A      	
1:5:32 572:13 1984         ldp   12        	
1:5:25 565:BD 1985         br    CPY5TO0   	
1:5:0A 54A:48 1986 S54A    tcy   1         	
1:5:15 555:60 1987         tcmiy 0         	
1:5:2A 56A:60 1988         tcmiy 0         	
1:5:14 554:0F 1989         retn            	
              1990 	
1:5:28 568:21 1991         tma             	
1:5:10 550:0A 1992         tdo             	
1:5:20 560:05 1993         iyc             	
              1994 	
              1995 ; *** Chapter 1 page 6	
              1996 	
              1997 ;********************************************************************************	
              1998 ; ADDGOLD - Add the number of bags of gold in 4/1-2 to the player's hoard	
              1999 ;********************************************************************************	
1:6:00 580:13 2000 ADDGOLD ldp   12        	
1:6:01 581:D7 2001         call  CPY0TO5   	
1:6:03 583:13 2002         ldp   12        	
1:6:07 587:F4 2003         call  ADDB10    	
1:6:0F 58F:17 2004         ldp   14        	
1:6:1F 59F:3F 2005         mnez            	
1:6:3F 5BF:F1 2006         call  LOAD99    	
1:6:3E 5BE:13 2007         ldp   12        	
1:6:3D 5BD:FD 2008         call  CPY5TO0   	
              2009 ;	
              2010 ; Multiply Warrior count by 6 to determine how much gold they can carry	
              2011 ;	
1:6:3B 5BB:16 2012 L5BB    ldp   6         	
1:6:37 5B7:F2 2013         call  CPY2TO5   ; 5/1-2 = Warrior count	
1:6:2F 5AF:13 2014         ldp   12        	
1:6:1E 59E:E7 2015         call  CPY5TO4   ; 4/1-2 = Warrior count	
1:6:3C 5BC:13 2016         ldp   12        	
1:6:39 5B9:F4 2017         call  ADDB10    ; 5/1-2 = Warrior count + Warrior count = Warrior count x 2	
1:6:33 5B3:13 2018         ldp   12        	
1:6:27 5A7:E7 2019         call  CPY5TO4   ; 4/1-2 = Warrior count x 2	
1:6:0E 58E:10 2020         ldp   0         	
1:6:1D 59D:0B 2021         tpc             	
1:6:3A 5BA:12 2022         ldp   4         	
1:6:35 5B5:FF 2023         call  SUMB10    ; 5/1-2 = Warrior count x 2 + Warrior count x 2 = Warrior count x 4	
1:6:2B 5AB:10 2024         ldp   0         	
1:6:16 596:0B 2025         tpc             	
1:6:2C 5AC:12 2026         ldp   4         	
1:6:18 598:FF 2027         call  SUMB10    ; 5/1-2 = Warrior count x 2 + Warrior count x 4 = Warrior count x 6	
              2028 ;	
              2029 ; 5/0-2 now has the maximum gold that can be carried	
              2030 ;	
1:6:30 5B0:2C 2031         ldx   1         	
1:6:21 5A1:4C 2032         tcy   3         	
1:6:02 582:38 2033         tbit1 0         ; Do they have a Beast?	
1:6:05 585:88 2034         br    S588      ; Yep - add 50 to capacity	
              2035 	
1:6:0B 58B:2D 2036 S58B    ldx   5         	
1:6:17 597:40 2037         tcy   0         	
1:6:2E 5AE:3F 2038         mnez            ; Was there a Base10 overflow (Warrior count x 6 + 50 for beast if any > 99)?	
1:6:1C 59C:A4 2039         br    S5A4      ; Yeah, the warriors can carry more than 99 bags of gold; we're done	
              2040 	
1:6:38 5B8:13 2041         ldp   12        	
1:6:31 5B1:E7 2042         call  CPY5TO4   ; 4/1-2 = Max gold carried	
1:6:23 5A3:13 2043         ldp   12        	
1:6:06 586:D7 2044         call  CPY0TO5   ; 5/1-2 = Current gold	
1:6:0D 58D:13 2045         ldp   12        	
1:6:1B 59B:C8 2046         call  SUBB10    ; Subtract carrying capacity from current gold	
1:6:36 5B6:3F 2047         mnez            ; Was there a borrow?	
1:6:2D 5AD:A4 2048         br    S5A4      ; Yes. They have enough capacity	
              2049 ;	
              2050 ; Player's warriors can't carry that much gold.  Update player gold with their carrying capacity	
              2051 ;	
1:6:1A 59A:15 2052         ldp   10        	
1:6:34 5B4:C2 2053         call  SWP4ND5   ; 4/1-2 has maximum gold they can carry.	
1:6:29 5A9:13 2054         ldp   12        	
1:6:12 592:FD 2055         call  CPY5TO0   ; Update player gold	
              2056 	
1:6:24 5A4:0F 2057 S5A4    retn            	
              2058 ;	
              2059 ; Handle the player having a Beast	
              2060 ;	
1:6:08 588:29 2061 S588    ldx   4         	
1:6:11 591:48 2062         tcy   1         	
1:6:22 5A2:6A 2063         tcmiy 5         ; 4/1 = 5	
1:6:04 584:60 2064         tcmiy 0         ; 4/2 = 0	
1:6:09 589:10 2065         ldp   0         	
1:6:13 593:0B 2066         tpc             	
1:6:26 5A6:12 2067         ldp   4         	
1:6:0C 58C:C7 2068         call  L107      ; Add 50 to the warrior's capacity	
1:6:19 599:8B 2069         br    S58B      	
              2070 	
              2071 ;********************************************************************************	
              2072 ; CPY2TO5 - Copy 2/2-0 to 5/2-0	
              2073 ;	
              2074 ;           Copy player Warrior count to 5/2-0 to do math on it	
              2075 ;********************************************************************************	
1:6:32 5B2:44 2076 CPY2TO5 tcy   2         	
1:6:25 5A5:2A 2077 S5A5    ldx   2         	
1:6:0A 58A:21 2078         tma             	
1:6:15 595:2D 2079         ldx   5         	
1:6:2A 5AA:24 2080         tamdyn          	
1:6:14 594:A5 2081         br    S5A5      	
1:6:28 5A8:0F 2082         retn            	
              2083 	
1:6:10 590:00 2084         mnea            	
1:6:20 5A0:00 2085         mnea            	
              2086 	
              2087 ; *** Chapter 1 page 7	
              2088 	
              2089 ;********************************************************************************	
              2090 ; DOMOVE - Handle random encounters from player hitting the Move button	
              2091 ;********************************************************************************	
1:7:00 5C0:10 2092 DOMOVE  ldp   0         	
1:7:01 5C1:0B 2093         tpc             	
1:7:03 5C3:1C 2094         ldp   3         	
1:7:07 5C7:C0 2095         call  RANDOM    	
1:7:0F 5CF:73 2096         a13aac          ; Add 13 to result - 0-2 = Lost	
1:7:1F 5DF:86 2097         br    S5C6      	
              2098 ;	
              2099 ; Player is Lost 18.75% of the time (on a roll of 0-2 out of 16)	
              2100 ;	
1:7:3F 5FF:4E 2101         tcy   7         ; Cursed/Lost/Plague	
1:7:3E 5FE:15 2102         ldp   10        	
1:7:3D 5FD:D4 2103         call  ROTDRM2   	
1:7:3B 5FB:2C 2104         ldx   1         	
1:7:37 5F7:4C 2105         tcy   3         	
1:7:2F 5EF:3B 2106         tbit1 3         ; Do they have a Scout?	
1:7:1E 5DE:AC 2107         br    S5EC      ; Yes...	
              2108 	
1:7:3C 5FC:46 2109         tcy   6         ; Select middle lamp (Lost)	
1:7:39 5F9:0D 2110         setr            ; Turn it on	
1:7:33 5F3:1C 2111         ldp   3         	
1:7:27 5E7:0B 2112         tpc             	
1:7:0E 5CE:1D 2113         ldp   11        	
1:7:1D 5DD:C0 2114         call  PLYFAIL   ; LOST!	
1:7:3A 5FA:46 2115         tcy   6         ; Select middle lamp	
1:7:35 5F5:0C 2116         rstr            ; Turn it off	
1:7:2B 5EB:10 2117         ldp   0         	
1:7:16 5D6:8F 2118         br    ENDTURN   	
              2119 ;	
              2120 ; Lost but has a Scout	
              2121 ;	
1:7:2C 5EC:10 2122 S5EC    ldp   0         	
1:7:18 5D8:0B 2123         tpc             	
1:7:30 5F0:19 2124         ldp   9         	
1:7:21 5E1:CF 2125         call  LTMIDCL   ; Light Lost and clear display	
1:7:02 5C2:44 2126         tcy   2         ; Scout/Healer/Gold	
1:7:05 5C5:15 2127         ldp   10        	
1:7:0B 5CB:D4 2128         call  ROTDRM2   	
1:7:17 5D7:10 2129         ldp   0         	
1:7:2E 5EE:0B 2130         tpc             	
1:7:1C 5DC:19 2131         ldp   9         	
1:7:38 5F8:C0 2132         call  LTTOPCL   ; Light Scout and clear the display	
1:7:31 5F1:10 2133         ldp   0         	
1:7:23 5E3:94 2134         br    L414      	
              2135 ;	
              2136 ; Player wasn't lost; random number was 3-15.  Check for Dragon.	
              2137 ;	
1:7:06 5C6:19 2138 S5C6    ldp   9         	
1:7:0D 5CD:7B 2139         a14aac          ; Add 14 - 0-1 = Dragon 	
1:7:1B 5DB:9D 2140         br    L65D      	
              2141 ;	
              2142 ; Player encounters a Dragon 10% of the time (on a roll of 3-4 out of 16)	
              2143 ;	
1:7:36 5F6:42 2144         tcy   4         ; Dragon/Sword/Pegasus	
1:7:2D 5ED:15 2145         ldp   10        	
1:7:1A 5DA:D4 2146         call  ROTDRM2   	
1:7:34 5F4:4E 2147         tcy   7         	
1:7:29 5E9:0D 2148         setr            	
1:7:12 5D2:1C 2149         ldp   3         	
1:7:24 5E4:0B 2150         tpc             	
1:7:08 5C8:19 2151         ldp   9         	
1:7:11 5D1:C0 2152         call  PLYDRGN   ; DRAGON!!!	
1:7:22 5E2:4E 2153         tcy   7         	
1:7:04 5C4:0C 2154         rstr            	
1:7:09 5C9:2C 2155         ldx   1         	
1:7:13 5D3:4C 2156         tcy   3         	
1:7:26 5E6:11 2157         ldp   8         	
1:7:0C 5CC:39 2158         tbit1 2         ; Do they have a Sword?	
1:7:19 5D9:97 2159         br    L617      ; Yes!  Give them the Dragon's treasure	
              2160 ;	
              2161 ; Player doesn't have a Sword (Dragon defense)	
              2162 ;	
1:7:32 5F2:13 2163         ldp   12        	
1:7:25 5E5:D7 2164         call  CPY0TO5   ; Pick up current player Gold	
1:7:0A 5CA:15 2165         ldp   10        	
1:7:15 5D5:C2 2166         call  SWP4ND5   ; Move current player Gold up in the formula	
1:7:2A 5EA:1D 2167         ldp   11        	
1:7:14 5D4:C0 2168         call  L6C0      ; See how much Gold the dragon takes	
1:7:28 5E8:11 2169         ldp   8         	
1:7:10 5D0:80 2170         br    L600      	
1:7:20 5E0:00 2171         mnea            	
              2172 	
              2173 ; *** Chapter 1 page 8	
              2174 	
1:8:00 600:1D 2175 L600    ldp   11        	
1:8:01 601:F6 2176         call  SWPDGLD   ; Swap the Dragon's Gold with 5/1-2	
1:8:03 603:13 2177         ldp   12        	
1:8:07 607:F4 2178         call  ADDB10    	
1:8:0F 60F:17 2179         ldp   14        	
1:8:1F 61F:3F 2180         mnez            	
1:8:3F 63F:F1 2181         call  LOAD99    	
1:8:3E 63E:1D 2182         ldp   11        	
1:8:3D 63D:F6 2183         call  SWPDGLD   	
1:8:3B 63B:1A 2184         ldp   5         	
1:8:37 637:C4 2185         call  SUBGOLD   	
1:8:2F 62F:16 2186         ldp   6         	
1:8:1E 61E:F2 2187         call  CPY2TO5   ; Pick up current player Warriors	
1:8:3C 63C:15 2188         ldp   10        	
1:8:39 639:C2 2189         call  SWP4ND5   ; Move current player Warriors up in the formula	
1:8:33 633:1D 2190         ldp   11        	
1:8:27 627:C0 2191         call  L6C0      ; See how many Warriors the dragon takes	
1:8:0E 60E:15 2192         ldp   10        	
1:8:1D 61D:C0 2193         call  SWPDWAR   ; Swap the Dragon's Warriors with 5/1-2	
1:8:3A 63A:13 2194         ldp   12        	
1:8:35 635:F4 2195         call  ADDB10    	
1:8:2B 62B:17 2196         ldp   14        	
1:8:16 616:3F 2197         mnez            	
1:8:2C 62C:F1 2198         call  LOAD99    	
1:8:18 618:15 2199         ldp   10        	
1:8:30 630:C0 2200         call  SWPDWAR   	
1:8:21 621:1A 2201         ldp   5         	
1:8:02 602:C0 2202         call  SUBWARR   	
1:8:05 605:19 2203         ldp   9         	
1:8:0B 60B:AF 2204         br    L66F      	
              2205 ;	
              2206 ; Player has a sword; reward the Dragon's TREASURE!	
              2207 ;	
1:8:17 617:35 2208 L617    rbit  2         	
1:8:2E 62E:46 2209         tcy   6         ; Select middle lamp	
1:8:1C 61C:0D 2210         setr            ; Turn it on	
1:8:38 638:1C 2211         ldp   3         	
1:8:31 631:0B 2212         tpc             	
1:8:23 623:19 2213         ldp   9         	
1:8:06 606:F8 2214         call  PLYDSWD   ; Play the Sword defense sound	
1:8:0D 60D:46 2215         tcy   6         ; Select the middle lamp	
1:8:1B 61B:0C 2216         rstr            ; Turn it off	
              2217 ;	
              2218 ; Pick up the Dragon's Warriors from 3/5-6 and add them to the player's forces	
              2219 ;	
1:8:36 636:2E 2220         ldx   3         	
1:8:2D 62D:4A 2221         tcy   5         	
1:8:1A 61A:21 2222         tma             ; Pick up 3/5	
1:8:34 634:29 2223         ldx   4         	
1:8:29 629:48 2224         tcy   1         	
1:8:12 612:27 2225         tam             ; Store it in 4/1	
1:8:24 624:2E 2226         ldx   3         	
1:8:08 608:46 2227         tcy   6         	
1:8:11 611:21 2228         tma             ; Pick up 3/6	
1:8:22 622:29 2229         ldx   4         	
1:8:04 604:44 2230         tcy   2         	
1:8:09 609:27 2231         tam             ; Store it in 4/2	
1:8:13 613:15 2232         ldp   10        	
1:8:26 626:C6 2233         call  ADDWARR   ; Add those Warriors to the players forces	
              2234 ;	
              2235 ; Pick up the Dragon's bags of Gold from 3/7-8 and add them to the player's hoard	
              2236 ;	
1:8:0C 60C:2E 2237         ldx   3         	
1:8:19 619:4E 2238         tcy   7         	
1:8:32 632:21 2239         tma             ; Pick up 3/7	
1:8:25 625:29 2240         ldx   4         	
1:8:0A 60A:48 2241         tcy   1         	
1:8:15 615:27 2242         tam             ; Store it in 4/1	
1:8:2A 62A:2E 2243         ldx   3         	
1:8:14 614:41 2244         tcy   8         	
1:8:28 628:21 2245         tma             ; Pick up 3/8	
1:8:10 610:19 2246         ldp   9         	
1:8:20 620:80 2247         br    L640      	
              2248 	
              2249 ; *** Chapter 1 page 9	
              2250 	
1:9:00 640:29 2251 L640    ldx   4         	
1:9:01 641:44 2252         tcy   2         	
1:9:03 643:27 2253         tam             ; Store it in 4/2	
1:9:07 647:16 2254         ldp   6         	
1:9:0F 64F:C0 2255         call  ADDGOLD   ; Add that gold to the player's hoard	
              2256 ;	
              2257 ; Reset the Dragon's treasure to defaults (2 Warriors, 6 bags of Gold)	
              2258 ;	
1:9:1F 65F:2E 2259         ldx   3         	
1:9:3F 67F:4A 2260         tcy   5         	
1:9:3E 67E:60 2261         tcmiy 0         ; 3/5 = 0	
1:9:3D 67D:64 2262         tcmiy 2         ; 3/6 = 2 - 2 Warriors	
1:9:3B 67B:60 2263         tcmiy 0         ; 3/7 = 0	
1:9:37 677:66 2264         tcmiy 6         ; 3/8 = 6 - 6 bags of Gold	
1:9:2F 66F:29 2265 L66F    ldx   4         	
1:9:1E 65E:4B 2266         tcy   13        	
1:9:3C 67C:65 2267         tcmiy 10        ; 4/13 = 0b1010 - Gold and Warrior count has changed	
1:9:39 679:13 2268 L679    ldp   12        	
1:9:33 673:C9 2269         call  CALLDSP   ; Display player's updated inventory	
1:9:27 667:10 2270         ldp   0         	
              2271 	
1:9:0E 64E:8F 2272         br    ENDTURN   	
              2273 ;	
              2274 ; Player wasn't Lost or ran into a Dragon; random number was 5-15, check for Plague	
              2275 ;	
1:9:1D 65D:1D 2276 L65D    ldp   11        	
1:9:3A 67A:73 2277         a13aac          ; Add 13 to result - 0-2 = Plague	
1:9:35 675:A5 2278         br    L6E5      ; No Plague...	
              2279 ;	
              2280 ; Player gets Plague 18.75% of the time (on a roll of 5-7 out of 16)	
              2281 ;	
1:9:2B 66B:4E 2282         tcy   7         ; Cursed/Lost/Plague	
1:9:16 656:15 2283         ldp   10        	
1:9:2C 66C:D4 2284         call  ROTDRM2   	
1:9:18 658:2C 2285         ldx   1         	
1:9:30 670:4C 2286         tcy   3         	
1:9:21 661:3A 2287         tbit1 1         ; Healer?	
1:9:02 642:92 2288         br    S652      ; Yep!	
              2289 	
1:9:05 645:4A 2290         tcy   5         ; Select lower lamp	
1:9:0B 64B:0D 2291         setr            ; Turn it on	
1:9:17 657:1C 2292         ldp   3         	
1:9:2E 66E:0B 2293         tpc             	
1:9:1C 65C:1D 2294         ldp   11        	
1:9:38 678:C5 2295         call  PLYDETH   ; Play the death march	
1:9:31 671:4A 2296         tcy   5         ; Select lower lamp	
1:9:23 663:0C 2297         rstr            ; Turn it off	
1:9:06 646:29 2298         ldx   4         	
1:9:0D 64D:48 2299         tcy   1         	
1:9:1B 65B:60 2300         tcmiy 0         ; 4/1 = 0	
1:9:36 676:64 2301         tcmiy 2         ; 4/2 = 2	
1:9:2D 66D:1A 2302         ldp   5         	
1:9:1A 65A:C0 2303         call  SUBWARR   ; Kill some warriors	
1:9:34 674:15 2304         ldp   10        	
1:9:29 669:B2 2305         br    L6B2      	
              2306 ;	
              2307 ; Player has a Healer	
              2308 ;	
1:9:12 652:10 2309 S652    ldp   0         	
1:9:24 664:0B 2310         tpc             	
1:9:08 648:19 2311         ldp   9         	
1:9:11 651:FD 2312         call  LTLWRCL   ; Light Plague and clear display	
1:9:22 662:44 2313         tcy   2         ; Scout/Healer/Gold	
1:9:04 644:15 2314         ldp   10        	
1:9:09 649:D4 2315         call  ROTDRM2   	
1:9:13 653:10 2316         ldp   0         	
1:9:26 666:0B 2317         tpc             	
1:9:0C 64C:19 2318         ldp   9         	
1:9:19 659:CF 2319         call  LTMIDCL   ; Light Healer and clear display	
1:9:32 672:29 2320         ldx   4         	
1:9:25 665:48 2321         tcy   1         	
1:9:0A 64A:1F 2322         ldp   15        	
1:9:15 655:A5 2323         br    L7E5      	
              2324 	
1:9:2A 66A:4E 2325 L66A    tcy   7         ; Cursed/Lost/Plague	
1:9:14 654:15 2326         ldp   10        	
1:9:28 668:D4 2327         call  ROTDRM2   	
1:9:10 650:14 2328         ldp   2         	
1:9:20 660:80 2329         br    L480      	
              2330 	
              2331 ; *** Chapter 1 page 10	
              2332 	
              2333 ;********************************************************************************	
              2334 ; SWPDWAR - Swap 3/5 <-> 5/1 and 3/6 <-> 5/2 (Dragon's Warrior treasure)	
              2335 ;********************************************************************************	
1:A:00 680:2E 2336 SWPDWAR ldx   3         	
1:A:01 681:4A 2337         tcy   5         	
1:A:03 683:21 2338         tma             	
1:A:07 687:2D 2339         ldx   5         	
1:A:0F 68F:48 2340         tcy   1         	
1:A:1F 69F:03 2341         xma             	
1:A:3F 6BF:2E 2342         ldx   3         	
1:A:3E 6BE:4A 2343         tcy   5         	
1:A:3D 6BD:25 2344         tamiyc          	
1:A:3B 6BB:21 2345         tma             	
1:A:37 6B7:2D 2346         ldx   5         	
1:A:2F 6AF:44 2347         tcy   2         	
1:A:1E 69E:03 2348         xma             	
1:A:3C 6BC:2E 2349         ldx   3         	
1:A:39 6B9:46 2350         tcy   6         	
1:A:33 6B3:27 2351         tam             	
1:A:27 6A7:0F 2352         retn            	
              2353 	
              2354 ;********************************************************************************	
              2355 ; ADDFOOD - Add the amount of food in 4/1-2 to the current player's inventory	
              2356 ;********************************************************************************	
1:A:0E 68E:13 2357 ADDFOOD ldp   12        	
1:A:1D 69D:EC 2358         call  CPY1TO5   	
1:A:3A 6BA:13 2359         ldp   12        	
1:A:35 6B5:F4 2360         call  ADDB10    	
1:A:2B 6AB:17 2361         ldp   14        	
1:A:16 696:3F 2362         mnez            	
1:A:2C 6AC:F1 2363         call  LOAD99    	
1:A:18 698:15 2364         ldp   10        	
1:A:30 6B0:E4 2365         call  CPY5TO1   	
1:A:21 6A1:0F 2366         retn            	
              2367 	
              2368 ;********************************************************************************	
              2369 ; SWP4ND5 - Swap 4/2-0 with 5/2-0.	
              2370 ;	
              2371 ; Utility routine used in conjunction with the CPYxTOy for math	
              2372 ;********************************************************************************	
1:A:02 682:29 2373 SWP4ND5 ldx   4         	
1:A:05 685:44 2374         tcy   2         	
1:A:0B 68B:21 2375 S68B    tma             	
1:A:17 697:2D 2376         ldx   5         	
1:A:2E 6AE:03 2377         xma             	
1:A:1C 69C:29 2378         ldx   4         	
1:A:38 6B8:24 2379         tamdyn          	
1:A:31 6B1:8B 2380         br    S68B      	
1:A:23 6A3:0F 2381         retn            	
              2382 	
              2383 ;********************************************************************************	
              2384 ; ADDWARR - Add value in 4/1-2 to current player's Warrior count	
              2385 ;********************************************************************************	
1:A:06 686:16 2386 ADDWARR ldp   6         	
1:A:0D 68D:F2 2387         call  CPY2TO5   ; Pick up player Warrior count	
1:A:1B 69B:13 2388         ldp   12        	
1:A:36 6B6:F4 2389         call  ADDB10    ; Add 4/1-2 to the count	
1:A:2D 6AD:17 2390         ldp   14        	
1:A:1A 69A:3F 2391         mnez            ; Check for overflow (can't exceed 99 warriors)	
1:A:34 6B4:F1 2392         call  LOAD99    	
1:A:29 6A9:13 2393         ldp   12        	
1:A:12 692:80 2394         br    CPY5TO2   ; Update player Warrior count	
              2395 	
              2396 ;********************************************************************************	
              2397 ; CPY5TO1 - Update player Food after Base10 math	
              2398 ;********************************************************************************	
1:A:24 6A4:44 2399 CPY5TO1 tcy   2         	
1:A:08 688:2D 2400 S688    ldx   5         	
1:A:11 691:21 2401         tma             	
1:A:22 6A2:2C 2402         ldx   1         	
1:A:04 684:24 2403         tamdyn          	
1:A:09 689:50 2404         ynec  0         	
1:A:13 693:88 2405         br    S688      	
1:A:26 6A6:0F 2406         retn            	
              2407 ;	
              2408 ; Add Warriors in 4/1-2, mark Warrior count as changed and display results	
              2409 ;	
              2410 ; This is called from Plague when player has a Healer	
              2411 ;	
1:A:0C 68C:15 2412 L68C    ldp   10        	
1:A:19 699:C6 2413         call  ADDWARR   	
1:A:32 6B2:29 2414 L6B2    ldx   4         	
1:A:25 6A5:4B 2415         tcy   13        	
1:A:0A 68A:34 2416         rbit  0         	
1:A:15 695:19 2417         ldp   9         	
1:A:2A 6AA:B9 2418         br    L679      	
              2419 	
              2420 ;********************************************************************************	
              2421 ; ROTDRM2 - Local copy of ROTDRUM in Chapter 1	
              2422 ;********************************************************************************	
1:A:14 694:10 2423 ROTDRM2 ldp   0         	
1:A:28 6A8:0B 2424         tpc             	
1:A:10 690:11 2425         ldp   8         	
1:A:20 6A0:95 2426         br    ROTDRUM   	
              2427 	
              2428 ; *** Chapter 1 page 11	
              2429 	
              2430 ;	
              2431 ; Called with either player Warrior or Gold inventory in 4/1-2	
              2432 ;	
              2433 ; When player has been attacked by the Dragon and doesn't	
              2434 ; have a sword for defense.  Figure out how much the Dragon will take.	
              2435 ;	
              2436 ; Formula is based on how many Warriors or how much Gold player has.  More	
              2437 ; in their inventory means the Dragon takes more.	
              2438 ;	
              2439 ; According to the manual, the dragon takes 1/4 of the player's warriors and gold.	
              2440 ;	
1:B:00 6C0:29 2441 L6C0    ldx   4         	
1:B:01 6C1:44 2442         tcy   2         	
1:B:03 6C3:21 2443         tma             ; Take a look at the 1s digit of 4/2	
1:B:07 6C7:30 2444         sbit  0         	
1:B:0F 6CF:32 2445         sbit  1         ; Start with 3	
1:B:1F 6DF:39 2446         tbit1 2         ; Do they have 4 or more of this	
1:B:3F 6FF:BD 2447         br    S6FD      ; Yes, leave bit 0 set	
1:B:3E 6FE:34 2448         rbit  0         	
1:B:3D 6FD:3B 2449 S6FD    tbit1 3         ; Do they have 8 or more of this	
1:B:3B 6FB:AF 2450         br    S6EF      ; Yep, leave bit 1 set	
1:B:37 6F7:36 2451         rbit  1         	
1:B:2F 6EF:35 2452 S6EF    rbit  2         	
1:B:1E 6DE:37 2453         rbit  3         	
              2454 	
1:B:3C 6FC:48 2455         tcy   1         ; Take a look at the 10s digit at 4/1	
1:B:39 6F9:38 2456         tbit1 0         ; At least 10	
1:B:33 6F3:B1 2457         br    S6F1      ; Add 2 more	
1:B:27 6E7:3A 2458 S6E7    tbit1 1         ; At least 20	
1:B:0E 6CE:8B 2459         br    S6CB      ; Add 5 more	
1:B:1D 6DD:30 2460 S6DD    sbit  0         	
1:B:3A 6FA:32 2461         sbit  1         	
1:B:35 6F5:39 2462         tbit1 2         	
1:B:2B 6EB:AC 2463         br    S6EC      	
1:B:16 6D6:34 2464         rbit  0         	
1:B:2C 6EC:3B 2465 S6EC    tbit1 3         	
1:B:18 6D8:A1 2466         br    S6E1      	
1:B:30 6F0:36 2467         rbit  1         	
1:B:21 6E1:35 2468 S6E1    rbit  2         	
1:B:02 6C2:37 2469         rbit  3         	
              2470 	
1:B:05 6C5:0F 2471         retn            	
              2472 	
1:B:0B 6CB:44 2473 S6CB    tcy   2         	
1:B:17 6D7:21 2474         tma             	
1:B:2E 6EE:72 2475         a5aac           	
1:B:1C 6DC:24 2476         tamdyn          	
1:B:38 6F8:9D 2477         br    S6DD      	
              2478 	
1:B:31 6F1:44 2479 S6F1    tcy   2         	
1:B:23 6E3:21 2480         tma             	
1:B:06 6C6:78 2481         a2aac           	
1:B:0D 6CD:24 2482         tamdyn          	
1:B:1B 6DB:A7 2483         br    S6E7      	
              2484 ;********************************************************************************	
              2485 ; SWPDGLD - Swap 3/7 <-> 5/1 and 3/8 <-> 5/2 (Dragon's bags of Gold treasure)	
              2486 ;********************************************************************************	
1:B:36 6F6:2E 2487 SWPDGLD ldx   3         	
1:B:2D 6ED:4E 2488         tcy   7         	
1:B:1A 6DA:21 2489         tma             	
1:B:34 6F4:2D 2490         ldx   5         	
1:B:29 6E9:48 2491         tcy   1         	
1:B:12 6D2:03 2492         xma             	
1:B:24 6E4:2E 2493         ldx   3         	
1:B:08 6C8:4E 2494         tcy   7         	
1:B:11 6D1:25 2495         tamiyc          	
1:B:22 6E2:21 2496         tma             	
1:B:04 6C4:2D 2497         ldx   5         	
1:B:09 6C9:44 2498         tcy   2         	
1:B:13 6D3:03 2499         xma             	
1:B:26 6E6:2E 2500         ldx   3         	
1:B:0C 6CC:41 2501         tcy   8         	
1:B:19 6D9:27 2502         tam             	
1:B:32 6F2:0F 2503         retn            	
              2504 ;	
              2505 ; Player wasn't Lost, ran into a Dragon or got the Plague; random number was 8-15, check for Brigands???	
              2506 ;	
1:B:25 6E5:10 2507 L6E5    ldp   0         	
1:B:0A 6CA:73 2508         a13aac          ; Add 13 to result - 0-2 = Brigands	
1:B:15 6D5:80 2509         br    L400      ; No encounter the rest of the time (31.25%)	
              2510 ;	
              2511 ; Player gets Brigands 18.75% of the time (on a roll of 8-10 out of 16)	
              2512 ;	
1:B:2A 6EA:14 2513         ldp   2         	
1:B:14 6D4:0B 2514         tpc             	
1:B:28 6E8:12 2515         ldp   4         	
1:B:10 6D0:B7 2516         br    L937      	
1:B:20 6E0:00 2517         mnea            	
              2518 	
              2519 ; *** Chapter 1 page 12	
              2520 	
              2521 ;********************************************************************************	
              2522 ; CPY5TO2 - Copy 5/2-0 to 2/2-0	
              2523 ;********************************************************************************	
1:C:00 700:44 2524 CPY5TO2 tcy   2         	
1:C:01 701:2D 2525 S701    ldx   5         	
1:C:03 703:21 2526         tma             	
1:C:07 707:2A 2527         ldx   2         	
1:C:0F 70F:24 2528 S70F    tamdyn          	
1:C:1F 71F:50 2529         ynec  0         	
1:C:3F 73F:81 2530         br    S701      	
1:C:3E 73E:0F 2531         retn            	
              2532 	
              2533 ;********************************************************************************	
              2534 ; CPY5TO0 - Copy 5/2-0 to 0/2-0	
              2535 ;********************************************************************************	
1:C:3D 73D:44 2536 CPY5TO0 tcy   2         	
1:C:3B 73B:2D 2537 S73B    ldx   5         	
1:C:37 737:21 2538         tma             	
1:C:2F 72F:28 2539         ldx   0         	
1:C:1E 71E:24 2540         tamdyn          	
1:C:3C 73C:50 2541         ynec  0         	
1:C:39 739:BB 2542         br    S73B      	
1:C:33 733:0F 2543         retn            	
              2544 	
              2545 ;********************************************************************************	
              2546 ; CPY5TO4 - Copy 5/2-0 to 4/2-0	
              2547 ;********************************************************************************	
1:C:27 727:44 2548 CPY5TO4 tcy   2         	
1:C:0E 70E:2D 2549 S70E    ldx   5         	
1:C:1D 71D:21 2550         tma             	
1:C:3A 73A:29 2551         ldx   4         	
1:C:35 735:24 2552         tamdyn          	
1:C:2B 72B:8E 2553         br    S70E      	
1:C:16 716:0F 2554         retn            	
              2555 	
              2556 ;********************************************************************************	
              2557 ; CPY1TO5 - Copy 1/2-0 to 5/2-0	
              2558 ;********************************************************************************	
1:C:2C 72C:44 2559 CPY1TO5 tcy   2         	
1:C:18 718:2C 2560 S718    ldx   1         	
1:C:30 730:21 2561         tma             	
1:C:21 721:2D 2562         ldx   5         	
1:C:02 702:24 2563         tamdyn          	
1:C:05 705:98 2564         br    S718      	
1:C:0B 70B:0F 2565         retn            	
              2566 	
              2567 ;********************************************************************************	
              2568 ; CPY0TO5 - Copy 0/2-0 to 5/2-0	
              2569 ;********************************************************************************	
1:C:17 717:44 2570 CPY0TO5 tcy   2         	
1:C:2E 72E:28 2571 S72E    ldx   0         	
1:C:1C 71C:21 2572         tma             	
1:C:38 738:2D 2573         ldx   5         	
1:C:31 731:24 2574         tamdyn          	
1:C:23 723:AE 2575         br    S72E      	
1:C:06 706:0F 2576         retn            	
              2577 	
              2578 ;********************************************************************************	
              2579 ; 	
              2580 ;********************************************************************************	
1:C:0D 70D:63 2581 L70D    tcmiy 12        	
1:C:1B 71B:13 2582         ldp   12        	
1:C:36 736:C9 2583         call  CALLDSP   ; Display results	
1:C:2D 72D:10 2584         ldp   0         	
1:C:1A 71A:8F 2585         br    ENDTURN   	
              2586 	
              2587 ;********************************************************************************	
              2588 ; ADDB10 - Call the actual Add Base 10 routine (AD2B10)	
              2589 ;********************************************************************************	
1:C:34 734:10 2590 ADDB10  ldp   0         	
1:C:29 729:0B 2591         tpc             	
1:C:12 712:12 2592         ldp   4         	
1:C:24 724:80 2593         br    AD2B10    	
              2594 	
              2595 ;********************************************************************************	
              2596 ; SUBB10 - Call the actual Subtract Base 10 routine (SU2B10)	
              2597 ;********************************************************************************	
1:C:08 708:10 2598 SUBB10  ldp   0         	
1:C:11 711:0B 2599         tpc             	
1:C:22 722:13 2600         ldp   12        	
1:C:04 704:80 2601         br    SU2B10    	
              2602 	
              2603 ;********************************************************************************	
              2604 ; CALLDSP - Local copy of DSPRSLT in Chapter 1	
              2605 ;********************************************************************************	
1:C:09 709:10 2606 CALLDSP ldp   0         	
1:C:13 713:0B 2607         tpc             	
1:C:26 726:1A 2608         ldp   5         	
1:C:0C 70C:80 2609         br    DSPRSLT   	
              2610 	
              2611 ;********************************************************************************	
              2612 ; DOSANCT - Player has hit Sanctuary/Citadel - handle the encounter	
              2613 ;********************************************************************************	
1:C:19 719:1C 2614 DOSANCT ldp   3         	
1:C:32 732:0B 2615         tpc             	
1:C:25 725:1A 2616         ldp   5         	
1:C:0A 70A:DF 2617         call  PLYSANC      	
1:C:15 715:2A 2618         ldx   2         	
1:C:2A 72A:4C 2619         tcy   3         	
1:C:14 714:1B 2620         ldp   13        	
1:C:28 728:3E 2621         imac            ; Load up the Key inventory and add 1.  If it's 0b1111, they're in the final territory	
1:C:10 710:80 2622         br    L740      ; There was a carry.  This is a Citadel visit.	
1:C:20 720:8F 2623         br    L74F      ; Sanctuary visit	
              2624 	
              2625 ; *** Chapter 1 page 13	
              2626 	
              2627 ;	
              2628 ; This is a Citadel visit.  Test 0/3 Bit 0 to see if this is just a repeat visit.	
              2629 ;	
1:D:00 740:28 2630 L740    ldx   0         	
1:D:01 741:38 2631         tbit1 0         ; Are they cheating and trying to revisit the Citadel without a Tomb run?	
1:D:03 743:99 2632         br    S759      ; Yep.  Act like this is a Sanctuary visit, bypassing any Warrior bonuses.	
1:D:07 747:30 2633         sbit  0         ; Nope.  Flag that the Citadel has been visited and give them bonuses.	
              2634 	
              2635 ;	
              2636 ; Check to see if player is eligible for additional Warriors.	
              2637 ;	
              2638 ; If they have 4 Warriors or less, give them 5-8 more on a Sanctuary run	
              2639 ;	
1:D:0F 74F:16 2640 L74F    ldp   6         	
1:D:1F 75F:F2 2641         call  CPY2TO5   ; Copy current Warriors	
1:D:3F 77F:29 2642         ldx   4         	
1:D:3E 77E:48 2643         tcy   1         	
1:D:3D 77D:69 2644         tcmiy 9         ; 4/1 = 9	
1:D:3B 77B:6A 2645         tcmiy 5         ; 4/2 = 5	
1:D:37 777:13 2646         ldp   12        	
1:D:2F 76F:F4 2647         call  ADDB10    	
1:D:1E 75E:3F 2648         mnez            ; Check for overflow, eligble for more Warriors?	
1:D:3C 77C:97 2649         br    S757      ; Nope, sorry	
              2650 ;	
              2651 ; They had 4 Warriors or less	
              2652 ;	
1:D:39 779:10 2653         ldp   0         	
1:D:33 773:0B 2654         tpc             	
1:D:27 767:1C 2655         ldp   3         	
1:D:0E 74E:C0 2656         call  RANDOM    	
1:D:1D 75D:29 2657         ldx   4         	
1:D:3A 77A:24 2658         tamdyn          ; 4/2 = Random	
1:D:35 775:60 2659         tcmiy 0         ; 4/1 = 0	
1:D:2B 76B:37 2660         rbit  3         ; Reduce random value to 0-7	
1:D:16 756:35 2661         rbit  2         ; Reduce random value to 0-3	
1:D:2C 76C:2D 2662         ldx   5         	
1:D:18 758:48 2663         tcy   1         	
1:D:30 770:60 2664         tcmiy 0         ; 5/1 = 0	
1:D:21 761:6A 2665         tcmiy 5         ; 5/2 = 5	
1:D:02 742:13 2666         ldp   12        	
1:D:05 745:F4 2667         call  ADDB10    ; Give a random value of 5-8	
1:D:0B 74B:91 2668         br    S751      	
              2669 ;	
              2670 ; They had 5 or more Warriors, check to see if they have less than 25.	
              2671 ; If so, double their forces (this is a Citadel run).	
              2672 ;	
1:D:17 757:16 2673 S757    ldp   6         	
1:D:2E 76E:F2 2674         call  CPY2TO5   ; Copy current Warriors	
1:D:1C 75C:29 2675         ldx   4         	
1:D:38 778:48 2676         tcy   1         	
1:D:31 771:6E 2677         tcmiy 7         ; 4/1 = 7	
1:D:23 763:6A 2678         tcmiy 5         ; 4/2 = 5	
1:D:06 746:13 2679         ldp   12        	
1:D:0D 74D:F4 2680         call  ADDB10    ; Add 75 to player Warrior count	
1:D:1B 75B:3F 2681         mnez            ; Overflow?	
1:D:36 776:99 2682         br    S759      ; They had more than 24 warriors; sorry.	
              2683 ;	
              2684 ; Check to see if this is a Sanctuary run or a Citadel run based on Key inventory	
              2685 ;	
1:D:2D 76D:2A 2686         ldx   2         	
1:D:1A 75A:4C 2687         tcy   3         	
1:D:34 774:3E 2688         imac            ; Check if we're in the final territory (this is a Citadel run)	
1:D:29 769:A4 2689         br    S764      ; Yep.  Double their warriors	
1:D:12 752:99 2690         br    S759      ; Nope, sorry - this is effectively a Sanctuary run	
              2691 ;	
              2692 ; This is a Citadel run and they had 5-24 Warriors; double their forces	
              2693 ;	
1:D:24 764:16 2694 S764    ldp   6         	
1:D:08 748:F2 2695         call  CPY2TO5   ; Pick up the Warrior count	
              2696 ;	
              2697 ; Add Warriors (either double for Citadel run or 5-8 more for a Sanctuary run)	
              2698 ;	
1:D:11 751:13 2699 S751    ldp   12        	
1:D:22 762:E7 2700         call  CPY5TO4   ; Copy additional Warriors to top of formula	
1:D:04 744:15 2701         ldp   10        	
1:D:09 749:C6 2702         call  ADDWARR   ; Double their forces and update their inventory	
1:D:13 753:29 2703         ldx   4         	
1:D:26 766:4B 2704         tcy   13        	
1:D:0C 74C:34 2705         rbit  0         ; Flag that Warrior count has changed	
              2706 	
              2707 ;	
              2708 ; Check to see if player is eligible for more Gold.	
              2709 ;	
              2710 ; If they have 7 bags or less, give them 9-16 more bags of Gold	
              2711 ;	
1:D:19 759:13 2712 S759    ldp   12        	
1:D:32 772:D7 2713         call  CPY0TO5   ; Copy current player's Gold	
1:D:25 765:29 2714         ldx   4         	
1:D:0A 74A:48 2715         tcy   1         	
1:D:15 755:69 2716         tcmiy 9         ; 4/1 = 9	
1:D:2A 76A:64 2717         tcmiy 2         ; 4/2 = 2	
1:D:14 754:17 2718         ldp   14        	
1:D:28 768:80 2719         br    L780      	
1:D:10 750:00 2720         mnea            	
1:D:20 760:00 2721         mnea            	
              2722 	
              2723 ; *** Chapter 1 page 14	
              2724 	
1:E:00 780:13 2725 L780    ldp   12        	
1:E:01 781:F4 2726         call  ADDB10    ; Add 92 to player's gold	
1:E:03 783:3F 2727         mnez            ; Overflow?	
1:E:07 787:B7 2728         br    S7B7      ; Nope, sorry	
              2729 ;	
              2730 ; Player had 7 bags of gold or less.  Give them 9-16 more.	
              2731 ;	
1:E:0F 78F:D7 2732         call  S797      ; Random value of 9-16 in 4/1-2	
1:E:1F 79F:16 2733         ldp   6         	
1:E:3F 7BF:C0 2734         call  ADDGOLD   ; Add additional bags to player Gold	
1:E:3E 7BE:29 2735         ldx   4         	
1:E:3D 7BD:4B 2736         tcy   13        	
1:E:3B 7BB:35 2737         rbit  2         ; Flag that Gold inventory changed	
              2738 	
              2739 ;	
              2740 ; Check to see if the player is eligible for more Food	
              2741 ;	
              2742 ; If they have 5 rations of Food or less, give them	
              2743 ;	
1:E:37 7B7:13 2744 S7B7    ldp   12        	
1:E:2F 7AF:EC 2745         call  CPY1TO5   	
1:E:1E 79E:29 2746         ldx   4         	
1:E:3C 7BC:48 2747         tcy   1         	
1:E:39 7B9:69 2748         tcmiy 9         ; 4/1 = 9	
1:E:33 7B3:62 2749         tcmiy 4         ; 4/2 = 4	
1:E:27 7A7:13 2750         ldp   12        	
1:E:0E 78E:F4 2751         call  ADDB10    	
1:E:1D 79D:3F 2752         mnez            ; Was there an overflow?	
1:E:3A 7BA:A1 2753         br    S7A1      ; Nope, sorry	
              2754 ;	
              2755 ; Player has 5 or less rations of Food.  Give them 9-16 more.	
              2756 ;	
1:E:35 7B5:D7 2757         call  S797      ; Get a random number from 9-16 into 4/1-2	
1:E:2B 7AB:15 2758         ldp   10        	
1:E:16 796:CE 2759         call  ADDFOOD   ; Add the Food to the player inventory	
1:E:2C 7AC:29 2760         ldx   4         	
1:E:18 798:4B 2761         tcy   13        	
1:E:30 7B0:36 2762         rbit  1         ; Flag that Food inventory has changed	
              2763 ;	
              2764 ; Done with Sanctuary/Citadel - show the results	
              2765 ;	
1:E:21 7A1:13 2766 S7A1    ldp   12        	
1:E:02 782:C9 2767         call  CALLDSP   ; Display results	
1:E:05 785:10 2768         ldp   0         	
1:E:0B 78B:8F 2769         br    ENDTURN   	
              2770 	
1:E:17 797:10 2771 S797    ldp   0         	
1:E:2E 7AE:0B 2772         tpc             	
1:E:1C 79C:12 2773         ldp   4         	
1:E:38 7B8:A9 2774         br    L129      	
              2775 	
1:E:31 7B1:48 2776 LOAD99  tcy   1         	
1:E:23 7A3:69 2777         tcmiy 9         	
1:E:06 786:69 2778         tcmiy 9         	
1:E:0D 78D:0F 2779         retn            	
              2780 ;********************************************************************************	
              2781 ; CPYTRNC - Copy the turn counter for math 	
              2782 ; 	
              2783 ; Swap 3/3 <-> 5/1 and 3/4 <-> 5/2	
              2784 ;********************************************************************************	
1:E:1B 79B:2E 2785 CPYTRNC ldx   3         	
1:E:36 7B6:4C 2786         tcy   3         	
1:E:2D 7AD:21 2787         tma             	
1:E:1A 79A:2D 2788         ldx   5         	
1:E:34 7B4:48 2789         tcy   1         	
1:E:29 7A9:03 2790         xma             	
1:E:12 792:2E 2791         ldx   3         	
1:E:24 7A4:4C 2792         tcy   3         	
1:E:08 788:25 2793         tamiyc	
1:E:11 791:21 2794         tma             	
1:E:22 7A2:2D 2795         ldx   5         	
1:E:04 784:44 2796         tcy   2         	
1:E:09 789:03 2797         xma             	
1:E:13 793:2E 2798         ldx   3         	
1:E:26 7A6:42 2799         tcy   4         	
1:E:0C 78C:27 2800         tam	
1:E:19 799:0F 2801         retn            	
              2802 	
1:E:32 7B2:10 2803 L7B2    ldp   0         	
1:E:25 7A5:0B 2804         tpc             	
1:E:0A 78A:1E 2805         ldp   7         	
1:E:15 795:CB 2806         call  PROMPT      	
1:E:2A 7AA:1F 2807         ldp   15        	
1:E:14 794:94 2808         br    L7D4      	
1:E:28 7A8:0D 2809         setr            	
1:E:10 790:0C 2810         rstr            	
1:E:20 7A0:05 2811         iyc             	
              2812 	
              2813 ; *** Chapter 1 page 15	
              2814 	
              2815 ;********************************************************************************	
              2816 ; PLYOPEN - Play the tomb open sound	
              2817 ;********************************************************************************	
1:F:00 7C0:2B 2818 PLYOPEN ldx   6         	
1:F:01 7C1:40 2819         tcy   0         	
1:F:03 7C3:60 2820         tcmiy 0         ; 6/0 = 0	
1:F:07 7C7:64 2821         tcmiy 2         ; 6/1 = 2	
1:F:0F 7CF:CB 2822 S7CF    call  S7CB      	
1:F:1F 7DF:74 2823         a3aac           	
1:F:3F 7FF:BD 2824         br    S7FD      	
1:F:3E 7FE:AF 2825         br    S7EF      	
1:F:3D 7FD:25 2826 S7FD    tamiyc          	
1:F:3B 7FB:3E 2827         imac            	
1:F:37 7F7:B2 2828         br    S7F2      ; Return	
1:F:2F 7EF:27 2829 S7EF    tam             	
1:F:1E 7DE:8F 2830         br    S7CF      	
              2831 	
              2832 ;********************************************************************************	
              2833 ; PLYCLOS - Play the tomb close sound (tomb is empty) and end the turn	
              2834 ;********************************************************************************	
1:F:3C 7FC:2B 2835 PLYCLOS ldx   6         	
1:F:39 7F9:40 2836         tcy   0         	
1:F:33 7F3:6F 2837         tcmiy 15        ; 6/0 = 15	
1:F:27 7E7:6F 2838         tcmiy 15        ; 6/1 = 15	
1:F:0E 7CE:CB 2839 S7CE    call  S7CB      	
1:F:1D 7DD:73 2840         a13aac          	
1:F:3A 7FA:82 2841         br    S7C2      	
1:F:35 7F5:25 2842         tamiyc          	
1:F:2B 7EB:07 2843         dman            	
1:F:16 7D6:27 2844         tam             	
1:F:2C 7EC:73 2845         a13aac          	
1:F:18 7D8:8E 2846         br    S7CE      	
1:F:30 7F0:10 2847         ldp   0         	
1:F:21 7E1:8F 2848         br    ENDTURN   	
1:F:02 7C2:27 2849 S7C2    tam             	
1:F:05 7C5:8E 2850         br    S7CE      	
              2851 ;	
              2852 ; Probably play a tick and delay based on contents of 6/0-1	
              2853 ; Used by Tomb open/close routines	
              2854 ;	
1:F:0B 7CB:45 2855 S7CB    tcy   10        ; Select speaker out	
1:F:17 7D7:0D 2856         setr            ; Set the speaker	
1:F:2E 7EE:02 2857         ynea            	
1:F:1C 7DC:02 2858         ynea            	
1:F:38 7F8:02 2859         ynea            	
1:F:31 7F1:02 2860         ynea            	
1:F:23 7E3:2B 2861         ldx   6         	
1:F:06 7C6:0C 2862         rstr            ; Reset the speaker	
1:F:0D 7CD:40 2863         tcy   0         	
1:F:1B 7DB:21 2864         tma             ; A = 6/0	
1:F:36 7F6:05 2865         iyc             	
1:F:2D 7ED:22 2866         tmy             ; Y = 6/1	
1:F:1A 7DA:2F 2867         ldx   7         	
1:F:34 7F4:27 2868 S7F4    tam             	
1:F:29 7E9:7F 2869         cla             	
1:F:12 7D2:71 2870         a9aac           	
1:F:24 7E4:77 2871 S7E4    dan             	
1:F:08 7C8:A4 2872         br    S7E4      	
1:F:11 7D1:21 2873         tma             	
1:F:22 7E2:77 2874         dan             	
1:F:04 7C4:B4 2875         br    S7F4      	
1:F:09 7C9:04 2876         dyn             	
1:F:13 7D3:B4 2877         br    S7F4      	
1:F:26 7E6:2B 2878         ldx   6         	
1:F:0C 7CC:40 2879         tcy   0         	
1:F:19 7D9:21 2880         tma             	
1:F:32 7F2:0F 2881 S7F2    retn            	
              2882 ;	
              2883 ; Plague with Healer - add some warriors	
              2884 ;	
1:F:25 7E5:60 2885 L7E5    tcmiy 0         ; 4/1 = 0	
1:F:0A 7CA:64 2886         tcmiy 2         ; 4/2 = 2	
1:F:15 7D5:15 2887         ldp   10        	
1:F:2A 7EA:8C 2888         br    L68C      ; Add two Warriors to player's forces and display results	
              2889 	
1:F:14 7D4:10 2890 L7D4    ldp   0         	
1:F:28 7E8:0B 2891         tpc             	
1:F:10 7D0:1F 2892         ldp   15        	
1:F:20 7E0:AD 2893         br    L3ED      	
              2894 	
              2895 ; *** Chapter 2 page 0	
              2896 	
              2897 ;	
              2898 ; BRIGANDS!!!  Handle the encounter	
              2899 ;	
2:0:00 800:1F 2900 L800    ldp   15        	
2:0:01 801:E6 2901         call  LRANDOM   	
2:0:03 803:1F 2902         ldp   15        	
2:0:07 807:E5 2903         call  LBE5      	
2:0:0F 80F:29 2904         ldx   4         	
2:0:1F 81F:48 2905         tcy   1         	
2:0:3F 83F:60 2906         tcmiy 0         ; 4/1 = 0	
2:0:3E 83E:27 2907         tam             ; 4/2 = 	
2:0:3D 83D:1F 2908         ldp   15        	
2:0:3B 83B:D4 2909         call  LBD4      	
2:0:37 837:2E 2910         ldx   3         	
2:0:2F 82F:48 2911         tcy   1         	
2:0:1E 81E:3B 2912         tbit1 3         	
2:0:3C 83C:96 2913         br    S816      	
2:0:39 839:12 2914         ldp   4         	
2:0:33 833:EA 2915         call  LADDB10   	
2:0:27 827:18 2916         ldp   1         	
2:0:0E 80E:0B 2917         tpc             	
2:0:1D 81D:17 2918         ldp   14        	
2:0:3A 83A:3F 2919         mnez            	
2:0:35 835:F1 2920         call  LOAD99    	
2:0:2B 82B:8D 2921         br    S80D      	
2:0:16 816:10 2922 S816    ldp   0         	
2:0:2C 82C:0B 2923         tpc             	
2:0:18 818:13 2924         ldp   12        	
2:0:30 830:C0 2925         call  SU2B10    	
2:0:21 821:3F 2926         mnez            	
2:0:02 802:B1 2927         br    S831      	
2:0:05 805:48 2928         tcy   1         	
2:0:0B 80B:3F 2929         mnez            	
2:0:17 817:8D 2930         br    S80D      	
2:0:2E 82E:44 2931         tcy   2         	
2:0:1C 81C:3F 2932         mnez            	
2:0:38 838:8D 2933         br    S80D      	
2:0:31 831:48 2934 S831    tcy   1         	
2:0:23 823:60 2935         tcmiy 0         	
2:0:06 806:68 2936         tcmiy 1         	
2:0:0D 80D:12 2937 S80D    ldp   4         	
2:0:1B 81B:D3 2938         call  L913      ; Update the Brigand count from 5/1-2	
2:0:36 836:1C 2939 L836    ldp   3         	
2:0:2D 82D:0B 2940         tpc             	
2:0:1A 81A:1E 2941         ldp   7         	
2:0:34 834:EB 2942         call  PLYBUGL   	
2:0:29 829:14 2943         ldp   2         	
2:0:12 812:D5 2944         call  LCPBRIG   ; Copy Brigand count to 5/1-2 for calculations	
2:0:24 824:1C 2945         ldp   3         	
2:0:08 808:F4 2946         call  5TODSPB   ; Copy Brigand count to Display Buffer	
2:0:11 811:46 2947         tcy   6         ; Victory/Warriors/Brigands	
2:0:22 822:19 2948         ldp   9         	
2:0:04 804:C4 2949         call  ROTDRM3   	
2:0:09 809:10 2950         ldp   0         	
2:0:13 813:0B 2951         tpc             	
2:0:26 826:19 2952         ldp   9         	
2:0:0C 80C:FB 2953         call  L27B      ; Light the lower window and beep	
2:0:19 819:2F 2954         ldx   7         	
2:0:32 832:47 2955         tcy   14        	
2:0:25 825:6F 2956         tcmiy 15        ; 7/14 = 15 (" ")	
2:0:0A 80A:6F 2957         tcmiy 15        ; 7/15 = 15 (" ")	
2:0:15 815:10 2958         ldp   0         	
2:0:2A 82A:0B 2959         tpc             	
2:0:14 814:19 2960         ldp   9         	
2:0:28 828:E7 2961         call  L267      	
2:0:10 810:18 2962         ldp   1         	
2:0:20 820:80 2963         br    L840      	
              2964 	
              2965 ; *** Chapter 2 page 1	
              2966 	
              2967 ;	
              2968 ; Add the count of 	
              2969 ;	
2:1:00 840:2E 2970 L840    ldx   3         	
2:1:01 841:43 2971         tcy   12        	
2:1:03 843:21 2972         tma             ; Brigand fight count 10s digit	
2:1:07 847:4B 2973         tcy   13        	
2:1:0F 84F:06 2974         amaac           ; Add the Brigand fight count 1s digit	
2:1:1F 85F:BB 2975         br    S87B      	
2:1:3F 87F:77 2976         dan             	
2:1:3E 87E:BB 2977         br    S87B      	
2:1:3D 87D:0F 2978         retn            	
              2979 	
2:1:3B 87B:2B 2980 S87B    ldx   6         	
2:1:37 877:43 2981         tcy   12        	
2:1:2F 86F:34 2982         rbit  0         	
2:1:1E 85E:2F 2983         ldx   7         	
2:1:3C 87C:47 2984         tcy   14        	
2:1:39 879:6F 2985         tcmiy 15        ; 7/14 = 15 (" ")	
2:1:33 873:6F 2986         tcmiy 15        ; 7/15 = 15 (" ")	
2:1:27 867:2E 2987         ldx   3         	
2:1:0E 84E:49 2988         tcy   9         	
2:1:1D 85D:21 2989         tma             ; Pick up player count	
2:1:3A 87A:7B 2990         a14aac          ; More than one player?	
2:1:35 875:9B 2991         br    S85B      ; Yes	
2:1:2B 86B:10 2992 S86B    ldp   0         	
2:1:16 856:0B 2993         tpc             	
2:1:2C 86C:1E 2994         ldp   7         	
2:1:18 858:F8 2995         call  L1F8      	
2:1:30 870:51 2996         ynec  8         	
2:1:21 861:91 2997         br    S851      	
2:1:02 842:D5 2998 S842    call  S855      	
2:1:05 845:46 2999         tcy   6         	
2:1:0B 84B:0D 3000         setr            	
2:1:17 857:1C 3001         ldp   3         	
2:1:2E 86E:0B 3002         tpc             	
2:1:1C 85C:1D 3003         ldp   11        	
2:1:38 878:C5 3004         call  PLYDETH   	
2:1:31 871:46 3005         tcy   6         	
2:1:23 863:0C 3006         rstr            	
2:1:06 846:7F 3007         cla             	
2:1:0D 84D:0F 3008         retn            	
              3009 	
2:1:1B 85B:2A 3010 S85B    ldx   2         	
2:1:36 876:48 3011         tcy   1         	
2:1:2D 86D:3F 3012         mnez            	
2:1:1A 85A:AB 3013         br    S86B      	
2:1:34 874:44 3014         tcy   2         	
2:1:29 869:21 3015         tma             	
2:1:12 852:73 3016         a13aac          	
2:1:24 864:AB 3017         br    S86B      	
2:1:08 848:82 3018         br    S842      	
2:1:11 851:1F 3019 S851    ldp   15        	
2:1:22 862:E6 3020         call  LRANDOM   	
2:1:04 844:2D 3021         ldx   5         	
2:1:09 849:4C 3022         tcy   3         	
2:1:13 853:27 3023         tam             	
2:1:26 866:37 3024         rbit  3         	
2:1:0C 84C:35 3025         rbit  2         	
2:1:19 859:1F 3026         ldp   15        	
2:1:32 872:E6 3027         call  LRANDOM   	
2:1:25 865:14 3028         ldp   2         	
2:1:0A 84A:80 3029         br    L880      	
2:1:15 855:29 3030 S855    ldx   4         	
2:1:2A 86A:48 3031         tcy   1         	
2:1:14 854:60 3032         tcmiy 0         	
2:1:28 868:68 3033         tcmiy 1         	
2:1:10 850:1E 3034         ldp   7         	
2:1:20 860:93 3035         br    L9D3      ; Call SUBWARR	
              3036 	
              3037 ; *** Chapter 2 page 2	
              3038 	
2:2:00 880:2D 3039 L880    ldx   5         	
2:2:01 881:4D 3040         tcy   11        	
2:2:03 883:27 3041         tam             	
2:2:07 887:37 3042         rbit  3         	
2:2:0F 88F:35 3043         rbit  2         	
2:2:1F 89F:1F 3044         ldp   15        	
2:2:3F 8BF:D4 3045         call  LBD4      	
2:2:3E 8BE:40 3046         tcy   0         	
2:2:3D 8BD:60 3047         tcmiy 0         	
2:2:3B 8BB:D9 3048         call  LCP5TO4   	
2:2:37 8B7:B9 3049         br    S8B9      	
2:2:2F 8AF:27 3050 S8AF    tam             	
2:2:1E 89E:14 3051         ldp   2         	
2:2:3C 8BC:C9 3052         call  LSUMB10  	
2:2:39 8B9:2D 3053 S8B9    ldx   5         	
2:2:33 8B3:4C 3054         tcy   3         	
2:2:27 8A7:07 3055         dman            	
2:2:0E 88E:AF 3056         br    S8AF      	
2:2:1D 89D:D9 3057         call  LCP5TO4   	
2:2:3A 8BA:D5 3058         call  LCPBRIG   ; Copy Brigand count to 5/1-2 for calculations	
2:2:35 8B5:40 3059         tcy   0         	
2:2:2B 8AB:60 3060         tcmiy 0         	
2:2:16 896:C8 3061         call  LSWP4N5   	
2:2:2C 8AC:42 3062         tcy   4         	
2:2:18 898:27 3063 S898    tam             	
2:2:30 8B0:10 3064         ldp   0         	
2:2:21 8A1:0B 3065         tpc             	
2:2:02 882:13 3066         ldp   12        	
2:2:05 885:FF 3067         call  L33F      	
2:2:0B 88B:1C 3068         ldp   3         	
2:2:17 897:77 3069         dan             	
2:2:2E 8AE:BE 3070         br    L8FE      	
2:2:1C 89C:4D 3071         tcy   11        	
2:2:38 8B8:14 3072         ldp   2         	
2:2:31 8B1:07 3073         dman            	
2:2:23 8A3:98 3074         br    S898      	
2:2:06 886:27 3075         tam             	
2:2:0D 88D:C8 3076         call  LSWP4N5   	
2:2:1B 89B:D9 3077         call  LCP5TO4   	
2:2:36 8B6:C9 3078         call  LSUMB10  	
2:2:2D 8AD:C8 3079         call  LSWP4N5   	
2:2:1A 89A:C9 3080         call  LSUMB10  	
2:2:34 8B4:C9 3081         call  LSUMB10  	
2:2:29 8A9:21 3082         tma             	
2:2:12 892:1C 3083         ldp   3         	
2:2:24 8A4:80 3084         br    L8C0      	
              3085 	
2:2:08 888:18 3086 LSWP4N5 ldp   1         	
2:2:11 891:0B 3087         tpc             	
2:2:22 8A2:15 3088         ldp   10        	
2:2:04 884:82 3089         br    SWP4ND5   	
              3090 	
2:2:09 889:10 3091 LSUMB10 ldp   0         	
2:2:13 893:0B 3092         tpc             	
2:2:26 8A6:12 3093         ldp   4         	
2:2:0C 88C:BF 3094         br    SUMB10    	
              3095 	
2:2:19 899:18 3096 LCP5TO4 ldp   1         	
2:2:32 8B2:0B 3097         tpc             	
2:2:25 8A5:13 3098         ldp   12        	
2:2:0A 88A:A7 3099         br    CPY5TO4   	
              3100 	
2:2:15 895:10 3101 LCPBRIG ldp   0         	
2:2:2A 8AA:0B 3102         tpc             	
2:2:14 894:19 3103         ldp   9         	
2:2:28 8A8:89 3104         br    CPYBRIG   ; Copy Brigand count to 5/1-2 for calculations	
              3105 	
2:2:10 890:00 3106         mnea            	
2:2:20 8A0:00 3107         mnea            	
              3108 	
              3109 ; *** Chapter 2 page 3	
              3110 	
2:3:00 8C0:48 3111 L8C0    tcy   1         	
2:3:01 8C1:03 3112         xma             	
2:3:03 8C3:44 3113         tcy   2         	
2:3:07 8C7:27 3114         tam             	
2:3:0F 8CF:12 3115         ldp   4         	
2:3:1F 8DF:D3 3116         call  L913      ; Update the Brigand count from 5/1-2	
2:3:3F 8FF:BB 3117         br    S8FB      	
2:3:3E 8FE:18 3118 L8FE    ldp   1         	
2:3:3D 8FD:D5 3119         call  S855      	
2:3:3B 8FB:46 3120 S8FB    tcy   6         ; Light middle lamp	
2:3:37 8F7:0D 3121         setr            	
2:3:2F 8EF:C9 3122         call  S8C9      	
2:3:1E 8DE:1F 3123         ldp   15        	
2:3:3C 8FC:D4 3124         call  LBD4      	
2:3:39 8F9:F4 3125         call  5TODSPB   	
2:3:33 8F3:C8 3126         call  S8C8      	
2:3:27 8E7:46 3127         tcy   6         ; Turn off middle lamp	
2:3:0E 8CE:0C 3128         rstr            	
2:3:1D 8DD:4A 3129         tcy   5         ; Light lower lamp	
2:3:3A 8FA:0D 3130         setr            	
2:3:35 8F5:C9 3131         call  S8C9      	
2:3:2B 8EB:14 3132         ldp   2         	
2:3:16 8D6:D5 3133         call  LCPBRIG   ; Copy Brigand count to 5/1-2	
2:3:2C 8EC:F4 3134         call  5TODSPB   ; Copy Brigand count to display buffer at 7/14-15	
2:3:18 8D8:C8 3135         call  S8C8      	
2:3:30 8F0:4A 3136         tcy   5         ; Turn off lower lamp	
2:3:21 8E1:0C 3137         rstr            	
2:3:02 8C2:2D 3138         ldx   5         	
2:3:05 8C5:4D 3139         tcy   11        	
2:3:0B 8CB:3E 3140         imac            	
2:3:17 8D7:86 3141         br    S8C6      	
2:3:2E 8EE:1C 3142         ldp   3         	
2:3:1C 8DC:0B 3143         tpc             	
2:3:38 8F8:11 3144         ldp   8         	
2:3:31 8F1:EF 3145         call  PLYLOSR   ; Play the "lose round" sound	
2:3:23 8E3:AD 3146         br    S8ED      	
2:3:06 8C6:1C 3147 S8C6    ldp   3         	
2:3:0D 8CD:0B 3148         tpc             	
2:3:1B 8DB:1E 3149         ldp   7         	
2:3:36 8F6:CC 3150         call  PLYWINR   ; Play the "win round" sound	
2:3:2D 8ED:18 3151 S8ED    ldp   1         	
2:3:1A 8DA:80 3152         br    L840      	
2:3:34 8F4:10 3153 5TODSPB ldp   0         	
2:3:29 8E9:0B 3154         tpc             	
2:3:12 8D2:11 3155         ldp   8         	
2:3:24 8E4:A4 3156         br    BUF2DSP   ; Update display buffer with contents of 5/1 and 5/2	
2:3:08 8C8:10 3157 S8C8    ldp   0         	
2:3:11 8D1:0B 3158         tpc             	
2:3:22 8E2:19 3159         ldp   9         	
2:3:04 8C4:A7 3160         br    L267      	
              3161 	
2:3:09 8C9:1C 3162 S8C9    ldp   3         	
2:3:13 8D3:0B 3163         tpc             	
2:3:26 8E6:17 3164         ldp   14        	
2:3:0C 8CC:80 3165         br    LF80      	
2:3:19 8D9:18 3166 L8D9    ldp   1         	
2:3:32 8F2:0B 3167         tpc             	
2:3:25 8E5:1F 3168         ldp   15        	
2:3:0A 8CA:C0 3169         call  PLYOPEN   	
2:3:15 8D5:12 3170         ldp   4         	
2:3:2A 8EA:80 3171         br    L900      	
              3172 	
2:3:14 8D4:10 3173 L8D4    ldp   0         	
2:3:28 8E8:0B 3174         tpc             	
2:3:10 8D0:13 3175         ldp   12        	
2:3:20 8E0:96 3176         br    L316      ; Display awarded key	
              3177 	
              3178 ; *** Chapter 2 page 4	
              3179 	
2:4:00 900:1F 3180 L900    ldp   15        	
2:4:01 901:E6 3181         call  LRANDOM   	
2:4:03 903:7B 3182         a14aac          ; Add 14; is the result 0-1 (12.5%)?	
2:4:07 907:BD 3183         br    S93D      ; Nope	
2:4:0F 90F:18 3184         ldp   1         	
2:4:1F 91F:0B 3185         tpc             	
2:4:3F 93F:1F 3186         ldp   15        	
2:4:3E 93E:BC 3187         br    PLYCLOS   ; Nothing interesting in Tomb/Ruin--play the close sound	
              3188 	
2:4:3D 93D:7A 3189 S93D    a6aac           ; Add another 6; was the original value 2-9 (50%)?	
2:4:3B 93B:9D 3190         br    S91D      ; Nope	
2:4:37 937:10 3191 L937    ldp   0         	
2:4:2F 92F:C0 3192         call  L800      ; BRIGANDS!	
2:4:1E 91E:70 3193         iac             	
2:4:3C 93C:9D 3194         br    S91D      	
              3195 	
2:4:39 939:18 3196 S939    ldp   1         	
2:4:33 933:0B 3197         tpc             	
2:4:27 927:10 3198         ldp   0         	
2:4:0E 90E:8F 3199         br    ENDTURN   	
              3200 ;	
              3201 ; Always give player Gold if Tomb/Ruin has something in it (Brigands or otherwise)	
              3202 ;	
2:4:1D 91D:17 3203 S91D    ldp   14        	
2:4:3A 93A:C6 3204         call  LB86      ; Randomly award 13-20 Gold	
2:4:35 935:1E 3205         ldp   7         	
2:4:2B 92B:EA 3206         call  L9EA      ; Call ADDGOLD	
2:4:16 916:29 3207         ldx   4         	
2:4:2C 92C:4B 3208         tcy   13        	
2:4:18 918:35 3209         rbit  2         ; Flag that player Gold has changed	
2:4:30 930:10 3210         ldp   0         	
2:4:21 921:0B 3211         tpc             	
2:4:02 902:1A 3212         ldp   5         	
2:4:05 905:C0 3213         call  DSPRSLT   ; Display results	
              3214 	
2:4:0B 90B:1F 3215         ldp   15        	
2:4:17 917:E6 3216         call  LRANDOM   	
2:4:2E 92E:1A 3217         ldp   5         	
2:4:1C 91C:7A 3218         a6aac           ; Add 6; is the value 0-9 (62.5%)?	
2:4:38 938:BA 3219         br    L97A      ; Nope, maybe give them a Pegasus	
              3220 ;	
              3221 ; Award a key 62.5% of the time	
              3222 ;	
2:4:31 931:2A 3223         ldx   2         	
2:4:23 923:4C 3224         tcy   3         ; 2/3 = Current player key inventory and status	
2:4:06 906:12 3225         ldp   4         	
2:4:0D 90D:38 3226         tbit1 0         ; Key found in this region yet?	
2:4:1B 91B:9A 3227         br    S91A      ; Nope.  Let's give them one	
              3228 	
2:4:36 936:12 3229 S936    ldp   4         	
2:4:2D 92D:B9 3230         br    S939      ; Sorry, sucker.  End the turn	
              3231 	
2:4:1A 91A:21 3232 S91A    tma             ; Pick up the current key inventory	
2:4:34 934:06 3233         amaac           ; Check to see if they already have the Gold key (8 + 8 = overflow)	
2:4:29 929:B6 3234         br    S936      ; Yep - end the turn	
2:4:12 912:27 3235         tam             ; We doubled the previous value, effectively granting the next key; save it to their inventory	
2:4:24 924:7F 3236         cla             	
2:4:08 908:78 3237         a2aac           ; Accumulator = 2	
2:4:11 911:1A 3238         ldp   5         	
2:4:22 922:3B 3239         tbit1 3         ; Do they have the Gold key now?	
2:4:04 904:AF 3240         br    L96F      ; Yep, they must have just gotten it - show it as an award	
2:4:09 909:80 3241         br    L940      	
              3242 	
2:4:13 913:10 3243 L913    ldp   0         	
2:4:26 926:0B 3244         tpc             	
2:4:0C 90C:13 3245         ldp   12        	
2:4:19 919:8D 3246         br    L30D      ; Copy 5/1-2 to 3/12-13 - Results of Brigand math to Brigand count	
              3247 	
2:4:32 932:18 3248 L932    ldp   1         	
2:4:25 925:0B 3249         tpc             	
2:4:0A 90A:1A 3250         ldp   5         	
2:4:15 915:A9 3251         br    L569      ; Update the display with the current Brigand count	
              3252 	
              3253 ;********************************************************************************	
              3254 ; LADDB10 - Call the AD2B10 routine - Local to chapter 2	
              3255 ;********************************************************************************	
2:4:2A 92A:10 3256 LADDB10 ldp   0         	
2:4:14 914:0B 3257         tpc             	
2:4:28 928:12 3258         ldp   4         	
2:4:10 910:80 3259         br    AD2B10    	
2:4:20 920:00 3260         mnea            	
              3261 	
              3262 ; *** Chapter 2 page 5	
              3263 	
2:5:00 940:77 3264 L940    dan             	
2:5:01 941:39 3265         tbit1 2         ; Do they have the Silver key now?	
2:5:03 943:B3 3266         br    S973      ; Yep, they must have just gotten it, as they didn't have the Gold key - show it as an award	
              3267 ;	
              3268 ; Award a Brass key since it wasn't the Gold or Silver keys	
              3269 ;	
2:5:07 947:7F 3270         cla             	
2:5:0F 94F:29 3271         ldx   4         	
2:5:1F 95F:47 3272         tcy   14        	
2:5:3F 97F:35 3273         rbit  2         ; Brass key flag	
              3274 ;	
              3275 ; Treasure included a key - handle it	
              3276 ;	
2:5:3E 97E:1C 3277 S97E    ldp   3         	
2:5:3D 97D:D4 3278         call  L8D4      ; Display the key awarded	
2:5:3B 97B:12 3279 S97B    ldp   4         	
2:5:37 977:B9 3280         br    S939      ; ...and end the turn	
              3281 ;	
              3282 ; Award a Gold key	
              3283 ;	
2:5:2F 96F:29 3284 L96F    ldx   4         	
2:5:1E 95E:4F 3285         tcy   15        	
2:5:3C 97C:34 3286         rbit  0         ; Gold key flag	
2:5:39 979:BE 3287         br    S97E      	
              3288 ;	
              3289 ; Award a Silver key	
              3290 ;	
2:5:33 973:29 3291 S973    ldx   4         	
2:5:27 967:47 3292         tcy   14        	
2:5:0E 94E:37 3293         rbit  3         ; Silver key flag	
2:5:1D 95D:BE 3294         br    S97E      	
              3295 ;	
              3296 ; Award a Pegasus?	
              3297 ;	
2:5:3A 97A:7B 3298 L97A    a14aac          	
2:5:35 975:86 3299         br    S946      	
              3300 ;	
              3301 ; Yep	
              3302 ;	
2:5:2B 96B:42 3303         tcy   4         ; Dragon/Sword/Pegasus	
2:5:16 956:19 3304         ldp   9         	
2:5:2C 96C:C4 3305         call  ROTDRM3   	
2:5:18 958:4A 3306         tcy   5         ; Select lower lamp	
2:5:30 970:0D 3307         setr            ; Light it	
2:5:21 961:1C 3308         ldp   3         	
2:5:02 942:0B 3309         tpc             	
2:5:05 945:13 3310         ldp   12        	
2:5:0B 94B:CD 3311         call  PLYPEGA   	
2:5:17 957:4A 3312         tcy   5         ; Select lower lamp	
2:5:2E 96E:0C 3313         rstr            ; Turn it off	
2:5:1C 95C:29 3314         ldx   4         	
2:5:38 978:4F 3315         tcy   15        	
2:5:31 971:35 3316         rbit  2         ; Flag that Pegasus was found	
2:5:23 963:BB 3317         br    S97B      ; and end the turn	
              3318 ;	
              3319 ; Award a Dragonsword?	
              3320 ;	
2:5:06 946:7B 3321 S946    a14aac          	
2:5:0D 94D:99 3322         br    S959      	
              3323 ;	
              3324 ; Yep	
              3325 ;	
2:5:1B 95B:2C 3326         ldx   1         	
2:5:36 976:4C 3327         tcy   3         	
2:5:2D 96D:39 3328         tbit1 2         ; Check 1/3 bit 2.  Do they have one already?	
2:5:1A 95A:BB 3329         br    S97B      ; Sorry.  End turn.	
2:5:34 974:31 3330         sbit  2         	
2:5:29 969:42 3331         tcy   4         ; Dragon/Sword/Pegasus	
2:5:12 952:19 3332         ldp   9         	
2:5:24 964:C4 3333         call  ROTDRM3   	
2:5:08 948:10 3334         ldp   0         	
2:5:11 951:0B 3335         tpc             	
2:5:22 962:19 3336         ldp   9         	
2:5:04 944:CF 3337         call  LTMIDCL   ; Light up Sword	
2:5:09 949:29 3338         ldx   4         	
2:5:13 953:4F 3339         tcy   15        	
2:5:26 966:36 3340         rbit  1         ; Flag Sword found in encounter	
2:5:0C 94C:BB 3341         br    S97B      ; End turn	
              3342 ;	
              3343 ; Award a Wizard?	
              3344 ;	
2:5:19 959:2E 3345 S959    ldx   3         	
2:5:32 972:49 3346         tcy   9         	
2:5:25 965:21 3347         tma             ; Pick up number of players in the game	
2:5:0A 94A:7B 3348         a14aac          ; Is this a single-player game?	
2:5:15 955:94 3349         br    S954      ; There was a carry--yes	
2:5:2A 96A:BB 3350         br    S97B      ; Nope.  End turn	
              3351 ;	
              3352 ; Player is awarded a Wizard; handle selecting who will be cursed	
              3353 ;	
2:5:14 954:2E 3354 S954    ldx   3         	
2:5:28 968:4D 3355         tcy   11        	
2:5:10 950:16 3356         ldp   6         	
2:5:20 960:80 3357         br    L980      	
              3358 	
              3359 ; *** Chapter 2 page 6	
              3360 	
              3361 ;	
              3362 ; Curse continued	
              3363 ;	
2:6:00 980:21 3364 L980    tma             ; Get current player	
2:6:01 981:29 3365         ldx   4         	
2:6:03 983:27 3366         tam             ; Save current player in 4/11	
2:6:07 987:4A 3367         tcy   5         ; Wizard/Bazaar Closed/Key Missing	
2:6:0F 98F:19 3368         ldp   9         	
2:6:1F 99F:C4 3369         call  ROTDRM3   	
2:6:3F 9BF:10 3370         ldp   0         	
2:6:3E 9BE:0B 3371         tpc             	
2:6:3D 9BD:19 3372         ldp   9         	
2:6:3B 9BB:C0 3373         call  LTTOPCL   ; Light up Wizard and clear the display	
2:6:37 9B7:15 3374 S9B7    ldp   10        	
2:6:2F 9AF:CF 3375         call  ROTPLYR   ; Rotate player info	
2:6:1E 99E:29 3376         ldx   4         	
2:6:3C 9BC:4D 3377         tcy   11        	
2:6:39 9B9:00 3378         mnea            ; Make sure the player rotated in isn't the current player	
2:6:33 9B3:8E 3379         br    S98E      ; Got it	
2:6:27 9A7:B7 3380         br    S9B7      ; Nope, it is; don't want to curse ourselves.  Rotate again	
              3381 	
2:6:0E 98E:2E 3382 S98E    ldx   3         	
2:6:1D 99D:4D 3383         tcy   11        	
2:6:3A 9BA:21 3384         tma             ; Pick up target player	
2:6:35 9B5:2F 3385         ldx   7         	
2:6:2B 9AB:47 3386         tcy   14        	
2:6:16 996:6D 3387         tcmiy 11        ; 7/14 = 11 ("C")	
2:6:2C 9AC:27 3388         tam             ; 7/15 = Target player to curse	
2:6:18 998:10 3389 S998    ldp   0         	
2:6:30 9B0:0B 3390         tpc             	
2:6:21 9A1:1E 3391         ldp   7         	
2:6:02 982:CB 3392         call  PROMPT      	
2:6:05 985:51 3393         ynec  8         ; Did they hit No/End	
2:6:0B 98B:AE 3394         br    S9AE      ; Nope	
2:6:17 997:B7 3395         br    S9B7      	
              3396 	
2:6:2E 9AE:59 3397 S9AE    ynec  9         ; Did they hit Clear?	
2:6:1C 99C:A9 3398         br    S9A9      ; Nope	
2:6:38 9B8:15 3399 S9B8    ldp   10        	
2:6:31 9B1:CF 3400         call  ROTPLYR   	
2:6:23 9A3:29 3401         ldx   4         	
2:6:06 986:4D 3402         tcy   11        	
2:6:0D 98D:00 3403         mnea            ; Check that the player rotated in is the current player	
2:6:1B 99B:B8 3404         br    S9B8      ; Nope, rotate again	
2:6:36 9B6:18 3405         ldp   1         	
2:6:2D 9AD:0B 3406         tpc             	
2:6:1A 99A:18 3407         ldp   1         	
2:6:34 9B4:98 3408         br    DOCLEAR   	
2:6:29 9A9:50 3409 S9A9    ynec  0         ; Did they hit Yes/Buy	
2:6:12 992:98 3410         br    S998      ; Nope, try again	
              3411 ;	
              3412 ; We've got the right player rotated in; handle the curse	
              3413 ;	
2:6:24 9A4:28 3414         ldx   0         	
2:6:08 988:4C 3415         tcy   3         	
2:6:11 991:36 3416         rbit  1         ; 0/3 bit 1 - cleared - flag that player has been cursed	
2:6:22 9A2:1E 3417         ldp   7         	
2:6:04 984:F6 3418         call  L9F6      ; Call CPY0TO5	
2:6:09 989:14 3419         ldp   2         	
2:6:13 993:D9 3420         call  LCP5TO4   	
2:6:26 9A6:1E 3421         ldp   7         	
2:6:0C 98C:E9 3422         call  L9E9      	
2:6:19 999:44 3423         tcy   2         	
2:6:32 9B2:29 3424 S9B2    ldx   4         	
2:6:25 9A5:21 3425         tma             	
2:6:0A 98A:2B 3426         ldx   6         	
2:6:15 995:24 3427         tamdyn          	
2:6:2A 9AA:B2 3428         br    S9B2      	
2:6:14 994:1E 3429         ldp   7         	
2:6:28 9A8:D1 3430         call  L9D1      ; Call SUBGOLD	
2:6:10 990:1E 3431         ldp   7         	
2:6:20 9A0:80 3432         br    L9C0      	
              3433 	
              3434 ; *** Chapter 2 page 7	
              3435 	
2:7:00 9C0:1F 3436 L9C0    ldp   15        	
2:7:01 9C1:D4 3437         call  LBD4      	
2:7:03 9C3:14 3438         ldp   2         	
2:7:07 9C7:D9 3439         call  LCP5TO4   	
2:7:0F 9CF:E9 3440         call  L9E9      	
2:7:1F 9DF:14 3441         ldp   2         	
2:7:3F 9FF:C8 3442         call  LSWP4N5   	
2:7:3E 9FE:15 3443         ldp   10        	
2:7:3D 9FD:FD 3444         call  CPY5TO7   	
2:7:3B 9FB:14 3445         ldp   2         	
2:7:37 9F7:C8 3446         call  LSWP4N5   	
2:7:2F 9EF:D3 3447         call  L9D3      ; Call SUBWARR	
2:7:1E 9DE:15 3448         ldp   10        	
2:7:3C 9FC:DE 3449         call  CPY7TO5   	
2:7:39 9F9:14 3450         ldp   2         	
2:7:33 9F3:C8 3451         call  LSWP4N5   	
2:7:27 9E7:15 3452 S9E7    ldp   10        	
2:7:0E 9CE:CF 3453         call  ROTPLYR   	
2:7:1D 9DD:29 3454         ldx   4         	
2:7:3A 9FA:4D 3455         tcy   11        	
2:7:35 9F5:00 3456         mnea            	
2:7:2B 9EB:A7 3457         br    S9E7      	
2:7:16 9D6:F2 3458         call  S9F2      ; Call ADDWARR	
2:7:2C 9EC:44 3459         tcy   2         	
2:7:18 9D8:2B 3460 S9D8    ldx   6         	
2:7:30 9F0:21 3461         tma             	
2:7:21 9E1:29 3462         ldx   4         	
2:7:02 9C2:24 3463         tamdyn          	
2:7:05 9C5:98 3464         br    S9D8      	
2:7:0B 9CB:EA 3465         call  L9EA      ; Call ADDGOLD	
2:7:17 9D7:29 3466         ldx   4         	
2:7:2E 9EE:4B 3467         tcy   13        	
2:7:1C 9DC:34 3468         rbit  0         	
2:7:38 9F8:10 3469         ldp   0         	
2:7:31 9F1:0B 3470         tpc             	
2:7:23 9E3:1A 3471         ldp   5         	
2:7:06 9C6:C0 3472         call  DSPRSLT   ; Display results	
2:7:0D 9CD:12 3473         ldp   4         	
2:7:1B 9DB:B9 3474         br    S939      	
2:7:36 9F6:18 3475 L9F6    ldp   1         	
2:7:2D 9ED:0B 3476         tpc             	
2:7:1A 9DA:13 3477         ldp   12        	
2:7:34 9F4:97 3478         br    CPY0TO5   	
2:7:29 9E9:18 3479 L9E9    ldp   1         	
2:7:12 9D2:0B 3480         tpc             	
2:7:24 9E4:1D 3481         ldp   11        	
2:7:08 9C8:80 3482         br    L6C0      	
2:7:11 9D1:18 3483 L9D1    ldp   1         	
2:7:22 9E2:0B 3484         tpc             	
2:7:04 9C4:1A 3485         ldp   5         	
2:7:09 9C9:84 3486         br    SUBGOLD   	
2:7:13 9D3:18 3487 L9D3    ldp   1         	
2:7:26 9E6:0B 3488         tpc             	
2:7:0C 9CC:1A 3489         ldp   5         	
2:7:19 9D9:80 3490         br    SUBWARR   	
2:7:32 9F2:18 3491 S9F2    ldp   1         	
2:7:25 9E5:0B 3492         tpc             	
2:7:0A 9CA:15 3493         ldp   10        	
2:7:15 9D5:86 3494         br    ADDWARR   	
2:7:2A 9EA:18 3495 L9EA    ldp   1         	
2:7:14 9D4:0B 3496         tpc             	
2:7:28 9E8:16 3497         ldp   6         	
2:7:10 9D0:80 3498         br    ADDGOLD   	
2:7:20 9E0:00 3499         mnea            	
              3500 	
              3501 ; *** Chapter 2 page 8	
              3502 	
              3503 ;	
              3504 ; Attack the Dark Tower!  First, do The Riddle of the Keys.	
              3505 ;	
2:8:00 A00:3E 3506 LA00    imac            ; Are we in the final territory with all the keys?	
2:8:01 A01:BD 3507         br    SA3D      ; Yep	
              3508 ;	
              3509 ; They're missing some element.  Check to see if they have all of the keys yet or if they're just	
              3510 ; not back in their own territory (2/3 Bit 0 is still clear).	
              3511 ;	
2:8:03 A03:18 3512         ldp   1         	
2:8:07 A07:0B 3513         tpc             	
2:8:0F A0F:12 3514         ldp   4         	
2:8:1F A1F:70 3515         iac             	
2:8:3F A3F:85 3516         br    L505      ; They're not back in their own territory; play the failure sound and end turn	
2:8:3E A3E:AC 3517         br    KEYMISS        ; They're still missing a key	
              3518 ;	
              3519 ; Begin The Riddle of the Keys	
              3520 ;	
2:8:3D A3D:2D 3521 SA3D    ldx   5         	
2:8:3B A3B:43 3522         tcy   12        	
2:8:37 A37:67 3523         tcmiy 14        ; 5/12 = 14	
2:8:2F A2F:6F 3524         tcmiy 15        ; 5/13 = 15	
2:8:1E A1E:10 3525 LA1E    ldp   0         	
2:8:3C A3C:0B 3526         tpc             	
2:8:39 A39:11 3527         ldp   8         	
2:8:33 A33:E3 3528         call  RND0TO2   ; Start with a random key	
2:8:27 A27:89 3529         br    SA09      ; Propose it...	
              3530 ;	
              3531 ; Propose the key in A (0-2) to the player	
              3532 ;	
2:8:0E A0E:4D 3533 SA0E    tcy   11        	
2:8:1D A1D:27 3534         tam             ; Save the proposed key in 5/11	
2:8:3A A3A:1C 3535 SA3A    ldp   3         	
2:8:35 A35:D4 3536         call  L8D4      ; Show the proposed next key	
2:8:2B A2B:2D 3537         ldx   5         	
2:8:16 A16:43 3538         tcy   12        	
2:8:2C A2C:21 3539         tma             ; 5/12 has 14 for the first key, 15 for the second key (5/14 or 5/15)	
2:8:18 A18:74 3540         a3aac           ; Add 3 to bump it up to 1-2	
2:8:30 A30:2F 3541         ldx   7         	
2:8:21 A21:47 3542         tcy   14        	
2:8:02 A02:25 3543         tamiyc          ; 7/14 = which key sequence we're on	
2:8:05 A05:6F 3544         tcmiy 15        ; 7/15 = 15 (" ")	
              3545 ;	
              3546 ; Prompt user to use the key in the accumulator or not	
              3547 ;	
2:8:0B A0B:10 3548 SA0B    ldp   0         	
2:8:17 A17:0B 3549         tpc             	
2:8:2E A2E:1E 3550         ldp   7         	
2:8:1C A1C:CB 3551         call  PROMPT      	
              3552 	
2:8:38 A38:52 3553         ynec  4         ; Did they hit Repeat?	
2:8:31 A31:B6 3554         br    SA36      ; Nope	
2:8:23 A23:2D 3555         ldx   5         	
2:8:06 A06:4D 3556         tcy   11        	
2:8:0D A0D:21 3557         tma             ; Pick up the last proposed key	
2:8:1B A1B:BA 3558         br    SA3A      	
              3559 	
2:8:36 A36:59 3560 SA36    ynec  9         ; Did they hit Clear?	
2:8:2D A2D:A4 3561         br    SA24      ; Nope	
2:8:1A A1A:18 3562         ldp   1         	
2:8:34 A34:0B 3563         tpc             	
2:8:29 A29:18 3564         ldp   1         	
2:8:12 A12:98 3565         br    DOCLEAR   	
              3566 	
2:8:24 A24:51 3567 SA24    ynec  8         ; Did they hit No/End?	
2:8:08 A08:95 3568         br    SA15      ; Nope	
2:8:11 A11:2D 3569         ldx   5         	
2:8:22 A22:4D 3570         tcy   11        	
2:8:04 A04:21 3571         tma             ; Pick up the last proposed key	
              3572 ;	
              3573 ; Pick the next key to use...	
              3574 ;	
2:8:09 A09:77 3575 SA09    dan             ; Accumulator had the last key used	
2:8:13 A13:8C 3576         br    SA0C      	
2:8:26 A26:74 3577         a3aac           	
2:8:0C A0C:2D 3578 SA0C    ldx   5         	
2:8:19 A19:4B 3579         tcy   13        	
2:8:32 A32:00 3580         mnea            ; Is this the last key we tried?	
2:8:25 A25:8E 3581         br    SA0E      ; Nope, propose this key	
2:8:0A A0A:89 3582         br    SA09      ; Try the next key	
              3583 	
2:8:15 A15:50 3584 SA15    ynec  0         ; Did they hit Yes/Buy?	
2:8:2A A2A:8B 3585         br    SA0B      ; Nope, go back and prompt again	
2:8:14 A14:2D 3586         ldx   5         	
2:8:28 A28:4D 3587         tcy   11        	
2:8:10 A10:19 3588         ldp   9         	
2:8:20 A20:80 3589         br    LA40      	
              3590 	
              3591 ; *** Chapter 2 page 9	
              3592 	
              3593 ;	
              3594 ; They said "Yes, use this key here"	
              3595 ; Check the key sequence against The Riddle of the Keys	
              3596 ;	
2:9:00 A40:21 3597 LA40    tma             ; Pick up the last proposed key from 5/11	
2:9:01 A41:43 3598         tcy   12        ; 5/12 is the key we're trying (14 or 15 for 5/14 and 5/15)	
2:9:03 A43:22 3599         tmy             ; Pick up that address for an indirect comparsion	
2:9:07 A47:00 3600         mnea            ; Is this the right key?	
2:9:0F A4F:9E 3601         br    SA5E      ; Nope.  Wrong key.	
              3602 ;	
              3603 ; They did get the right key	
              3604 ;	
2:9:1F A5F:05 3605         iyc             ; Advance Y to the next key position	
2:9:3F A7F:9D 3606         br    SA5D      ; Y overflowed, they solved The Riddle of the Keys.  Storm the tower.	
              3607 ;	
              3608 ; First key is solved.  Update 5/12 to point to the second key storage location (5/15)	
              3609 ;	
2:9:3E A7E:43 3610         tcy   12        	
2:9:3D A7D:6F 3611         tcmiy 15        ; 5/12 = 15 (for 5/15)	
2:9:3B A7B:27 3612         tam             ; Save the key we just used in 5/13	
2:9:37 A77:11 3613         ldp   8         	
2:9:2F A6F:9E 3614         br    LA1E      ; Go back and prompt for the next key, choosing a random one	
              3615 ;	
              3616 ; Chose the wrong key	
              3617 ;	
2:9:1E A5E:1C 3618 SA5E    ldp   3         	
2:9:3C A7C:0B 3619         tpc             	
2:9:39 A79:1D 3620         ldp   11        	
2:9:33 A73:C0 3621         call  PLYFAIL   	
2:9:27 A67:12 3622         ldp   4         	
2:9:0E A4E:B9 3623         br    S939      ; Call ENDTURN	
              3624 ;	
              3625 ; They solved The Riddle of the Keys; fight the Final Battle	
              3626 ;	
2:9:1D A5D:CC 3627 SA5D    call  SA4C      	
2:9:3A A7A:10 3628         ldp   0         	
2:9:35 A75:F6 3629         call  L836      	
2:9:2B A6B:70 3630         iac             	
2:9:16 A56:B0 3631         br    SA70      	
2:9:2C A6C:12 3632         ldp   4         	
2:9:18 A58:B9 3633         br    S939      ; Call ENDTURN	
              3634 ;	
              3635 ; Handle Victory	
              3636 ;	
2:9:30 A70:46 3637 SA70    tcy   6         ; Victory/Warriors/Brigands	
2:9:21 A61:C4 3638         call  ROTDRM3   	
2:9:02 A42:4E 3639         tcy   7         ; Light upper lamp	
2:9:05 A45:0D 3640         setr            	
2:9:0B A4B:1C 3641         ldp   3         	
2:9:17 A57:0B 3642         tpc             	
2:9:2E A6E:10 3643         ldp   0         	
2:9:1C A5C:CC 3644         call  PLYTHEM      	
2:9:38 A78:4E 3645         tcy   7         	
2:9:31 A71:0C 3646         rstr            ; Turn off upper lamp	
              3647 ;	
              3648 ; Calculate the player's score and end the game	
              3649 ;	
2:9:23 A63:2A 3650         ldx   2         	
2:9:06 A46:18 3651         ldp   1         	
2:9:0D A4D:0B 3652         tpc             	
2:9:1B A5B:18 3653         ldp   1         	
2:9:36 A76:C6 3654         call  S446      ; Copy saved player Warriors back to current player	
2:9:2D A6D:CC 3655         call  SA4C      ; Copy Dark Tower Brigand count to Brigand battle count	
2:9:1A A5A:10 3656         ldp   0         	
2:9:34 A74:0B 3657         tpc             	
2:9:29 A69:19 3658         ldp   9         	
2:9:12 A52:C9 3659         call  CPYBRIG  ; Copy Brigand count to 5/1-2 for calculations	
2:9:24 A64:1C 3660         ldp   3         	
2:9:08 A48:0B 3661         tpc             	
2:9:11 A51:1F 3662         ldp   15        	
2:9:22 A62:BF 3663         br    LFFF      ; Finish calculating the score and end the game	
              3664 	
2:9:04 A44:10 3665 ROTDRM3 ldp   0         	
2:9:09 A49:0B 3666         tpc             	
2:9:13 A53:11 3667         ldp   8         	
2:9:26 A66:95 3668         br    ROTDRUM	
              3669 	
2:9:0C A4C:2E 3670 SA4C    ldx   3         	
2:9:19 A59:4F 3671         tcy   15        	
2:9:32 A72:21 3672 SA72    tma             	
2:9:25 A65:04 3673         dyn             	
2:9:0A A4A:04 3674         dyn             	
2:9:15 A55:25 3675         tamiyc          	
2:9:2A A6A:5B 3676         ynec  13        	
2:9:14 A54:B2 3677         br    SA72      	
2:9:28 A68:0F 3678         retn            	
              3679 	
2:9:10 A50:00 3680         mnea            	
2:9:20 A60:00 3681         mnea            	
              3682 	
              3683 ; *** Chapter 2 page 10	
              3684 	
              3685 ;********************************************************************************	
              3686 ; ROT7LFT - Call the routine to rotate the buffer of 2-digit Base10 values	
              3687 ;           left at 7/1-10, keeping track of the position at 7/11.	
              3688 ;********************************************************************************	
2:A:00 A80:10 3689 ROT7LFT ldp   0         	
2:A:01 A81:0B 3690         tpc             	
2:A:03 A83:1D 3691         ldp   11        	
2:A:07 A87:96 3692         br    L2D6      	
              3693 	
              3694 ;********************************************************************************	
              3695 ; ROTPLYR - Call the routine to rotate the next player's info into 	
              3696 ;           0/1-3, 1/1-3, 2/2-3	
              3697 ;********************************************************************************	
2:A:0F A8F:10 3698 ROTPLYR ldp   0         	
2:A:1F A9F:0B 3699         tpc             	
2:A:3F ABF:11 3700         ldp   8         	
2:A:3E ABE:80 3701         br    L200      	
              3702 	
              3703 ;********************************************************************************	
              3704 ; CPY5TO7 - Call the routine to copy 5/2-0 to 7/2-0	
              3705 ;********************************************************************************	
2:A:3D ABD:10 3706 CPY5TO7 ldp   0         	
2:A:3B ABB:0B 3707         tpc             	
2:A:37 AB7:15 3708         ldp   10        	
2:A:2F AAF:8C 3709         br    L28C      	
              3710 	
              3711 ;********************************************************************************	
              3712 ; CPY7TO5 - Call the routine to copy 7/2-0 to 5/2-0	
              3713 ;********************************************************************************	
2:A:1E A9E:10 3714 CPY7TO5 ldp   0         	
2:A:3C ABC:0B 3715         tpc             	
2:A:39 AB9:1D 3716         ldp   11        	
2:A:33 AB3:B3 3717         br    L2F3      	
              3718 ;	
              3719 ; Player is attacking the Dark Tower.  Play the attack sound and handle it	
              3720 ;	
2:A:27 AA7:1C 3721 LAA7    ldp   3         	
2:A:0E A8E:0B 3722         tpc             	
2:A:1D A9D:16 3723         ldp   6         	
2:A:3A ABA:FE 3724         call  PLYATTK      	
2:A:35 AB5:2A 3725         ldx   2         	
2:A:2B AAB:4C 3726         tcy   3         	
2:A:16 A96:11 3727         ldp   8         	
2:A:2C AAC:80 3728         br    LA00      	
              3729 ;	
              3730 ; Visit the Bazaar	
              3731 ;	
              3732 ; Start by filling in the "price buffer" at 7/1-10 with the prices of the various goods.	
              3733 ; Prices are recorded as two-digit Base10 values to facilitate display on the LED display.	
              3734 ;	
              3735 ; The order of buffer is: Warriors, Food, Beast, Scout, Healer	
              3736 ;	
              3737 ; Price values are set to:	
              3738 ;   - Warriors: 3-8 bags of gold	
              3739 ;   - Food: 1 bag of gold	
              3740 ;   - Beast, Scout, Healer: 17-26 bags of gold each	
              3741 ;	
2:A:18 A98:1C 3742 LA98    ldp   3         	
2:A:30 AB0:0B 3743         tpc             	
2:A:21 AA1:12 3744         ldp   4         	
2:A:02 A82:DD 3745         call  PLYBAZR   ; Play the Bazaar music to set the location for the player	
2:A:05 A85:2F 3746         ldx   7         	
2:A:0B A8B:4D 3747         tcy   11        	
2:A:17 A97:68 3748         tcmiy 1         ; 7/11 = 1 - Start at position 1	
2:A:2E AAE:1F 3749         ldp   15        	
              3750 ;	
              3751 ; Fill in position 1 with a random value from 3-8 (Warrior price)	
              3752 ;	
2:A:1C A9C:E6 3753         call  LRANDOM   	
2:A:38 AB8:29 3754         ldx   4         	
2:A:31 AB1:24 3755         tamdyn          ; 4/2 = Random	
2:A:23 AA3:60 3756         tcmiy 0         ; 4/1 = 0	
2:A:06 A86:37 3757         rbit  3         ; Reduce random value to 0-7	
2:A:0D A8D:35 3758         rbit  2         ; Reduce random value further to 0-3	
              3759 ;	
              3760 ; Add 5 to the random value	
              3761 ;	
2:A:1B A9B:2D 3762         ldx   5         	
2:A:36 AB6:48 3763         tcy   1         	
2:A:2D AAD:60 3764         tcmiy 0         ; 5/1 = 0	
2:A:1A A9A:6A 3765         tcmiy 5         ; 5/2 = 5	
2:A:34 AB4:12 3766         ldp   4         	
2:A:29 AA9:EA 3767         call  LADDB10   ; Call ADDB10 - Add 5 to the random value	
2:A:12 A92:FD 3768         call  CPY5TO7   ; Copy 5/2-0 to 7/2-0 - Save it in the 7 buffer	
2:A:24 AA4:C0 3769         call  ROT7LFT   ; Move on to the next price	
              3770 ;	
              3771 ; Fill in the next position with a 1 (Food price)	
              3772 ;	
2:A:08 A88:48 3773         tcy   1         	
2:A:11 A91:60 3774         tcmiy 0         ; 7/1 = 0	
2:A:22 AA2:68 3775         tcmiy 1         ; 7/2 = 1	
2:A:04 A84:C0 3776         call  ROT7LFT   ; Move on to the next price	
              3777 ;	
              3778 ; Fill in the remaining three positions with random values from 17-26 (Beast, Scout, Healer)	
              3779 ;	
2:A:09 A89:10 3780 SA89    ldp   0         	
2:A:13 A93:0B 3781         tpc             	
2:A:26 AA6:1D 3782         ldp   11        	
2:A:0C A8C:ED 3783         call  L2ED      ; Generate value from 17-26 and store in 5/1-2	
2:A:19 A99:FD 3784         call  CPY5TO7   ; Copy 5/2-0 to 7/2-0	
2:A:32 AB2:C0 3785         call  ROT7LFT   ; Move on to the next price	
2:A:25 AA5:4D 3786         tcy   11        	
2:A:0A A8A:22 3787         tmy             	
2:A:15 A95:58 3788         ynec  1         ; Have we filled in all five prices yet?	
2:A:2A AAA:89 3789         br    SA89      ; Nope	
              3790 	
              3791 ;	
              3792 ; Copy the price for the current item to 5/2-0 and show it	
              3793 ;	
2:A:14 A94:DE 3794 LA94    call  CPY7TO5   	
2:A:28 AA8:1D 3795         ldp   11        	
2:A:10 A90:80 3796         br    LAC0      	
2:A:20 AA0:00 3797         mnea            	
              3798 	
              3799 ; *** Chapter 2 page 11	
              3800 	
              3801 ;	
              3802 ; Handle Bazaar shopping	
              3803 ;	
2:B:00 AC0:1F 3804 LAC0    ldp   15        	
2:B:01 AC1:FD 3805         call  ROL5BY6   	
2:B:03 AC3:29 3806         ldx   4         	
2:B:07 AC7:43 3807         tcy   12        	
2:B:0F ACF:32 3808         sbit  1         ; 4/12 Bit 1 set - haven't yet haggled, give a better chance of succeeding	
              3809 ;	
              3810 ; Display what's for sale and its price then wait for a response	
              3811 ;	
2:B:1F ADF:1F 3812 SADF    ldp   15        	
2:B:3F AFF:DE 3813         call  DSPWARE   ; Show the player what's for sale...	
2:B:3E AFE:2F 3814 LAFE    ldx   7         	
2:B:3D AFD:47 3815         tcy   14        	
2:B:3B AFB:67 3816         tcmiy 14        ; 7/14 = 14 ("-")	
2:B:37 AF7:67 3817         tcmiy 14        ; 7/15 = 14 ("-")	
2:B:2F AEF:10 3818         ldp   0         	
2:B:1E ADE:0B 3819         tpc             	
              3820 ;	
              3821 ; Prompt the user for a response and process the key pressed	
              3822 ;	
2:B:3C AFC:1E 3823 SAFC    ldp   7         	
2:B:39 AF9:CB 3824         call  PROMPT      	
              3825 	
2:B:33 AF3:52 3826         ynec  4         ; Did they hit Repeat?	
2:B:27 AE7:9D 3827         br    SADD      ; Nope	
              3828 ;	
              3829 ; Handle player hitting Repeat	
              3830 ;	
2:B:0E ACE:9F 3831         br    SADF      ; Go back and display current item	
              3832 	
2:B:1D ADD:59 3833 SADD    ynec  9         ; Did they hit Clear?	
2:B:3A AFA:98 3834         br    SAD8      ; Nope	
              3835 ;	
              3836 ; Handle player hitting Clear	
              3837 ;	
2:B:35 AF5:18 3838         ldp   1         	
2:B:2B AEB:0B 3839         tpc             	
2:B:16 AD6:18 3840         ldp   1         	
2:B:2C AEC:98 3841         br    DOCLEAR   	
              3842 	
2:B:18 AD8:51 3843 SAD8    ynec  8         ; Did they hit No/End?	
2:B:30 AF0:84 3844         br    SAC4      ; Nope	
              3845 ;	
              3846 ; Handle player hitting No/End; display next item	
              3847 ;	
2:B:21 AE1:15 3848 SAE1    ldp   10        	
2:B:02 AC2:C0 3849         call  ROT7LFT   	
2:B:05 AC5:4D 3850         tcy   11        	
2:B:0B ACB:21 3851         tma             ; Check to see what item we're on	
2:B:17 AD7:73 3852         a13aac          ; Have we hit Beast/Scout/Healer?	
2:B:2E AEE:B1 3853         br    SAF1      ; Yes.  Check to see if player already has item in inventory	
2:B:1C ADC:15 3854 SADC    ldp   10        	
2:B:38 AF8:94 3855         br    LA94      ; Copy the price from 7/2-0 to 5/2-0 and show the wares	
              3856 ;	
              3857 ; We're looking at the Beast, Scout and Healer.  Don't show something they already have.	
              3858 ;	
              3859 ; As we added 13 to the current item in view, Acc is as follows:	
              3860 ;	
              3861 ; Acc = 0 - Beast	
              3862 ;       1 - Scout	
              3863 ;       2 - Healer	
              3864 ;	
2:B:31 AF1:2C 3865 SAF1    ldx   1         	
2:B:23 AE3:4C 3866         tcy   3         	
              3867 	
2:B:06 AC6:77 3868         dan             	
2:B:0D ACD:9A 3869         br    SADA      ; We're not on Beast	
2:B:1B ADB:38 3870         tbit1 0         ; Do they have a Beast?	
2:B:36 AF6:A1 3871         br    SAE1      ; Yes, advance to next item	
2:B:2D AED:9C 3872         br    SADC      ; Nope, go back and let them buy it	
              3873 	
2:B:1A ADA:77 3874 SADA    dan             	
2:B:34 AF4:88 3875         br    SAC8      ; We're not on Scout	
2:B:29 AE9:3B 3876         tbit1 3         ; Do they have a Scout?	
2:B:12 AD2:A1 3877         br    SAE1      ; Yes, advance to next item	
2:B:24 AE4:9C 3878         br    SADC      ; Nope, go back and let them buy it	
              3879 	
2:B:08 AC8:3A 3880 SAC8    tbit1 1         ; Do they have a Healer?	
2:B:11 AD1:A1 3881         br    SAE1      ; Yes, advance to next item	
2:B:22 AE2:9C 3882         br    SADC      ; Nope, go back and let them buy it	
              3883 	
2:B:04 AC4:13 3884 SAC4    ldp   12        	
2:B:09 AC9:58 3885         ynec  1         ; Did they hit Haggle?	
2:B:13 AD3:86 3886         br    LB06      ; Nope	
              3887 ;	
              3888 ; Haggle precheck	
              3889 ;	
              3890 ; Check to see that the price isn't already 1 bag of gold	
              3891 ;	
2:B:26 AE6:2D 3892         ldx   5         	
2:B:0C ACC:4C 3893         tcy   3         	
2:B:19 AD9:13 3894         ldp   12        	
2:B:32 AF2:3F 3895         mnez            ; Is 10s digit non-zero?	
2:B:25 AE5:BC 3896         br    LB3C      ; Yep.  We can haggle	
2:B:0A ACA:42 3897         tcy   4         ; Nope, check 1s digit...	
2:B:15 AD5:22 3898         tmy             	
2:B:2A AEA:58 3899         ynec  1         ; Is the current price more than 1 bag of gold?	
2:B:14 AD4:BC 3900         br    LB3C      ; Yeah.  We can haggle.	
2:B:28 AE8:80 3901         br    SB00      ; Price is already 1 bag of gold.  Fuck you.  Close Bazaar	
2:B:10 AD0:00 3902         mnea            	
2:B:20 AE0:00 3903         mnea            	
              3904 	
              3905 ; *** Chapter 2 page 12	
              3906 	
              3907 ;	
              3908 ; Fuck you.  I'm closing the Bazaar.	
              3909 ;	
2:C:00 B00:4A 3910 SB00    tcy   5         ; Wizard/Bazaar Closed/Key Missing	
2:C:01 B01:19 3911         ldp   9         	
2:C:03 B03:C4 3912         call  ROTDRM3   	
2:C:07 B07:46 3913         tcy   6         	
2:C:0F B0F:0D 3914         setr            ; Turn on middle lamp - Bazaar Closed	
2:C:1F B1F:1C 3915         ldp   3         	
2:C:3F B3F:0B 3916         tpc             	
2:C:3E B3E:1D 3917         ldp   11        	
2:C:3D B3D:C0 3918         call  PLYFAIL   	
2:C:3B B3B:46 3919         tcy   6         	
2:C:37 B37:0C 3920         rstr            ; Turn off middle lamp	
2:C:2F B2F:12 3921         ldp   4         	
2:C:1E B1E:B9 3922         br    S939      ; Call ENDTURN	
              3923 ;	
              3924 ; Haggle...	
              3925 ;	
              3926 ; Call RANDOM to get a random value in the Accumulator.  On 0-7, haggling succeeds (50% of the time)	
              3927 ; except when bit 1 of 4/12 is set.  Then it always fails.	
              3928 ;	
2:C:3C B3C:1F 3929 LB3C    ldp   15        	
2:C:39 B39:E6 3930         call  LRANDOM   	
2:C:33 B33:29 3931         ldx   4         	
2:C:27 B27:43 3932         tcy   12        	
2:C:0E B0E:3A 3933         tbit1 1         ; Check bit 1 of 4/12 - is this the first round of haggling?	
2:C:1D B1D:96 3934         br    SB16      ; It's set	
2:C:3A B3A:7E 3935         a8aac           ; 50% chance of haggling succeeding (roll of 0-7)	
2:C:35 B35:80 3936         br    SB00      ; Bazaar Closed on overflow	
2:C:2B B2B:B0 3937         br    SB30      	
              3938 ;	
              3939 ; First round of haggling has a better chance of succeeding.  4/12 bit 1 tracks.	
              3940 ;	
2:C:16 B16:36 3941 SB16    rbit  1         ; Clear 4/12 bit 1; this was your first chance, make it work for you...	
2:C:2C B2C:7C 3942         a4aac           ; 68.75% chance of succeeding on first round (roll of 0-11)	
2:C:18 B18:80 3943         br    SB00      ; Sorry, sucker	
              3944 ;	
              3945 ; Haggle succeeded.  Reduce the price by one bag of gold and update it in the buffer	
              3946 ;	
2:C:30 B30:29 3947 SB30    ldx   4         	
2:C:21 B21:48 3948         tcy   1         	
2:C:02 B02:60 3949         tcmiy 0         ; 4/1 = 0	
2:C:05 B05:68 3950         tcmiy 1         ; 4/2 = 1	
2:C:0B B0B:1F 3951         ldp   15        	
2:C:17 B17:C0 3952         call  ROL5BY2  	
2:C:2E B2E:EA 3953         call  SB2A      ; Subtract one from the price	
2:C:1C B1C:1F 3954         ldp   15        	
2:C:38 B38:FD 3955         call  ROL5BY6	
2:C:31 B31:1D 3956         ldp   11        	
2:C:23 B23:9F 3957         br    SADF      ; Go back and prompt with the updated price	
              3958 ;	
              3959 ; Bazaar keypress processing continues	
              3960 ;	
2:C:06 B06:1D 3961 LB06    ldp   11        	
2:C:0D B0D:50 3962         ynec  0         ; Did they hit Yes/Buy	
2:C:1B B1B:BE 3963         br    LAFE      ; Nope	
              3964 ;	
              3965 ; Handle Yes/Buy purchase	
              3966 ;	
2:C:36 B36:2D 3967         ldx   5         	
2:C:2D B2D:4A 3968         tcy   5         	
2:C:1A B1A:13 3969         ldp   12        	
2:C:34 B34:60 3970 SB34    tcmiy 0         	
2:C:29 B29:59 3971         ynec  9         	
2:C:12 B12:B4 3972         br    SB34      	
2:C:24 B24:1F 3973 LB24    ldp   15        	
2:C:08 B08:C0 3974         call  ROL5BY2   	
2:C:11 B11:14 3975         ldp   2         	
2:C:22 B22:D9 3976         call  LCP5TO4   	
2:C:04 B04:1F 3977         ldp   15        	
2:C:09 B09:C0 3978         call  ROL5BY2   	
2:C:13 B13:12 3979         ldp   4         	
2:C:26 B26:EA 3980         call  LADDB10   	
2:C:0C B0C:14 3981         ldp   2         	
2:C:19 B19:D9 3982         call  LCP5TO4   	
2:C:32 B32:1F 3983         ldp   15        	
2:C:25 B25:CF 3984         call  ROL5BY4   	
2:C:0A B0A:1B 3985         ldp   13        	
2:C:15 B15:80 3986         br    LB40      	
2:C:2A B2A:10 3987 SB2A    ldp   0         	
2:C:14 B14:0B 3988         tpc             	
2:C:28 B28:13 3989         ldp   12        	
2:C:10 B10:80 3990         br    SU2B10    	
2:C:20 B20:00 3991         mnea            	
              3992 	
              3993 ; *** Chapter 2 page 13	
              3994 	
2:D:00 B40:1E 3995 LB40    ldp   7         	
2:D:01 B41:F6 3996         call  L9F6      	
2:D:03 B43:13 3997         ldp   12        	
2:D:07 B47:EA 3998         call  SB2A      	
2:D:0F B4F:13 3999         ldp   12        	
2:D:1F B5F:3F 4000         mnez            	
2:D:3F B7F:80 4001         br    SB00      	
2:D:3E B7E:2F 4002         ldx   7         	
2:D:3D B7D:4D 4003         tcy   11        	
2:D:3B B7B:21 4004         tma             ; 7/11 - Current Bazaar item	
2:D:37 B77:1B 4005         ldp   13        	
2:D:2F B6F:73 4006         a13aac          	
2:D:1E B5E:93 4007         br    SB53      	
2:D:3C B7C:1F 4008         ldp   15        	
2:D:39 B79:FD 4009         call  ROL5BY6   	
2:D:33 B73:29 4010         ldx   4         	
2:D:27 B67:48 4011         tcy   1         	
2:D:0E B4E:60 4012         tcmiy 0         	
2:D:1D B5D:68 4013         tcmiy 1         	
2:D:3A B7A:12 4014         ldp   4         	
2:D:35 B75:EA 4015         call  LADDB10   	
2:D:2B B6B:14 4016         ldp   2         	
2:D:16 B56:D9 4017         call  LCP5TO4   	
2:D:2C B6C:1F 4018         ldp   15        	
2:D:18 B58:C0 4019         call  ROL5BY2   	
2:D:30 B70:14 4020 SB70    ldp   2         	
2:D:21 B61:C8 4021         call  LSWP4N5   	
2:D:02 B42:14 4022         ldp   2         	
2:D:05 B45:D9 4023         call  LCP5TO4   	
2:D:0B B4B:1C 4024         ldp   3         	
2:D:17 B57:F4 4025         call  5TODSPB   	
2:D:2E B6E:10 4026         ldp   0         	
2:D:1C B5C:0B 4027         tpc             	
2:D:38 B78:1E 4028         ldp   7         	
2:D:31 B71:CB 4029         call  PROMPT      	
2:D:23 B63:59 4030         ynec  9         ; Did the user hit Clear?	
2:D:06 B46:9A 4031         br    SB5A      ; Nope	
              4032 ;	
              4033 ; Handle the user hitting Clear	
              4034 ;	
2:D:0D B4D:18 4035         ldp   1         	
2:D:1B B5B:0B 4036         tpc             	
2:D:36 B76:18 4037         ldp   1         	
2:D:2D B6D:98 4038         br    DOCLEAR   	
              4039 	
2:D:1A B5A:50 4040 SB5A    ynec  0         ; Did the user hit Yes/Buy?	
2:D:34 B74:A4 4041         br    SB64      ; Nope	
              4042 ;	
              4043 ; Handle Yes/Buy	
              4044 ;	
2:D:29 B69:13 4045         ldp   12        	
2:D:12 B52:A4 4046         br    LB24      	
              4047 ;	
              4048 ; Handle Repeat	
              4049 ;	
2:D:24 B64:17 4050 SB64    ldp   14        	
2:D:08 B48:52 4051         ynec  4         ; Did the user hit Repeat?	
2:D:11 B51:80 4052         br    LB80      ; Nope	
2:D:22 B62:1F 4053         ldp   15        	
2:D:04 B44:DE 4054         call  DSPWARE   ; Display the Bazaar's wares	
2:D:09 B49:B0 4055         br    SB70      	
              4056 	
2:D:13 B53:2C 4057 SB53    ldx   1         	
2:D:26 B66:4C 4058         tcy   3         ; Player Scout/Sword/Healer/Beast inventory	
2:D:0C B4C:7B 4059         a14aac          ; Add 14 (0b1110)	
2:D:19 B59:A8 4060         br    SB68      ; They have a Scout, Sword or Healer	
2:D:32 B72:70 4061         iac             ; Add one more	
2:D:25 B65:AA 4062         br    SB6A      	
2:D:0A B4A:30 4063         sbit  0         	
2:D:15 B55:90 4064         br    SB50      	
2:D:2A B6A:33 4065 SB6A    sbit  3         	
2:D:14 B54:90 4066         br    SB50      	
2:D:28 B68:32 4067 SB68    sbit  1         ; Bit 1 - Healer	
2:D:10 B50:17 4068 SB50    ldp   14        	
2:D:20 B60:AB 4069         br    LBAB      	
              4070 	
              4071 ; *** Chapter 2 page 14	
              4072 	
2:E:00 B80:1B 4073 LB80    ldp   13        	
2:E:01 B81:51 4074         ynec  8         	
2:E:03 B83:B0 4075         br    SB70      	
2:E:07 B87:1F 4076         ldp   15        	
2:E:0F B8F:FD 4077         call  ROL5BY6   	
2:E:1F B9F:14 4078         ldp   2         	
2:E:3F BBF:D9 4079         call  LCP5TO4   	
2:E:3E BBE:1F 4080         ldp   15        	
2:E:3D BBD:C0 4081         call  ROL5BY2   	
2:E:3B BBB:2F 4082         ldx   7         	
2:E:37 BB7:4D 4083         tcy   11        	
2:E:2F BAF:21 4084         tma             ; 7/11 - Current Bazaar item	
2:E:1E B9E:7B 4085         a14aac          	
2:E:3C BBC:8E 4086         br    SB8E      	
2:E:39 BB9:1E 4087         ldp   7         	
2:E:33 BB3:F2 4088         call  S9F2      	
2:E:27 BA7:AB 4089         br    LBAB      	
2:E:0E B8E:18 4090 SB8E    ldp   1         	
2:E:1D B9D:0B 4091         tpc             	
2:E:3A BBA:15 4092         ldp   10        	
2:E:35 BB5:CE 4093         call  ADDFOOD   	
              4094 	
2:E:2B BAB:1F 4095 LBAB    ldp   15        	
2:E:16 B96:CF 4096         call  ROL5BY4   	
2:E:2C BAC:14 4097         ldp   2         	
2:E:18 B98:D9 4098         call  LCP5TO4   	
2:E:30 BB0:1E 4099         ldp   7         	
2:E:21 BA1:D1 4100         call  L9D1      ; Call SUBGOLD	
2:E:02 B82:29 4101         ldx   4         	
2:E:05 B85:4B 4102         tcy   13        	
2:E:0B B8B:35 4103         rbit  2         ; Flag that Gold changed during encounter	
2:E:17 B97:10 4104         ldp   0         	
2:E:2E BAE:0B 4105         tpc             	
2:E:1C B9C:1A 4106         ldp   5         	
2:E:38 BB8:C0 4107         call  DSPRSLT   ; Display results	
2:E:31 BB1:12 4108         ldp   4         	
2:E:23 BA3:B9 4109         br    S939      	
              4110 	
2:E:06 B86:1F 4111 LB86    ldp   15        	
2:E:0D B8D:E6 4112         call  LRANDOM   ; Call RANDOM.  Random value in A; Y=2	
2:E:1B B9B:29 4113         ldx   4         	
2:E:36 BB6:24 4114         tamdyn          ; 4/2 = random value	
2:E:2D BAD:60 4115         tcmiy 0         ; 4/1 = 0	
2:E:1A B9A:37 4116         rbit  3         ; Ensure random number is 0-7	
2:E:34 BB4:2D 4117         ldx   5         	
2:E:29 BA9:48 4118         tcy   1         	
2:E:12 B92:68 4119         tcmiy 1         ; 5/1 = 1	
2:E:24 BA4:6C 4120         tcmiy 3         ; 5/2 = 3	
2:E:08 B88:12 4121         ldp   4         	
2:E:11 B91:EA 4122         call  LADDB10   ; Add 4/1-2 to 5/1-2 - Give value of 13-20	
2:E:22 BA2:14 4123         ldp   2         	
2:E:04 B84:99 4124         br    LCP5TO4   ; Copy result to 4	
              4125 	
2:E:09 B89:77 4126 LB89    dan             	
2:E:13 B93:D4 4127         call  SB94      ; Zero out 5/0-2	
2:E:26 BA6:3F 4128         mnez            ; Check for overflow	
2:E:0C B8C:E5 4129         call  SBA5      ; Yep.  Cap it at 99	
2:E:19 B99:12 4130         ldp   4         	
2:E:32 BB2:B2 4131         br    L932      ; Display the current Brigand count	
              4132 	
2:E:25 BA5:48 4133 SBA5    tcy   1         	
2:E:0A B8A:69 4134         tcmiy 9         	
2:E:15 B95:69 4135         tcmiy 9         	
2:E:2A BAA:0F 4136         retn            	
              4137 	
2:E:14 B94:60 4138 SB94    tcmiy 0         	
2:E:28 BA8:60 4139         tcmiy 0         	
2:E:10 B90:60 4140         tcmiy 0         	
2:E:20 BA0:0F 4141         retn            	
              4142 	
              4143 	
              4144 ; *** Chapter 2 page 15	
              4145 	
              4146 ;********************************************************************************	
              4147 ; ROL5BY2 - Call the routine to rotate the buffer at 5/8-1 left 2 times	
              4148 ;********************************************************************************	
2:F:00 BC0:10 4149 ROL5BY2 ldp   0         	
2:F:01 BC1:0B 4150         tpc             	
2:F:03 BC3:1D 4151         ldp   11        	
2:F:07 BC7:8F 4152         br    L2CF      	
              4153 ;********************************************************************************	
              4154 ; ROL5BY4 - Call the routine to rotate the buffer at 5/8-1 left 4 times	
              4155 ;********************************************************************************	
2:F:0F BCF:10 4156 ROL5BY4 ldp   0         	
2:F:1F BDF:0B 4157         tpc             	
2:F:3F BFF:1D 4158         ldp   11        	
2:F:3E BFE:83 4159         br    L2C3      	
              4160 ;********************************************************************************	
              4161 ; ROL5BY6 - Call the routine to rotate the buffer at 5/8-1 left 6 times	
              4162 ;********************************************************************************	
2:F:3D BFD:10 4163 ROL5BY6 ldp   0         	
2:F:3B BFB:0B 4164         tpc             	
2:F:37 BF7:1D 4165         ldp   11        	
2:F:2F BEF:80 4166         br    L2C0      	
              4167 	
              4168 ;********************************************************************************	
              4169 ; DISPWARE - Display the Bazaar merchant's wares	
              4170 ;********************************************************************************	
2:F:1E BDE:C0 4171 DSPWARE call  ROL5BY2   	
2:F:3C BFC:1C 4172         ldp   3         	
2:F:39 BF9:F4 4173         call  5TODSPB   	
2:F:33 BF3:FD 4174         call  ROL5BY6   	
2:F:27 BE7:2F 4175         ldx   7         	
2:F:0E BCE:4D 4176         tcy   11        	
2:F:1D BDD:21 4177         tma             ; Pick up the current Bazaar item being looked at	
              4178 	
2:F:3A BFA:7D 4179         a12aac          	
2:F:35 BF5:B6 4180         br    SBF6      	
2:F:2B BEB:48 4181         tcy   1         ; Warrior/Food/Beast	
2:F:16 BD6:19 4182         ldp   9         	
2:F:2C BEC:C4 4183         call  ROTDRM3   	
2:F:18 BD8:2F 4184         ldx   7         	
2:F:30 BF0:4D 4185         tcy   11        	
2:F:21 BE1:21 4186         tma             	
              4187 	
2:F:02 BC2:73 4188         a13aac          	
2:F:05 BC5:A2 4189         br    SBE2      	
2:F:0B BCB:70 4190         iac             	
2:F:17 BD7:A3 4191         br    SBE3      	
2:F:2E BEE:10 4192 SBEE    ldp   0         	
2:F:1C BDC:0B 4193         tpc             	
2:F:38 BF8:19 4194         ldp   9         	
2:F:31 BF1:81 4195         br    L241      	
2:F:23 BE3:10 4196 SBE3    ldp   0         	
2:F:06 BC6:0B 4197         tpc             	
2:F:0D BCD:19 4198         ldp   9         	
2:F:1B BDB:9F 4199         br    L25F      	
              4200 	
2:F:36 BF6:44 4201 SBF6    tcy   2         ; Scout/Healer/Gold	
2:F:2D BED:19 4202         ldp   9         	
2:F:1A BDA:C4 4203         call  ROTDRM3   	
2:F:34 BF4:2F 4204         ldx   7         	
2:F:29 BE9:4D 4205         tcy   11        	
2:F:12 BD2:21 4206         tma             	
              4207 	
2:F:24 BE4:75 4208         a11aac          	
2:F:08 BC8:A3 4209         br    SBE3      	
2:F:11 BD1:AE 4210         br    SBEE      	
2:F:22 BE2:10 4211 SBE2    ldp   0         	
2:F:04 BC4:0B 4212         tpc             	
2:F:09 BC9:19 4213         ldp   9         	
2:F:13 BD3:BB 4214         br    L27B      	
              4215 	
2:F:26 BE6:10 4216 LRANDOM ldp   0         	
2:F:0C BCC:0B 4217         tpc             	
2:F:19 BD9:1C 4218         ldp   3         	
2:F:32 BF2:80 4219         br    RANDOM    	
              4220 	
2:F:25 BE5:10 4221 LBE5    ldp   0         	
2:F:0A BCA:0B 4222         tpc             	
2:F:15 BD5:11 4223         ldp   8         	
2:F:2A BEA:8D 4224         br    L20D      	
2:F:14 BD4:18 4225 LBD4    ldp   1         	
2:F:28 BE8:0B 4226         tpc             	
2:F:10 BD0:16 4227         ldp   6         	
2:F:20 BE0:B2 4228         br    CPY2TO5   	
              4229 	
              4230 ; *** Chapter 3 page 0	
              4231 	
              4232 	
              4233 ;********************************************************************************	
              4234 ; PLAYBUF - Play the sound buffer loaded in the Scratchpad RAM region	
              4235 ;	
              4236 ; 4/Y and 5/Y have array of durations	
              4237 ; 6/Y and 7/Y have array of pitches	
              4238 ; Notes are loaded in reverse order from Y=(0-10) down to 0	
              4239 ;	
              4240 ; Called with Y register pointing to first note plus 1	
              4241 ;********************************************************************************	
3:0:00 C00:23 4242 PLAYBUF tya             ; Transfer the Y register to the Accumulator	
3:0:01 C01:77 4243         dan             ; Subtract one from Accumulator to point to beginning of sound buffer at 4/Y	
3:0:03 C03:2E 4244         ldx   3         	
3:0:07 C07:45 4245         tcy   10        	
3:0:0F C0F:27 4246 SC0F    tam             ; Save updated pointer into sound buffer into 3/10	
3:0:1F C1F:22 4247         tmy             	
3:0:3F C3F:29 4248         ldx   4         ; Check 4/Y	
3:0:3E C3E:3F 4249         mnez            	
3:0:3D C3D:BA 4250         br    SC3A      ; There's a non-zero value here, play it	
              4251 	
3:0:3B C3B:2D 4252         ldx   5         ; Check 5/Y	
3:0:37 C37:3F 4253         mnez            	
3:0:2F C2F:BA 4254         br    SC3A      ; There's a non-zero value here, play it	
3:0:1E C1E:18 4255         ldp   1         	
3:0:3C C3C:9F 4256         br    LC5F      ; There's a zero here... play silence (a rest)	
              4257 	
3:0:39 C39:00 4258 SC39    mnea            	
3:0:33 C33:00 4259         mnea            	
3:0:27 C27:00 4260         mnea            	
3:0:0E C0E:00 4261         mnea            	
3:0:1D C1D:27 4262 SC1D    tam             	
              4263 	
3:0:3A C3A:45 4264 SC3A    tcy   10        ; Select the speaker R output	
3:0:35 C35:0D 4265         setr            ; Toggle the speaker on	
3:0:2B C2B:00 4266         mnea            	
3:0:16 C16:00 4267         mnea            	
3:0:2C C2C:00 4268         mnea            	
3:0:18 C18:00 4269         mnea            	
3:0:30 C30:2E 4270         ldx   3         	
3:0:21 C21:0C 4271         rstr            ; Toggle the speaker off	
3:0:02 C02:22 4272         tmy             ; Restore the note we were playing	
              4273 ;	
              4274 ; Load delay from 6/Y and 7/Y into A and Y respectively and delay for that many loops	
              4275 ;	
              4276 ; This adjusts the time between toggles of the speaker	
              4277 ;	
3:0:05 C05:2B 4278         ldx   6         	
3:0:0B C0B:21 4279         tma             	
3:0:17 C17:2F 4280         ldx   7         	
3:0:2E C2E:22 4281         tmy             	
3:0:1C C1C:04 4282 SC1C    dyn             	
3:0:38 C38:9C 4283         br    SC1C      	
3:0:31 C31:77 4284         dan             	
3:0:23 C23:9C 4285         br    SC1C      	
              4286 ;	
              4287 ; Restore the note we're on into the Y register	
              4288 ;	
3:0:06 C06:2E 4289         ldx   3         	
3:0:0D C0D:45 4290         tcy   10        	
3:0:1B C1B:22 4291         tmy             	
              4292 ;	
              4293 ; Loop based on 5/Y and 4/Y, playing the note repeatedly.  This gives duration.	
              4294 ;	
3:0:36 C36:2D 4295         ldx   5         	
3:0:2D C2D:07 4296         dman            	
3:0:1A C1A:B9 4297         br    SC39      	
3:0:34 C34:27 4298         tam             	
3:0:29 C29:29 4299         ldx   4         	
3:0:12 C12:07 4300         dman            	
3:0:24 C24:9D 4301         br    SC1D      	
              4302 ;	
              4303 ; Note has been played for requested duration, decrement 3/10 and loop	
              4304 ;	
3:0:08 C08:2E 4305 LC08    ldx   3         	
3:0:11 C11:45 4306         tcy   10        	
3:0:22 C22:07 4307         dman            	
3:0:04 C04:8F 4308         br    SC0F      	
3:0:09 C09:0F 4309         retn            	
              4310 	
3:0:13 C13:11 4311 LC13    ldp   8         	
3:0:26 C26:AF 4312         br    PLYLOSR   ; Play the "lose round" sound	
              4313 	
              4314 ;********************************************************************************	
              4315 ; PLYTHEM - Play the theme song (start of game and victory over Dark Tower)	
              4316 ;********************************************************************************	
3:0:0C C0C:2B 4317 PLYTHEM ldx   6         	
3:0:19 C19:40 4318         tcy   0         ; 6/0 - 7 1 8 0 11 0 8 1 11 1 8	
3:0:32 C32:6E 4319         tcmiy 7         	
3:0:25 C25:68 4320         tcmiy 1         	
3:0:0A C0A:61 4321         tcmiy 8         	
3:0:15 C15:60 4322         tcmiy 0         	
3:0:2A C2A:6D 4323         tcmiy 11        	
3:0:14 C14:60 4324         tcmiy 0         	
3:0:28 C28:61 4325         tcmiy 8         	
3:0:10 C10:18 4326         ldp   1         	
3:0:20 C20:8D 4327         br    LC4D      	
              4328 	
              4329 	
              4330 ; *** Chapter 3 page 1	
              4331 	
              4332 ;	
              4333 ; More of the PLAYBUF routine.  Code responsible for playing silence (a rest)	
              4334 ;	
3:1:00 C40:00 4335 SC40    mnea            	
3:1:01 C41:00 4336         mnea            	
3:1:03 C43:00 4337         mnea            	
3:1:07 C47:00 4338         mnea            	
3:1:0F C4F:27 4339 SC4F    tam             	
              4340 	
              4341 ;	
              4342 ; Play a "zero" note - silence	
              4343 ;	
3:1:1F C5F:7F 4344 LC5F    cla             	
3:1:3F C7F:77 4345         dan             	
3:1:3E C7E:00 4346 SC7E    mnea            	
3:1:3D C7D:00 4347         mnea            	
3:1:3B C7B:00 4348         mnea            	
3:1:37 C77:00 4349         mnea            	
3:1:2F C6F:00 4350         mnea            	
3:1:1E C5E:77 4351         dan             	
3:1:3C C7C:BE 4352         br    SC7E      	
3:1:39 C79:2F 4353         ldx   7         	
3:1:33 C73:07 4354         dman            	
3:1:27 C67:80 4355         br    SC40      	
3:1:0E C4E:27 4356         tam             	
3:1:1D C5D:2B 4357         ldx   6         	
3:1:3A C7A:07 4358         dman            	
3:1:35 C75:8F 4359         br    SC4F      	
3:1:2B C6B:10 4360         ldp   0         	
3:1:16 C56:88 4361         br    LC08      ; Go back and play the next note	
              4362 	
              4363 ;********************************************************************************	
              4364 ; PLYTICK - Play tick sound on keypress	
              4365 ;********************************************************************************	
3:1:2C C6C:2F 4366 PLYTICK ldx   7         	
3:1:18 C58:40 4367         tcy   0         ; 7/0 - 0	
3:1:30 C70:60 4368         tcmiy 0         	
3:1:21 C61:2B 4369         ldx   6         	
3:1:02 C42:40 4370         tcy   0         ; 6/0 - 4	
3:1:05 C45:62 4371         tcmiy 4         	
3:1:0B C4B:2D 4372         ldx   5         	
3:1:17 C57:40 4373         tcy   0         ; 5/0 - 1	
3:1:2E C6E:68 4374         tcmiy 1         	
3:1:1C C5C:29 4375         ldx   4         	
3:1:38 C78:40 4376         tcy   0         ; 4/0 - 0	
3:1:31 C71:60 4377         tcmiy 0         	
3:1:23 C63:10 4378         ldp   0         	
3:1:06 C46:80 4379         br    PLAYBUF   ; Play the tick sound and return to caller	
              4380 	
              4381 ;********************************************************************************	
              4382 ; Continue loading play buffer for part 1 of intro tune	
              4383 ;********************************************************************************	
3:1:0D C4D:68 4384 LC4D    tcmiy 1         	
3:1:1B C5B:6D 4385         tcmiy 11        	
3:1:36 C76:68 4386         tcmiy 1         	
3:1:2D C6D:61 4387         tcmiy 8         	
3:1:1A C5A:2F 4388         ldx   7         	
3:1:34 C74:40 4389         tcy   0         ; 7/0 - 5 0 11 1 13 1 11 0 13 0 11	
3:1:29 C69:6A 4390         tcmiy 5         	
3:1:12 C52:60 4391         tcmiy 0         	
3:1:24 C64:6D 4392         tcmiy 11        	
3:1:08 C48:68 4393         tcmiy 1         	
3:1:11 C51:6B 4394         tcmiy 13        	
3:1:22 C62:68 4395         tcmiy 1         	
3:1:04 C44:6D 4396         tcmiy 11        	
3:1:09 C49:60 4397         tcmiy 0         	
3:1:13 C53:6B 4398         tcmiy 13        	
3:1:26 C66:60 4399         tcmiy 0         	
3:1:0C C4C:6D 4400         tcmiy 11        	
3:1:19 C59:29 4401         ldx   4         	
3:1:32 C72:40 4402         tcy   0         ; 4/0 - 6 0 2 0 1 0 2 1 0 4 0 6	
3:1:25 C65:66 4403         tcmiy 6         	
3:1:0A C4A:60 4404         tcmiy 0         	
3:1:15 C55:64 4405         tcmiy 2         	
3:1:2A C6A:60 4406         tcmiy 0         	
3:1:14 C54:68 4407         tcmiy 1         	
3:1:28 C68:60 4408         tcmiy 0         	
3:1:10 C50:14 4409         ldp   2         	
3:1:20 C60:80 4410         br    LC80      	
              4411 	
              4412 ; *** Chapter 3 page 2	
              4413 	
3:2:00 C80:68 4414 LC80    tcmiy 1         	
3:2:01 C81:60 4415         tcmiy 0         	
3:2:03 C83:62 4416         tcmiy 4         	
3:2:07 C87:60 4417         tcmiy 0         	
3:2:0F C8F:66 4418         tcmiy 6         	
3:2:1F C9F:2D 4419         ldx   5         	
3:2:3F CBF:40 4420         tcy   0         ; 5/0 - 0 0 2 0 10 0 10 0 4 0 0	
3:2:3E CBE:60 4421         tcmiy 0         	
3:2:3D CBD:60 4422         tcmiy 0         	
3:2:3B CBB:64 4423         tcmiy 2         	
3:2:37 CB7:60 4424         tcmiy 0         	
3:2:2F CAF:65 4425         tcmiy 10        	
3:2:1E C9E:60 4426         tcmiy 0         	
3:2:3C CBC:65 4427         tcmiy 10        	
3:2:39 CB9:60 4428         tcmiy 0         	
3:2:33 CB3:62 4429         tcmiy 4         	
3:2:27 CA7:60 4430         tcmiy 0         	
3:2:0E C8E:60 4431         tcmiy 0         	
3:2:1D C9D:10 4432         ldp   0         	
3:2:3A CBA:C0 4433         call  PLAYBUF   ; Play part 1 of intro tune	
              4434 	
              4435 ;********************************************************************************	
              4436 ; Load play buffer for part 2 of intro tune	
              4437 ;********************************************************************************	
3:2:35 CB5:2B 4438         ldx   6         	
3:2:2B CAB:40 4439         tcy   0         ; 6/0 - 1 5 1 7 0 8 0 7 1 8 1	
3:2:16 C96:68 4440         tcmiy 1         	
3:2:2C CAC:6A 4441         tcmiy 5         	
3:2:18 C98:68 4442         tcmiy 1         	
3:2:30 CB0:6E 4443         tcmiy 7         	
3:2:21 CA1:60 4444         tcmiy 0         	
3:2:02 C82:61 4445         tcmiy 8         	
3:2:05 C85:60 4446         tcmiy 0         	
3:2:0B C8B:6E 4447         tcmiy 7         	
3:2:17 C97:68 4448         tcmiy 1         	
3:2:2E CAE:61 4449         tcmiy 8         	
3:2:1C C9C:68 4450         tcmiy 1         	
3:2:38 CB8:2F 4451         ldx   7         	
3:2:31 CB1:40 4452         tcy   0         ; 7/0 - 0 10 0 3 1 11 1 5 0 11 0	
3:2:23 CA3:60 4453         tcmiy 0         	
3:2:06 C86:65 4454         tcmiy 10        	
3:2:0D C8D:60 4455         tcmiy 0         	
3:2:1B C9B:6C 4456         tcmiy 3         	
3:2:36 CB6:68 4457         tcmiy 1         	
3:2:2D CAD:6D 4458         tcmiy 11        	
3:2:1A C9A:68 4459         tcmiy 1         	
3:2:34 CB4:6A 4460         tcmiy 5         	
3:2:29 CA9:60 4461         tcmiy 0         	
3:2:12 C92:6D 4462         tcmiy 11        	
3:2:24 CA4:60 4463         tcmiy 0         	
3:2:08 C88:29 4464         ldx   4         	
3:2:11 C91:40 4465         tcy   0         ; 4/0 - 0 8 0 2 0 1 0 1 0 4 0	
3:2:22 CA2:60 4466         tcmiy 0         	
3:2:04 C84:61 4467         tcmiy 8         	
3:2:09 C89:60 4468         tcmiy 0         	
3:2:13 C93:64 4469         tcmiy 2         	
3:2:26 CA6:60 4470         tcmiy 0         	
3:2:0C C8C:68 4471         tcmiy 1         	
3:2:19 C99:60 4472         tcmiy 0         	
3:2:32 CB2:68 4473         tcmiy 1         	
3:2:25 CA5:60 4474         tcmiy 0         	
3:2:0A C8A:62 4475         tcmiy 4         	
3:2:15 C95:60 4476         tcmiy 0         	
3:2:2A CAA:2D 4477         ldx   5         	
3:2:14 C94:40 4478         tcy   0         ; 5/0 - 3 0 0 2 0 10 0 10 0 5 0	
3:2:28 CA8:60 4479         tcmiy 0         	
3:2:10 C90:1C 4480         ldp   3         	
3:2:20 CA0:80 4481         br    LCC0      	
              4482 	
              4483 ; *** Chapter 3 page 3	
              4484 	
3:3:00 CC0:60 4485 LCC0    tcmiy 0         	
3:3:01 CC1:60 4486         tcmiy 0         	
3:3:03 CC3:64 4487         tcmiy 2         	
3:3:07 CC7:60 4488         tcmiy 0         	
3:3:0F CCF:65 4489         tcmiy 10        	
3:3:1F CDF:60 4490         tcmiy 0         	
3:3:3F CFF:65 4491         tcmiy 10        	
3:3:3E CFE:60 4492         tcmiy 0         	
3:3:3D CFD:6A 4493         tcmiy 5         	
3:3:3B CFB:60 4494         tcmiy 0         	
3:3:37 CF7:10 4495         ldp   0         	
3:3:2F CEF:C0 4496         call  PLAYBUF   ; Play part 2 of the intro tune	
              4497 	
              4498 ;********************************************************************************	
              4499 ; Load play buffer for part 3 of intro tune	
              4500 ;********************************************************************************	
3:3:1E CDE:2B 4501         ldx   6         	
3:3:3C CFC:40 4502         tcy   0         ; 6/0 - 6 1 8 0 11 0 8 1 11	
3:3:39 CF9:66 4503         tcmiy 6         	
3:3:33 CF3:68 4504         tcmiy 1         	
3:3:27 CE7:61 4505         tcmiy 8         	
3:3:0E CCE:60 4506         tcmiy 0         	
3:3:1D CDD:6D 4507         tcmiy 11        	
3:3:3A CFA:60 4508         tcmiy 0         	
3:3:35 CF5:61 4509         tcmiy 8         	
3:3:2B CEB:68 4510         tcmiy 1         	
3:3:16 CD6:6D 4511         tcmiy 11        	
3:3:2C CEC:2F 4512         ldx   7         	
3:3:18 CD8:40 4513         tcy   0         ; 7/0 - 13 0 11 1 13 1 11 0 13	
3:3:30 CF0:6B 4514         tcmiy 13        	
3:3:21 CE1:60 4515         tcmiy 0         	
3:3:02 CC2:6D 4516         tcmiy 11        	
3:3:05 CC5:68 4517         tcmiy 1         	
3:3:0B CCB:6B 4518         tcmiy 13        	
3:3:17 CD7:68 4519         tcmiy 1         	
3:3:2E CEE:6D 4520         tcmiy 11        	
3:3:1C CDC:60 4521         tcmiy 0         	
3:3:38 CF8:6B 4522         tcmiy 13        	
3:3:31 CF1:29 4523         ldx   4         	
3:3:23 CE3:40 4524         tcy   0         ; 4/0 - 15 0 2 0 1 0 2 0 3	
3:3:06 CC6:6F 4525         tcmiy 15        	
3:3:0D CCD:60 4526         tcmiy 0         	
3:3:1B CDB:64 4527         tcmiy 2         	
3:3:36 CF6:60 4528         tcmiy 0         	
3:3:2D CED:68 4529         tcmiy 1         	
3:3:1A CDA:60 4530         tcmiy 0         	
3:3:34 CF4:64 4531         tcmiy 2         	
3:3:29 CE9:60 4532         tcmiy 0         	
3:3:12 CD2:6C 4533         tcmiy 3         	
3:3:24 CE4:2D 4534         ldx   5         	
3:3:08 CC8:40 4535         tcy   0         ; 5/0 - 15 0 2 0 10 0 2 0 4	
3:3:11 CD1:6F 4536         tcmiy 15        	
3:3:22 CE2:60 4537         tcmiy 0         	
3:3:04 CC4:64 4538         tcmiy 2         	
3:3:09 CC9:60 4539         tcmiy 0         	
3:3:13 CD3:65 4540         tcmiy 10        	
3:3:26 CE6:60 4541         tcmiy 0         	
3:3:0C CCC:64 4542         tcmiy 2         	
3:3:19 CD9:60 4543         tcmiy 0         	
3:3:32 CF2:62 4544         tcmiy 4         	
3:3:25 CE5:10 4545         ldp   0         	
3:3:0A CCA:80 4546         br    PLAYBUF   ; Play part 3 of the intro tune and return to the caller	
              4547 	
              4548 ;********************************************************************************	
              4549 ; PLAYEOT - Play the end of turn sound (three tones)	
              4550 ;********************************************************************************	
3:3:15 CD5:2B 4551 PLAYEOT ldx   6         	
3:3:2A CEA:40 4552         tcy   0         ; 6/0 - 1 3 6	
3:3:14 CD4:68 4553         tcmiy 1         	
3:3:28 CE8:6C 4554         tcmiy 3         	
3:3:10 CD0:12 4555         ldp   4         	
3:3:20 CE0:80 4556         br    LD00      	
              4557 	
              4558 ; *** Chapter 3 page 4	
              4559 	
3:4:00 D00:66 4560 LD00    tcmiy 6         	
3:4:01 D01:2F 4561         ldx   7         	
3:4:03 D03:40 4562         tcy   0         ; 7/0 - 3 0 11	
3:4:07 D07:6C 4563         tcmiy 3         	
3:4:0F D0F:60 4564         tcmiy 0         	
3:4:1F D1F:6D 4565         tcmiy 11        	
3:4:3F D3F:29 4566         ldx   4         	
3:4:3E D3E:40 4567         tcy   0         ; 4/0 - 8 4 2	
3:4:3D D3D:61 4568         tcmiy 8         	
3:4:3B D3B:62 4569         tcmiy 4         	
3:4:37 D37:64 4570         tcmiy 2         	
3:4:2F D2F:2D 4571         ldx   5         	
3:4:1E D1E:40 4572         tcy   0         ; 5/0 - 0 0 0	
3:4:3C D3C:60 4573         tcmiy 0         	
3:4:39 D39:60 4574         tcmiy 0         	
3:4:33 D33:60 4575         tcmiy 0         	
3:4:27 D27:10 4576         ldp   0         	
3:4:0E D0E:80 4577         br    PLAYBUF   ; Play the EOT sound and return to caller	
              4578 	
              4579 ;********************************************************************************	
              4580 ; PLYBAZR - Play Bazaar snake charmer tune	
              4581 ;********************************************************************************	
3:4:1D D1D:2B 4582 PLYBAZR ldx   6         	
3:4:3A D3A:40 4583         tcy   0         ; 6/0 - 6 5 6 7 6 5 6 7 9	
3:4:35 D35:66 4584         tcmiy 6         	
3:4:2B D2B:6A 4585         tcmiy 5         	
3:4:16 D16:66 4586         tcmiy 6         	
3:4:2C D2C:6E 4587         tcmiy 7         	
3:4:18 D18:66 4588         tcmiy 6         	
3:4:30 D30:6A 4589         tcmiy 5         	
3:4:21 D21:66 4590         tcmiy 6         	
3:4:02 D02:6E 4591         tcmiy 7         	
3:4:05 D05:69 4592         tcmiy 9         	
3:4:0B D0B:2F 4593         ldx   7         	
3:4:17 D17:40 4594         tcy   0         ; 7/0 - 3 15 3 10 3 15 3 10 7	
3:4:2E D2E:6C 4595         tcmiy 3         	
3:4:1C D1C:6F 4596         tcmiy 15        	
3:4:38 D38:6C 4597         tcmiy 3         	
3:4:31 D31:65 4598         tcmiy 10        	
3:4:23 D23:6C 4599         tcmiy 3         	
3:4:06 D06:6F 4600         tcmiy 15        	
3:4:0D D0D:6C 4601         tcmiy 3         	
3:4:1B D1B:65 4602         tcmiy 10        	
3:4:36 D36:6E 4603         tcmiy 7         	
3:4:2D D2D:29 4604         ldx   4         	
3:4:1A D1A:40 4605         tcy   0         ; 4/0 - 10 5 5 5 5 5 5 5 5 5	
3:4:34 D34:65 4606         tcmiy 10        	
3:4:29 D29:6A 4607 SD29    tcmiy 5         	
3:4:12 D12:59 4608         ynec  9         	
3:4:24 D24:A9 4609         br    SD29      	
3:4:08 D08:2D 4610         ldx   5         	
3:4:11 D11:40 4611         tcy   0         ; 5/0 - 0 0 0 0 0 0 0 0 0 0	
3:4:22 D22:60 4612 SD22    tcmiy 0         	
3:4:04 D04:59 4613         ynec  9         	
3:4:09 D09:A2 4614         br    SD22      	
3:4:13 D13:10 4615         ldp   0         	
3:4:26 D26:C0 4616         call  PLAYBUF   ; Play part 1 of tune	
              4617 	
3:4:0C D0C:2B 4618 LD0C    ldx   6         	
3:4:19 D19:40 4619         tcy   0         ; 6/0 - 15	
3:4:32 D32:6F 4620         tcmiy 15        	
3:4:25 D25:2F 4621         ldx   7         	
3:4:0A D0A:40 4622         tcy   0         ; 7/0 - 15	
3:4:15 D15:6F 4623         tcmiy 15        	
3:4:2A D2A:29 4624         ldx   4         	
3:4:14 D14:40 4625         tcy   0         ; 4/0 - 0	
3:4:28 D28:60 4626         tcmiy 0         	
3:4:10 D10:1A 4627         ldp   5         	
3:4:20 D20:80 4628         br    LD40      	
              4629 	
              4630 ; *** Chapter 3 page 5	
              4631 	
3:5:00 D40:2D 4632 LD40    ldx   5         	
3:5:01 D41:40 4633         tcy   0         ; 5/0 - 0	
3:5:03 D43:60 4634         tcmiy 0         	
3:5:07 D47:10 4635         ldp   0         	
3:5:0F D4F:80 4636         br    PLAYBUF   ; Play part 2 of tune and return to caller	
              4637 	
              4638 ;********************************************************************************	
              4639 ; PLYSANC - Play the Sanctuary / Citadel sound	
              4640 ;********************************************************************************	
3:5:1F D5F:CE 4641 PLYSANC call  SD4E      	
3:5:3F D7F:CE 4642         call  SD4E      	
3:5:3E D7E:CE 4643         call  SD4E      	
3:5:3D D7D:CE 4644         call  SD4E      	
3:5:3B D7B:CE 4645         call  SD4E      	
3:5:37 D77:E9 4646         call  SD69      	
3:5:2F D6F:E9 4647         call  SD69      	
3:5:1E D5E:E9 4648         call  SD69      	
3:5:3C D7C:E9 4649         call  SD69      	
3:5:39 D79:E9 4650         call  SD69      	
3:5:33 D73:12 4651         ldp   4         	
3:5:27 D67:8C 4652         br    LD0C      	
              4653 	
              4654 ;	
              4655 ; First half of Sanctuary / Citadel sound 	
              4656 ;	
3:5:0E D4E:2B 4657 SD4E    ldx   6         	
3:5:1D D5D:40 4658         tcy   0         ; 6/0 - 0 0 1 0 0 1 0 0 1 	
3:5:3A D7A:60 4659 SD7A    tcmiy 0         	
3:5:35 D75:60 4660         tcmiy 0         	
3:5:2B D6B:68 4661         tcmiy 1         	
3:5:16 D56:59 4662         ynec  9         	
3:5:2C D6C:BA 4663         br    SD7A      	
3:5:18 D58:2F 4664         ldx   7         	
3:5:30 D70:40 4665         tcy   0         ; 7/0 - 10 14 4 10 14 4 10 14 4 	
3:5:21 D61:65 4666 SD61    tcmiy 10        	
3:5:02 D42:67 4667         tcmiy 14        	
3:5:05 D45:62 4668         tcmiy 4         	
3:5:0B D4B:59 4669         ynec  9         	
3:5:17 D57:A1 4670         br    SD61      	
3:5:2E D6E:29 4671         ldx   4         	
3:5:1C D5C:40 4672         tcy   0         ; 4/0 - 1 1 1 1 1 1 1 1 1	
3:5:38 D78:68 4673 SD78    tcmiy 1         	
3:5:31 D71:59 4674         ynec  9         	
3:5:23 D63:B8 4675         br    SD78      	
3:5:06 D46:2D 4676         ldx   5         	
3:5:0D D4D:40 4677         tcy   0         ; 5/0 - 10 10 10 10 10 10 10 10 10	
3:5:1B D5B:65 4678 SD5B    tcmiy 10        	
3:5:36 D76:59 4679         ynec  9         	
3:5:2D D6D:9B 4680         br    SD5B      	
3:5:1A D5A:10 4681         ldp   0         	
3:5:34 D74:80 4682         br    PLAYBUF      	
              4683 	
              4684 ;	
              4685 ; Second half of Sanctuary / Citadel sound	
              4686 ;	
3:5:29 D69:2B 4687 SD69    ldx   6         	
3:5:12 D52:40 4688         tcy   0         ; 6/0 - 0 0 1 0 0 1 0 0 1 	
3:5:24 D64:60 4689 SD64    tcmiy 0         	
3:5:08 D48:60 4690         tcmiy 0         	
3:5:11 D51:68 4691         tcmiy 1         	
3:5:22 D62:59 4692         ynec  9         	
3:5:04 D44:A4 4693         br    SD64      	
3:5:09 D49:2F 4694         ldx   7         ; 7/0 - 9 15 4 9 15 4 9 15 4 	
3:5:13 D53:40 4695         tcy   0         	
3:5:26 D66:69 4696 SD66    tcmiy 9         	
3:5:0C D4C:6F 4697         tcmiy 15        	
3:5:19 D59:62 4698         tcmiy 4         	
3:5:32 D72:59 4699         ynec  9         	
3:5:25 D65:A6 4700         br    SD66      	
3:5:0A D4A:29 4701         ldx   4         	
3:5:15 D55:40 4702         tcy   0         ; 4/0 - 1 1 1 1 1 1 1 1 1 	
3:5:2A D6A:68 4703 SD6A    tcmiy 1         	
3:5:14 D54:59 4704         ynec  9         	
3:5:28 D68:AA 4705         br    SD6A      	
3:5:10 D50:16 4706         ldp   6         	
3:5:20 D60:80 4707         br    LD80      	
              4708 	
              4709 ; *** Chapter 3 page 6	
              4710 	
3:6:00 D80:2D 4711 LD80    ldx   5         	
3:6:01 D81:40 4712         tcy   0         ; 5/0 - 10 10 10 10 10 10 10 10 10 	
3:6:03 D83:65 4713 SD83    tcmiy 10        	
3:6:07 D87:59 4714         ynec  9         	
3:6:0F D8F:83 4715         br    SD83      	
3:6:1F D9F:10 4716         ldp   0         	
3:6:3F DBF:80 4717         br    PLAYBUF      	
              4718 	
              4719 ;********************************************************************************	
              4720 ; PLYATTK - Play the Dark Tower attack song	
              4721 ;********************************************************************************	
3:6:3E DBE:2B 4722 PLYATTK ldx   6         	
3:6:3D DBD:40 4723         tcy   0         ; 6/0 - 2 8 2 7 2 6 2 7 2 8	
3:6:3B DBB:64 4724         tcmiy 2         	
3:6:37 DB7:61 4725         tcmiy 8         	
3:6:2F DAF:64 4726         tcmiy 2         	
3:6:1E D9E:6E 4727         tcmiy 7         	
3:6:3C DBC:64 4728         tcmiy 2         	
3:6:39 DB9:66 4729         tcmiy 6         	
3:6:33 DB3:64 4730         tcmiy 2         	
3:6:27 DA7:6E 4731         tcmiy 7         	
3:6:0E D8E:64 4732         tcmiy 2         	
3:6:1D D9D:61 4733         tcmiy 8         	
3:6:3A DBA:2F 4734         ldx   7         	
3:6:35 DB5:40 4735         tcy   0         ; 7/0 - 1 8 1 10 1 11 1 10 1 8	
3:6:2B DAB:68 4736         tcmiy 1         	
3:6:16 D96:61 4737         tcmiy 8         	
3:6:2C DAC:68 4738         tcmiy 1         	
3:6:18 D98:65 4739         tcmiy 10        	
3:6:30 DB0:68 4740         tcmiy 1         	
3:6:21 DA1:6D 4741         tcmiy 11        	
3:6:02 D82:68 4742         tcmiy 1         	
3:6:05 D85:65 4743         tcmiy 10        	
3:6:0B D8B:68 4744         tcmiy 1         	
3:6:17 D97:61 4745         tcmiy 8         	
3:6:2E DAE:29 4746         ldx   4         ; 4/0 - 0 2 0 2 0 2 0 2 0 2	
3:6:1C D9C:40 4747         tcy   0         	
3:6:38 DB8:60 4748 SDB8    tcmiy 0         	
3:6:31 DB1:64 4749         tcmiy 2         	
3:6:23 DA3:55 4750         ynec  10        	
3:6:06 D86:B8 4751         br    SDB8      	
3:6:0D D8D:2D 4752         ldx   5         ; 5/0 - 0 0 0 0 0 0 0 0 0 0	
3:6:1B D9B:40 4753         tcy   0         	
3:6:36 DB6:60 4754 SDB6    tcmiy 0         	
3:6:2D DAD:55 4755         ynec  10        	
3:6:1A D9A:B6 4756         br    SDB6      	
3:6:34 DB4:10 4757         ldp   0         	
3:6:29 DA9:C0 4758         call  PLAYBUF      	
              4759 	
3:6:12 D92:2B 4760         ldx   6         	
3:6:24 DA4:40 4761         tcy   0         ; 6/0 - 8 2 8 9 6 2 7	
3:6:08 D88:61 4762         tcmiy 8         	
3:6:11 D91:64 4763         tcmiy 2         	
3:6:22 DA2:61 4764         tcmiy 8         	
3:6:04 D84:69 4765         tcmiy 9         	
3:6:09 D89:66 4766         tcmiy 6         	
3:6:13 D93:64 4767         tcmiy 2         	
3:6:26 DA6:6E 4768         tcmiy 7         	
3:6:0C D8C:2F 4769         ldx   7         ; 7/0 - 0 8 1 8 2 11 1 10	
3:6:19 D99:40 4770         tcy   0         	
3:6:32 DB2:61 4771         tcmiy 8         	
3:6:25 DA5:68 4772         tcmiy 1         	
3:6:0A D8A:61 4773         tcmiy 8         	
3:6:15 D95:64 4774         tcmiy 2         	
3:6:2A DAA:6D 4775         tcmiy 11        	
3:6:14 D94:68 4776         tcmiy 1         	
3:6:28 DA8:65 4777         tcmiy 10        	
3:6:10 D90:1E 4778         ldp   7         	
3:6:20 DA0:80 4779         br    LDC0      	
              4780 	
              4781 ; *** Chapter 3 page 7	
              4782 	
3:7:00 DC0:29 4783 LDC0    ldx   4         ; 4/0 - 11 0 5 0 1 0 2	
3:7:01 DC1:40 4784         tcy   0         	
3:7:03 DC3:6D 4785         tcmiy 11        	
3:7:07 DC7:60 4786         tcmiy 0         	
3:7:0F DCF:6A 4787         tcmiy 5         	
3:7:1F DDF:60 4788         tcmiy 0         	
3:7:3F DFF:68 4789         tcmiy 1         	
3:7:3E DFE:60 4790         tcmiy 0         	
3:7:3D DFD:64 4791         tcmiy 2         	
3:7:3B DFB:2D 4792         ldx   5         ; 5/0 - 0 0 0 0 8 0 0	
3:7:37 DF7:40 4793         tcy   0         	
3:7:2F DEF:60 4794 SDEF    tcmiy 0         	
3:7:1E DDE:52 4795         ynec  4         	
3:7:3C DFC:AF 4796         br    SDEF      	
3:7:39 DF9:61 4797         tcmiy 8         	
3:7:33 DF3:60 4798         tcmiy 0         	
3:7:27 DE7:60 4799         tcmiy 0         	
3:7:0E DCE:10 4800         ldp   0         	
3:7:1D DDD:C0 4801         call  PLAYBUF      	
              4802 	
3:7:3A DFA:12 4803         ldp   4         	
3:7:35 DF5:8C 4804         br    LD0C      	
              4805 	
              4806 ;********************************************************************************	
              4807 ; PLYBUGL - Play bugle call for brigand attack	
              4808 ;********************************************************************************	
3:7:2B DEB:2B 4809 PLYBUGL ldx   6         	
3:7:16 DD6:40 4810         tcy   0         ; 6/0 - 1 3 2 1 3	
3:7:2C DEC:68 4811         tcmiy 1         	
3:7:18 DD8:6C 4812         tcmiy 3         	
3:7:30 DF0:64 4813         tcmiy 2         	
3:7:21 DE1:68 4814         tcmiy 1         	
3:7:02 DC2:6C 4815         tcmiy 3         	
3:7:05 DC5:2F 4816         ldx   7         	
3:7:0B DCB:40 4817         tcy   0         ; 7/0 - 14 3 0 14 3	
3:7:17 DD7:67 4818         tcmiy 14        	
3:7:2E DEE:6C 4819         tcmiy 3         	
3:7:1C DDC:60 4820         tcmiy 0         	
3:7:38 DF8:67 4821         tcmiy 14        	
3:7:31 DF1:6C 4822         tcmiy 3         	
3:7:23 DE3:29 4823         ldx   4         	
3:7:06 DC6:40 4824         tcy   0         ; 4/0 - 15 5 0 15 5	
3:7:0D DCD:6F 4825         tcmiy 15        	
3:7:1B DDB:6A 4826         tcmiy 5         	
3:7:36 DF6:60 4827         tcmiy 0         	
3:7:2D DED:6F 4828         tcmiy 15        	
3:7:1A DDA:6A 4829         tcmiy 5         	
3:7:34 DF4:2D 4830         ldx   5         	
3:7:29 DE9:40 4831         tcy   0         ; 5/0 - 10 0 0 10 0 	
3:7:12 DD2:65 4832         tcmiy 10        	
3:7:24 DE4:60 4833         tcmiy 0         	
3:7:08 DC8:60 4834         tcmiy 0         	
3:7:11 DD1:65 4835         tcmiy 10        	
3:7:22 DE2:60 4836         tcmiy 0         	
3:7:04 DC4:10 4837         ldp   0         	
3:7:09 DC9:C0 4838         call  PLAYBUF      	
3:7:13 DD3:12 4839         ldp   4         	
3:7:26 DE6:8C 4840         br    LD0C      	
              4841 	
              4842 ;********************************************************************************	
              4843 ; PLYWINR - Play low/high tones when player wins a round against Brigands	
              4844 ;********************************************************************************	
3:7:0C DCC:2B 4845 PLYWINR ldx   6         	
3:7:19 DD9:40 4846         tcy   0         ; 6/0 - 4 6	
3:7:32 DF2:62 4847         tcmiy 4         	
3:7:25 DE5:66 4848         tcmiy 6         	
3:7:0A DCA:2F 4849         ldx   7         	
3:7:15 DD5:40 4850         tcy   0         ; 7/0 - 5 12	
3:7:2A DEA:6A 4851         tcmiy 5         	
3:7:14 DD4:63 4852         tcmiy 12        	
3:7:28 DE8:29 4853         ldx   4         	
3:7:10 DD0:11 4854         ldp   8         	
3:7:20 DE0:80 4855         br    LE00      	
              4856 	
              4857 ; *** Chapter 3 page 8	
              4858 	
3:8:00 E00:40 4859 LE00    tcy   0         ; 4/0 - 11 5	
3:8:01 E01:6D 4860         tcmiy 11        	
3:8:03 E03:6A 4861         tcmiy 5         	
3:8:07 E07:2D 4862         ldx   5         	
3:8:0F E0F:40 4863         tcy   0         ; 5/0 - 0 0 0	
3:8:1F E1F:60 4864         tcmiy 0         	
3:8:3F E3F:60 4865         tcmiy 0         	
3:8:3E E3E:10 4866         ldp   0         	
3:8:3D E3D:C0 4867         call  PLAYBUF      	
3:8:3B E3B:12 4868         ldp   4         	
3:8:37 E37:8C 4869         br    LD0C      	
              4870 	
              4871 ;********************************************************************************	
              4872 ; PLYLOSR - Play high/low tones when player loses a round against Brigands	
              4873 ;********************************************************************************	
3:8:2F E2F:2B 4874 PLYLOSR ldx   6         	
3:8:1E E1E:40 4875         tcy   0         ; 6/0 - 9 6	
3:8:3C E3C:69 4876         tcmiy 9         	
3:8:39 E39:66 4877         tcmiy 6         	
3:8:33 E33:2F 4878         ldx   7         	
3:8:27 E27:40 4879         tcy   0         ; 7/0 - 7 11	
3:8:0E E0E:6E 4880         tcmiy 7         	
3:8:1D E1D:6D 4881         tcmiy 11        	
3:8:3A E3A:29 4882         ldx   4         	
3:8:35 E35:40 4883         tcy   0         ; 4/0 - 8 10	
3:8:2B E2B:61 4884         tcmiy 8         	
3:8:16 E16:65 4885         tcmiy 10        	
3:8:2C E2C:2D 4886         ldx   5         	
3:8:18 E18:40 4887         tcy   0         ; 5/0 - 0 0	
3:8:30 E30:60 4888         tcmiy 0         	
3:8:21 E21:60 4889         tcmiy 0         	
3:8:02 E02:10 4890         ldp   0         	
3:8:05 E05:C0 4891         call  PLAYBUF      	
3:8:0B E0B:12 4892         ldp   4         	
3:8:17 E17:8C 4893         br    LD0C      	
              4894 	
              4895 ;********************************************************************************	
              4896 ; PLYFRNT - Play the Frontier sound	
              4897 ;********************************************************************************	
3:8:2E E2E:E3 4898 PLYFRNT call  SE23      	
3:8:1C E1C:E3 4899         call  SE23      	
3:8:38 E38:12 4900         ldp   4         	
3:8:31 E31:8C 4901         br    LD0C      	
              4902 	
3:8:23 E23:2B 4903 SE23    ldx   6         	
3:8:06 E06:40 4904         tcy   0         ; 6/0 - 1 2 3 1 2 3	
3:8:0D E0D:68 4905 SE0D    tcmiy 1         	
3:8:1B E1B:64 4906         tcmiy 2         	
3:8:36 E36:6C 4907         tcmiy 3         	
3:8:2D E2D:56 4908         ynec  6         	
3:8:1A E1A:8D 4909         br    SE0D      	
3:8:34 E34:2F 4910         ldx   7         	
3:8:29 E29:40 4911         tcy   0         ; 7/0 - 13 10 0 13 10 0 	
3:8:12 E12:6B 4912 SE12    tcmiy 13        	
3:8:24 E24:65 4913         tcmiy 10        	
3:8:08 E08:60 4914         tcmiy 0         	
3:8:11 E11:56 4915         ynec  6         	
3:8:22 E22:92 4916         br    SE12      	
3:8:04 E04:29 4917         ldx   4         	
3:8:09 E09:40 4918         tcy   0         ; 4/0 - 3 3 3 3 3 3	
3:8:13 E13:6C 4919 SE13    tcmiy 3         	
3:8:26 E26:56 4920         ynec  6         	
3:8:0C E0C:93 4921         br    SE13      	
3:8:19 E19:2D 4922         ldx   5         	
3:8:32 E32:40 4923         tcy   0         ; 5/0 - 0 0 0 0 0 0	
3:8:25 E25:60 4924 SE25    tcmiy 0         	
3:8:0A E0A:56 4925         ynec  6         	
3:8:15 E15:A5 4926         br    SE25      	
3:8:2A E2A:10 4927         ldp   0         	
3:8:14 E14:80 4928         br    PLAYBUF      	
              4929 	
3:8:28 E28:08 4930         tka             	
3:8:10 E10:27 4931         tam             	
3:8:20 E20:05 4932         iyc             	
              4933 	
              4934 ; *** Chapter 3 page 9	
              4935 	
              4936 	
              4937 ;********************************************************************************	
              4938 ; PLYDRGN - Play the dragon siren	
              4939 ;********************************************************************************	
3:9:00 E40:FE 4940 PLYDRGN call  SE7E      	
3:9:01 E41:FE 4941         call  SE7E      	
3:9:03 E43:FE 4942         call  SE7E      	
3:9:07 E47:FE 4943         call  SE7E      	
3:9:0F E4F:FE 4944         call  SE7E      	
3:9:1F E5F:FE 4945         call  SE7E      	
3:9:3F E7F:FE 4946         call  SE7E      	
              4947 	
3:9:3E E7E:2B 4948 SE7E    ldx   6         	
3:9:3D E7D:40 4949         tcy   0         ; 6/0 - 1 0 1 0 1 0 1 0 1 0	
3:9:3B E7B:68 4950 SE7B    tcmiy 1         	
3:9:37 E77:60 4951         tcmiy 0         	
3:9:2F E6F:55 4952         ynec  10        	
3:9:1E E5E:BB 4953         br    SE7B      	
3:9:3C E7C:2F 4954         ldx   7         ; 7/0 - 3 5 3 5 3 5 3 5 3 5	
3:9:39 E79:40 4955         tcy   0         	
3:9:33 E73:6C 4956 SE73    tcmiy 3         	
3:9:27 E67:6A 4957         tcmiy 5         	
3:9:0E E4E:55 4958         ynec  10        	
3:9:1D E5D:B3 4959         br    SE73      	
3:9:3A E7A:29 4960         ldx   4         ; 4/0 - 1 0 1 0 1 0 1 0 1 0	
3:9:35 E75:40 4961         tcy   0         	
3:9:2B E6B:68 4962 SE6B    tcmiy 1         	
3:9:16 E56:60 4963         tcmiy 0         	
3:9:2C E6C:55 4964         ynec  10        	
3:9:18 E58:AB 4965         br    SE6B      	
3:9:30 E70:2D 4966         ldx   5         ; 5/0 - 6 8 6 8 6 8 6 8 6 8	
3:9:21 E61:40 4967         tcy   0         	
3:9:02 E42:66 4968 SE42    tcmiy 6         	
3:9:05 E45:61 4969         tcmiy 8         	
3:9:0B E4B:55 4970         ynec  10        	
3:9:17 E57:82 4971         br    SE42      	
3:9:2E E6E:10 4972         ldp   0         	
3:9:1C E5C:80 4973         br    PLAYBUF      	
              4974 	
              4975 ;********************************************************************************	
              4976 ; PLYDSWD - Sword defense against Dragon sound	
              4977 ;********************************************************************************	
3:9:38 E78:15 4978 PLYDSWD ldp   10        	
3:9:31 E71:C0 4979         call  LE80      	
3:9:23 E63:15 4980         ldp   10        	
3:9:06 E46:DB 4981         call  LE9B      	
              4982 ;	
              4983 ; Sword defense part three	
              4984 ;	
3:9:0D E4D:2B 4985         ldx   6         	
3:9:1B E5B:40 4986         tcy   0         ; 6/0 - 13 12 12 11 11	
3:9:36 E76:6B 4987         tcmiy 13        	
3:9:2D E6D:63 4988         tcmiy 12        	
3:9:1A E5A:63 4989         tcmiy 12        	
3:9:34 E74:6D 4990         tcmiy 11        	
3:9:29 E69:6D 4991         tcmiy 11        	
3:9:12 E52:2F 4992         ldx   7         	
3:9:24 E64:40 4993         tcy   0         ; 7/0 - 1 7 2 9 4	
3:9:08 E48:68 4994         tcmiy 1         	
3:9:11 E51:6E 4995         tcmiy 7         	
3:9:22 E62:64 4996         tcmiy 2         	
3:9:04 E44:69 4997         tcmiy 9         	
3:9:09 E49:62 4998         tcmiy 4         	
3:9:13 E53:29 4999         ldx   4         	
3:9:26 E66:40 5000         tcy   0         ; 4/0 - 9 1 1 1 1	
3:9:0C E4C:69 5001         tcmiy 9         	
3:9:19 E59:68 5002 SE59    tcmiy 1         	
3:9:32 E72:5A 5003         ynec  5         	
3:9:25 E65:99 5004         br    SE59      	
3:9:0A E4A:2D 5005         ldx   5         	
3:9:15 E55:40 5006         tcy   0         ; 5/0 - 8 8 8 8 8	
3:9:2A E6A:61 5007 SE6A    tcmiy 8         	
3:9:14 E54:5A 5008         ynec  5         	
3:9:28 E68:AA 5009         br    SE6A      	
3:9:10 E50:10 5010         ldp   0         	
3:9:20 E60:80 5011         br    PLAYBUF      	
              5012 	
              5013 ; *** Chapter 3 page 10	
              5014 	
              5015 ;	
              5016 ; Sword defense part one	
              5017 ;	
3:A:00 E80:2B 5018 LE80    ldx   6         	
3:A:01 E81:40 5019         tcy   0         ; 6/0 - 6 5 5 4 4 3 3 3 2 2	
3:A:03 E83:66 5020         tcmiy 6         	
3:A:07 E87:6A 5021         tcmiy 5         	
3:A:0F E8F:6A 5022         tcmiy 5         	
3:A:1F E9F:62 5023         tcmiy 4         	
3:A:3F EBF:62 5024         tcmiy 4         	
3:A:3E EBE:6C 5025         tcmiy 3         	
3:A:3D EBD:6C 5026         tcmiy 3         	
3:A:3B EBB:6C 5027         tcmiy 3         	
3:A:37 EB7:64 5028         tcmiy 2         	
3:A:2F EAF:64 5029         tcmiy 2         	
3:A:1E E9E:2F 5030         ldx   7         	
3:A:3C EBC:40 5031         tcy   0         ; 7/0 - 1 13 2 14 4 15 5 0 7 2	
3:A:39 EB9:68 5032         tcmiy 1         	
3:A:33 EB3:6B 5033         tcmiy 13        	
3:A:27 EA7:64 5034         tcmiy 2         	
3:A:0E E8E:67 5035         tcmiy 14        	
3:A:1D E9D:62 5036         tcmiy 4         	
3:A:3A EBA:6F 5037         tcmiy 15        	
3:A:35 EB5:6A 5038         tcmiy 5         	
3:A:2B EAB:60 5039         tcmiy 0         	
3:A:16 E96:6E 5040         tcmiy 7         	
3:A:2C EAC:64 5041         tcmiy 2         	
3:A:18 E98:29 5042 SE98    ldx   4         	
3:A:30 EB0:40 5043         tcy   0         ; 4/0 - 0 1 0 1 0 1 0 1 0 1	
3:A:21 EA1:60 5044 SEA1    tcmiy 0         	
3:A:02 E82:68 5045         tcmiy 1         	
3:A:05 E85:55 5046         ynec  10        	
3:A:0B E8B:A1 5047         br    SEA1      	
3:A:17 E97:2D 5048         ldx   5         	
3:A:2E EAE:40 5049         tcy   0         ; 5/0 - 8 6 8 6 8 6 8 6 8 6	
3:A:1C E9C:61 5050 SE9C    tcmiy 8         	
3:A:38 EB8:66 5051         tcmiy 6         	
3:A:31 EB1:55 5052         ynec  10        	
3:A:23 EA3:9C 5053         br    SE9C      	
3:A:06 E86:10 5054         ldp   0         	
3:A:0D E8D:80 5055         br    PLAYBUF      	
              5056 ;	
              5057 ; Sword defense part two	
              5058 ;	
3:A:1B E9B:2B 5059 LE9B    ldx   6         	
3:A:36 EB6:40 5060         tcy   0         ; 6/0 - 10 10 9 9 8 8 7 7 6 6	
3:A:2D EAD:65 5061         tcmiy 10        	
3:A:1A E9A:65 5062         tcmiy 10        	
3:A:34 EB4:69 5063         tcmiy 9         	
3:A:29 EA9:69 5064         tcmiy 9         	
3:A:12 E92:61 5065         tcmiy 8         	
3:A:24 EA4:61 5066         tcmiy 8         	
3:A:08 E88:6E 5067         tcmiy 7         	
3:A:11 E91:6E 5068         tcmiy 7         	
3:A:22 EA2:66 5069         tcmiy 6         	
3:A:04 E84:66 5070         tcmiy 6         	
3:A:09 E89:2F 5071         ldx   7         	
3:A:13 E93:40 5072         tcy   0         ; 7/0 - 10 5 12 7 13 8 15 10 15 11	
3:A:26 EA6:65 5073         tcmiy 10        	
3:A:0C E8C:6A 5074         tcmiy 5         	
3:A:19 E99:63 5075         tcmiy 12        	
3:A:32 EB2:6E 5076         tcmiy 7         	
3:A:25 EA5:6B 5077         tcmiy 13        	
3:A:0A E8A:61 5078         tcmiy 8         	
3:A:15 E95:6F 5079         tcmiy 15        	
3:A:2A EAA:65 5080         tcmiy 10        	
3:A:14 E94:6F 5081         tcmiy 15        	
3:A:28 EA8:6D 5082         tcmiy 11        	
3:A:10 E90:98 5083         br    SE98      	
3:A:20 EA0:00 5084         mnea            	
              5085 	
              5086 ; *** Chapter 3 page 11	
              5087 	
              5088 	
              5089 ;********************************************************************************	
              5090 ; PLYFAIL - Play failure riff.  Bazaar Closed and Lost events	
              5091 ;********************************************************************************	
3:B:00 EC0:2B 5092 PLYFAIL ldx   6         	
3:B:01 EC1:40 5093         tcy   0         ; 6/0 - 10 9 8 7 6 5 4 3 2	
3:B:03 EC3:65 5094         tcmiy 10        	
3:B:07 EC7:69 5095         tcmiy 9         	
3:B:0F ECF:61 5096         tcmiy 8         	
3:B:1F EDF:6E 5097         tcmiy 7         	
3:B:3F EFF:66 5098         tcmiy 6         	
3:B:3E EFE:6A 5099         tcmiy 5         	
3:B:3D EFD:62 5100         tcmiy 4         	
3:B:3B EFB:6C 5101         tcmiy 3         	
3:B:37 EF7:64 5102         tcmiy 2         	
3:B:2F EEF:2F 5103         ldx   7         	
3:B:1E EDE:60 5104         tcmiy 0         ; 7/0 - 0 0 0 0 0 0 0 0 0	
3:B:3C EFC:60 5105 SEFC    tcmiy 0         	
3:B:39 EF9:59 5106         ynec  9         	
3:B:33 EF3:BC 5107         br    SEFC      	
3:B:27 EE7:29 5108         ldx   4         	
3:B:0E ECE:40 5109         tcy   0         ; 4/0 - 4 4 4 4 4 4 4 4 4	
3:B:1D EDD:62 5110 SEDD    tcmiy 4         	
3:B:3A EFA:59 5111         ynec  9         	
3:B:35 EF5:9D 5112         br    SEDD      	
3:B:2B EEB:2D 5113         ldx   5         	
3:B:16 ED6:40 5114         tcy   0         ; 5/0 - 0 0 0 0 0 0 0 0 0	
3:B:2C EEC:60 5115 SEEC    tcmiy 0         	
3:B:18 ED8:59 5116         ynec  9         	
3:B:30 EF0:AC 5117         br    SEEC      	
3:B:21 EE1:10 5118         ldp   0         	
3:B:02 EC2:80 5119         br    PLAYBUF      	
              5120 	
              5121 ;********************************************************************************	
              5122 ; PLYDETH - Play the death march (Plague, starvation, etc.)	
              5123 ;********************************************************************************	
3:B:05 EC5:2B 5124 PLYDETH ldx   6         	
3:B:0B ECB:40 5125         tcy   0         ; 6/0 - 0 9 0 9 0 9 0 9	
3:B:17 ED7:60 5126 SED7    tcmiy 0         	
3:B:2E EEE:69 5127         tcmiy 9         	
3:B:1C EDC:51 5128         ynec  8         	
3:B:38 EF8:97 5129         br    SED7      	
3:B:31 EF1:2F 5130         ldx   7         	
3:B:23 EE3:40 5131         tcy   0         ; 7/0 - 12 9 12 9 12 9 12 9 	
3:B:06 EC6:63 5132 SEC6    tcmiy 12        	
3:B:0D ECD:69 5133         tcmiy 9         	
3:B:1B EDB:51 5134         ynec  8         	
3:B:36 EF6:86 5135         br    SEC6      	
3:B:2D EED:29 5136         ldx   4         	
3:B:1A EDA:40 5137         tcy   0         ; 4/0 - 0 6 0 1 0 3 0 3	
3:B:34 EF4:60 5138         tcmiy 0         	
3:B:29 EE9:66 5139         tcmiy 6         	
3:B:12 ED2:60 5140         tcmiy 0         	
3:B:24 EE4:68 5141         tcmiy 1         	
3:B:08 EC8:60 5142         tcmiy 0         	
3:B:11 ED1:6C 5143         tcmiy 3         	
3:B:22 EE2:60 5144         tcmiy 0         	
3:B:04 EC4:6C 5145         tcmiy 3         	
3:B:09 EC9:2D 5146         ldx   5         	
3:B:13 ED3:40 5147         tcy   0         ; 5/0 - 0 0 0 0 0 0 0 0	
3:B:26 EE6:60 5148 SEE6    tcmiy 0         	
3:B:0C ECC:51 5149         ynec  8         	
3:B:19 ED9:A6 5150         br    SEE6      	
3:B:32 EF2:10 5151         ldp   0         	
3:B:25 EE5:C0 5152         call  PLAYBUF      	
              5153 	
3:B:0A ECA:2B 5154         ldx   6         	
3:B:15 ED5:40 5155         tcy   0         ; 6/0 - 9 9 9 0 9 8 0 8 7	
3:B:2A EEA:69 5156         tcmiy 9         	
3:B:14 ED4:69 5157         tcmiy 9         	
3:B:28 EE8:69 5158         tcmiy 9         	
3:B:10 ED0:13 5159         ldp   12        	
3:B:20 EE0:80 5160         br    LF00      	
              5161 	
              5162 ; *** Chapter 3 page 12	
              5163 	
3:C:00 F00:60 5164 LF00    tcmiy 0         	
3:C:01 F01:69 5165         tcmiy 9         	
3:C:03 F03:61 5166         tcmiy 8         	
3:C:07 F07:60 5167         tcmiy 0         	
3:C:0F F0F:61 5168         tcmiy 8         	
3:C:1F F1F:6E 5169         tcmiy 7         	
3:C:3F F3F:2F 5170         ldx   7         	
3:C:3E F3E:40 5171         tcy   0         ; 7/0 - 9 14 9 12 9 2 12 2 12	
3:C:3D F3D:69 5172         tcmiy 9         	
3:C:3B F3B:67 5173         tcmiy 14        	
3:C:37 F37:69 5174         tcmiy 9         	
3:C:2F F2F:63 5175         tcmiy 12        	
3:C:1E F1E:69 5176         tcmiy 9         	
3:C:3C F3C:64 5177         tcmiy 2         	
3:C:39 F39:63 5178         tcmiy 12        	
3:C:33 F33:64 5179         tcmiy 2         	
3:C:27 F27:63 5180         tcmiy 12        	
3:C:0E F0E:29 5181         ldx   4         	
3:C:1D F1D:40 5182         tcy   0         ; 4/0 - 3 3 3 0 3 3 0 3 3	
3:C:3A F3A:6C 5183         tcmiy 3         	
3:C:35 F35:6C 5184         tcmiy 3         	
3:C:2B F2B:6C 5185         tcmiy 3         	
3:C:16 F16:60 5186         tcmiy 0         	
3:C:2C F2C:6C 5187         tcmiy 3         	
3:C:18 F18:6C 5188         tcmiy 3         	
3:C:30 F30:60 5189         tcmiy 0         	
3:C:21 F21:6C 5190         tcmiy 3         	
3:C:02 F02:6C 5191         tcmiy 3         	
3:C:05 F05:2D 5192         ldx   5         	
3:C:0B F0B:40 5193         tcy   0         ; 5/0 - 0 0 0 0 0 0 0 0 0	
3:C:17 F17:60 5194 SF17    tcmiy 0         	
3:C:2E F2E:59 5195         ynec  9         	
3:C:1C F1C:97 5196         br    SF17      	
3:C:38 F38:10 5197         ldp   0         	
3:C:31 F31:C0 5198         call  PLAYBUF      	
              5199 	
3:C:23 F23:12 5200         ldp   4         	
3:C:06 F06:8C 5201         br    LD0C      	
              5202 	
              5203 ;********************************************************************************	
              5204 ; PLYPEGA - Play the Pegasus found sound	
              5205 ;********************************************************************************	
3:C:0D F0D:2B 5206 PLYPEGA ldx   6         	
3:C:1B F1B:40 5207         tcy   0         ; 6/0 - 1 2 2 3 3 4 5 5 6 7	
3:C:36 F36:68 5208         tcmiy 1         	
3:C:2D F2D:64 5209         tcmiy 2         	
3:C:1A F1A:64 5210         tcmiy 2         	
3:C:34 F34:6C 5211         tcmiy 3         	
3:C:29 F29:6C 5212         tcmiy 3         	
3:C:12 F12:62 5213         tcmiy 4         	
3:C:24 F24:6A 5214         tcmiy 5         	
3:C:08 F08:6A 5215         tcmiy 5         	
3:C:11 F11:66 5216         tcmiy 6         	
3:C:22 F22:6E 5217         tcmiy 7         	
3:C:04 F04:2F 5218         ldx   7         	
3:C:09 F09:40 5219         tcy   0         ; 7/0 - 3 1 8 6 13 11 1 15 6 4	
3:C:13 F13:6C 5220         tcmiy 3         	
3:C:26 F26:68 5221         tcmiy 1         	
3:C:0C F0C:61 5222         tcmiy 8         	
3:C:19 F19:66 5223         tcmiy 6         	
3:C:32 F32:6B 5224         tcmiy 13        	
3:C:25 F25:6D 5225         tcmiy 11        	
3:C:0A F0A:68 5226         tcmiy 1         	
3:C:15 F15:6F 5227         tcmiy 15        	
3:C:2A F2A:66 5228         tcmiy 6         	
3:C:14 F14:62 5229         tcmiy 4         	
3:C:28 F28:29 5230         ldx   4         	
3:C:10 F10:1B 5231         ldp   13        	
3:C:20 F20:80 5232         br    LF40      	
              5233 	
              5234 ; *** Chapter 3 page 13	
              5235 	
3:D:00 F40:40 5236 LF40    tcy   0         ; 4/0 - 3 3 2 2 2 1 1 0 0 0	
3:D:01 F41:6C 5237         tcmiy 3         	
3:D:03 F43:6C 5238         tcmiy 3         	
3:D:07 F47:64 5239         tcmiy 2         	
3:D:0F F4F:64 5240         tcmiy 2         	
3:D:1F F5F:64 5241         tcmiy 2         	
3:D:3F F7F:68 5242         tcmiy 1         	
3:D:3E F7E:68 5243         tcmiy 1         	
3:D:3D F7D:60 5244         tcmiy 0         	
3:D:3B F7B:60 5245         tcmiy 0         	
3:D:37 F77:60 5246         tcmiy 0         	
3:D:2F F6F:2D 5247         ldx   5         	
3:D:1E F5E:40 5248         tcy   0         ; 5/0 - 8 0 13 5 2 10 6 15 11 4	
3:D:3C F7C:61 5249         tcmiy 8         	
3:D:39 F79:60 5250         tcmiy 0         	
3:D:33 F73:6B 5251         tcmiy 13        	
3:D:27 F67:6A 5252         tcmiy 5         	
3:D:0E F4E:64 5253         tcmiy 2         	
3:D:1D F5D:65 5254         tcmiy 10        	
3:D:3A F7A:66 5255         tcmiy 6         	
3:D:35 F75:6F 5256         tcmiy 15        	
3:D:2B F6B:6D 5257         tcmiy 11        	
3:D:16 F56:62 5258         tcmiy 4         	
3:D:2C F6C:10 5259         ldp   0         	
3:D:18 F58:C0 5260         call  PLAYBUF      	
              5261 	
3:D:30 F70:2B 5262         ldx   6         	
3:D:21 F61:40 5263         tcy   0         ; 6/0 - 0 0 0 0	
3:D:02 F42:60 5264 SF42    tcmiy 0         	
3:D:05 F45:52 5265         ynec  4         	
3:D:0B F4B:82 5266         br    SF42      	
3:D:17 F57:2F 5267         ldx   7         	
3:D:2E F6E:40 5268         tcy   0         ; 7/0 - 0 2 3 13	
3:D:1C F5C:60 5269         tcmiy 0         	
3:D:38 F78:64 5270         tcmiy 2         	
3:D:31 F71:6C 5271         tcmiy 3         	
3:D:23 F63:6B 5272         tcmiy 13        	
3:D:06 F46:29 5273         ldx   4         	
3:D:0D F4D:40 5274         tcy   0         ; 4/0 - 4 4 4 3	
3:D:1B F5B:62 5275         tcmiy 4         	
3:D:36 F76:62 5276         tcmiy 4         	
3:D:2D F6D:62 5277         tcmiy 4         	
3:D:1A F5A:6C 5278         tcmiy 3         	
3:D:34 F74:2D 5279         ldx   5         	
3:D:29 F69:40 5280         tcy   0         ; 5/0 - 14 7 3 12	
3:D:12 F52:67 5281         tcmiy 14        	
3:D:24 F64:6E 5282         tcmiy 7         	
3:D:08 F48:6C 5283         tcmiy 3         	
3:D:11 F51:63 5284         tcmiy 12        	
3:D:22 F62:10 5285         ldp   0         	
3:D:04 F44:80 5286         br    PLAYBUF      	
              5287 	
              5288 ;********************************************************************************	
              5289 ; PLYBEEP - Play beep when prompting user and during startup	
              5290 ;********************************************************************************	
3:D:09 F49:2F 5291 PLYBEEP ldx   7         ; 7/0 - 0	
3:D:13 F53:40 5292         tcy   0         	
3:D:26 F66:60 5293         tcmiy 0         	
3:D:0C F4C:2B 5294         ldx   6         ; 6/0 - 2	
3:D:19 F59:40 5295         tcy   0         	
3:D:32 F72:64 5296         tcmiy 2         	
3:D:25 F65:2D 5297         ldx   5         ; 5/0 - 0	
3:D:0A F4A:40 5298         tcy   0         	
3:D:15 F55:60 5299         tcmiy 0         	
3:D:2A F6A:29 5300         ldx   4         ; 4/0 - 2	
3:D:14 F54:40 5301         tcy   0         	
3:D:28 F68:64 5302         tcmiy 2         	
3:D:10 F50:10 5303         ldp   0         	
3:D:20 F60:80 5304         br    PLAYBUF      	
              5305 	
              5306 	
              5307 ; *** Chapter 3 page 14	
              5308 	
3:E:00 F80:1B 5309 LF80    ldp   13        	
3:E:01 F81:89 5310         br    PLYBEEP   	
              5311 	
              5312 ;********************************************************************************	
              5313 ; PLWFOOD - Play the Low Food notification at the beginning of a turn	
              5314 ;********************************************************************************	
3:E:03 F83:FE 5315 PLWFOOD call  SFBE      	
3:E:07 F87:FE 5316         call  SFBE      	
3:E:0F F8F:FE 5317         call  SFBE      	
3:E:1F F9F:12 5318         ldp   4         	
3:E:3F FBF:8C 5319         br    LD0C      	
              5320 ;	
              5321 ; One of the three riffs for the low food warning (called three times)	
              5322 ;	
3:E:3E FBE:2B 5323 SFBE    ldx   6         	
3:E:3D FBD:40 5324         tcy   0         ; 6/0 - 0 1 2 3 4 4 5 6 7 8	
3:E:3B FBB:60 5325         tcmiy 0         	
3:E:37 FB7:68 5326         tcmiy 1         	
3:E:2F FAF:64 5327         tcmiy 2         	
3:E:1E F9E:6C 5328         tcmiy 3         	
3:E:3C FBC:62 5329         tcmiy 4         	
3:E:39 FB9:62 5330         tcmiy 4         	
3:E:33 FB3:6A 5331         tcmiy 5         	
3:E:27 FA7:66 5332         tcmiy 6         	
3:E:0E F8E:6E 5333         tcmiy 7         	
3:E:1D F9D:61 5334         tcmiy 8         	
3:E:3A FBA:2F 5335         ldx   7         	
3:E:35 FB5:40 5336         tcy   0         ; 7/0 - 7 5 4 2 1 15 15 13 12 10	
3:E:2B FAB:6E 5337         tcmiy 7         	
3:E:16 F96:6A 5338         tcmiy 5         	
3:E:2C FAC:62 5339         tcmiy 4         	
3:E:18 F98:64 5340         tcmiy 2         	
3:E:30 FB0:68 5341         tcmiy 1         	
3:E:21 FA1:6F 5342         tcmiy 15        	
3:E:02 F82:6F 5343         tcmiy 15        	
3:E:05 F85:6B 5344         tcmiy 13        	
3:E:0B F8B:63 5345         tcmiy 12        	
3:E:17 F97:65 5346         tcmiy 10        	
3:E:2E FAE:29 5347         ldx   4         	
3:E:1C F9C:40 5348         tcy   0         ; 4/0 - 1 1 1 1 1 1 1 1 1 1	
3:E:38 FB8:68 5349 SFB8    tcmiy 1         	
3:E:31 FB1:55 5350         ynec  10        	
3:E:23 FA3:B8 5351         br    SFB8      	
3:E:06 F86:2D 5352         ldx   5         	
3:E:0D F8D:40 5353         tcy   0         ; 5/0 - 0 0 0 0 0 0 0 0 0 0	
3:E:1B F9B:60 5354 SF9B    tcmiy 0         	
3:E:36 FB6:55 5355         ynec  10        	
3:E:2D FAD:9B 5356         br    SF9B      	
3:E:1A F9A:10 5357         ldp   0         	
3:E:34 FB4:80 5358         br    PLAYBUF      	
              5359 	
              5360 ;********************************************************************************	
              5361 ; PLYCLR - Play the hi/lo siren when player presses Clear	
              5362 ;********************************************************************************	
3:E:29 FA9:2B 5363 PLYCLR  ldx   6         	
3:E:12 F92:40 5364         tcy   0         ; 6/0 - 1 3 1 3 1 3 1 3	
3:E:24 FA4:68 5365 SFA4    tcmiy 1         	
3:E:08 F88:6C 5366         tcmiy 3         	
3:E:11 F91:51 5367         ynec  8         	
3:E:22 FA2:A4 5368         br    SFA4      	
3:E:04 F84:2F 5369         ldx   7         	
3:E:09 F89:40 5370         tcy   0         ; 7/0 - 9 15 9 15 9 15 9 15	
3:E:13 F93:69 5371 SF93    tcmiy 9         	
3:E:26 FA6:6F 5372         tcmiy 15        	
3:E:0C F8C:51 5373         ynec  8         	
3:E:19 F99:93 5374         br    SF93      	
3:E:32 FB2:29 5375         ldx   4         	
3:E:25 FA5:40 5376         tcy   0         ; 4/0 - 10 5 10 5 10 5 10 5	
3:E:0A F8A:65 5377 SF8A    tcmiy 10        	
3:E:15 F95:6A 5378         tcmiy 5         	
3:E:2A FAA:51 5379         ynec  8         	
3:E:14 F94:8A 5380         br    SF8A      	
3:E:28 FA8:2D 5381         ldx   5         	
3:E:10 F90:1F 5382         ldp   15        	
3:E:20 FA0:80 5383         br    LFC0      	
              5384 	
              5385 ; *** Chapter 3 page 15	
              5386 	
3:F:00 FC0:40 5387 LFC0    tcy   0         ; 5/0 - 0 0 0 0 0 0 0 0	
3:F:01 FC1:60 5388 SFC1    tcmiy 0         	
3:F:03 FC3:51 5389         ynec  8         	
3:F:07 FC7:81 5390         br    SFC1      	
3:F:0F FCF:10 5391         ldp   0         	
3:F:1F FDF:80 5392         br    PLAYBUF      	
              5393 	
3:F:3F FFF:E5 5394 LFFF    call  SFE5      ; Copy 5 to 4 (Brigand count)	
3:F:3E FFE:18 5395         ldp   1         	
3:F:3D FFD:0B 5396         tpc             	
3:F:3B FFB:1D 5397         ldp   11        	
3:F:37 FF7:C0 5398         call  L6C0      ; Weighted scoring (same as Dragon losses)	
3:F:2F FEF:E6 5399         call  SFE6      ; ADDB10	
3:F:1E FDE:29 5400         ldx   4         	
3:F:3C FFC:68 5401         tcmiy 1         	
3:F:39 FF9:6E 5402         tcmiy 7         	
3:F:33 FF3:66 5403         tcmiy 6         	
3:F:27 FE7:E2 5404         call  SFE2      ; SUMB10	
3:F:0E FCE:10 5405         ldp   0         	
3:F:1D FDD:0B 5406         tpc             	
3:F:3A FFA:15 5407         ldp   10        	
3:F:35 FF5:CC 5408         call  L28C      ; Copy 5/2-0 to 7/2-0	
3:F:2B FEB:18 5409         ldp   1         	
3:F:16 FD6:0B 5410         tpc             	
3:F:2C FEC:17 5411         ldp   14        	
3:F:18 FD8:DB 5412         call  CPYTRNC   ; Pick up the turn count	
3:F:30 FF0:E5 5413         call  SFE5      ; Copy 5 to 4 (Turn count)	
3:F:21 FE1:18 5414         ldp   1         	
3:F:02 FC2:0B 5415         tpc             	
3:F:05 FC5:16 5416         ldp   6         	
3:F:0B FCB:F2 5417         call  CPY2TO5   ; Save current player Warrior count	
3:F:17 FD7:E6 5418         call  SFE6      ; Add 4 to 5	
3:F:2E FEE:E5 5419         call  SFE5      ; Copy 5 to 4	
3:F:1C FDC:E2 5420         call  SFE2      ; Add 4 again	
3:F:38 FF8:E5 5421         call  SFE5      ; Copy 5 to 4	
3:F:31 FF1:E2 5422         call  SFE2      ; Add 4 again	
3:F:23 FE3:E5 5423         call  SFE5      ; Copy 5 to 4	
3:F:06 FC6:10 5424         ldp   0         	
3:F:0D FCD:0B 5425         tpc             	
3:F:1B FDB:1D 5426         ldp   11        	
3:F:36 FF6:F3 5427         call  L2F3      ; Copy 7/2-0 to 5/2-0	
3:F:2D FED:10 5428         ldp   0         	
3:F:1A FDA:0B 5429         tpc             	
3:F:34 FF4:13 5430         ldp   12        	
3:F:29 FE9:FF 5431         call  L33F      ; Subtract 4 from 5	
3:F:12 FD2:14 5432         ldp   2         	
3:F:24 FE4:0B 5433         tpc             	
3:F:08 FC8:17 5434         ldp   14        	
3:F:11 FD1:89 5435         br    LB89      ; Update display with score and end game	
              5436 	
3:F:22 FE2:10 5437 SFE2    ldp   0         	
3:F:04 FC4:0B 5438         tpc             	
3:F:09 FC9:12 5439         ldp   4         	
3:F:13 FD3:BF 5440         br    SUMB10    	
3:F:26 FE6:10 5441 SFE6    ldp   0         	
3:F:0C FCC:0B 5442         tpc             	
3:F:19 FD9:12 5443         ldp   4         	
3:F:32 FF2:80 5444         br    AD2B10    	
3:F:25 FE5:18 5445 SFE5    ldp   1         	
3:F:0A FCA:0B 5446         tpc             	
3:F:15 FD5:13 5447         ldp   12        	
3:F:2A FEA:A7 5448         br    CPY5TO4   	
              5449 ;	
              5450 ; This code looks to be unused...  Odd.  There's also a chunk of code	
              5451 ; like this at S294.	
              5452 ;	
              5453 ; Values are 6A 25 80 94	
              5454 ;	
3:F:14 FD4:6A 5455 SFD4    tcmiy 5         	
3:F:28 FE8:25 5456         tamiyc          	
3:F:10 FD0:80 5457         br    LFC0      	
3:F:20 FE0:94 5458         br    SFD4      	

Cross-reference
---------------

LABEL    VALUE	- (DEF) REF(b = BR, c=CALL)
S000     0x0000	- (4) 33(b) 41(b)
S00A     0x000a	- (67) 61(b) 63(b)
S00F     0x000f	- (8) 45(b)
S011     0x0011	- (57) 51(b)
S018     0x0018	- (34) 32(b)
S01B     0x001b	- (48) 10(b)
S01C     0x001c	- (42) 35(b) 40(b)
S026     0x0026	- (62) 56(b)
S033     0x0033	- (25) 22(b)
S03D     0x003d	- (17) 66(b) 72(b) 806(b)
S03E     0x003e	- (11) 7(b)
L040     0x0040	- (77) 26(c) 1369(c)
S04B     0x004b	- (106) 104(b)
S04E     0x004e	- (94) 89(b) 113(b)
S055     0x0055	- (140) 126(c) 129(c) 132(c)
S071     0x0071	- (111) 93(b)
S074     0x0074	- (123) 136(b) 301(b)
S075     0x0075	- (97) 98(b) 100(b)
S077     0x0077	- (87) 90(b)
S078     0x0078	- (110) 105(b)
S079     0x0079	- (91) 109(b)
S080     0x0080	- (154) 192(b)
S085     0x0085	- (194) 189(b)
S089     0x0089	- (220) 214(b) 235(b)
S08A     0x008a	- (228) 204(b) 213(b)
S091     0x0091	- (216) 208(b)
S099     0x0099	- (225) 218(b)
S09C     0x009c	- (199) 170(b)
S09F     0x009f	- (159) 157(b)
S0AA     0x00aa	- (231) 227(b)
READKBD  0x00ab	- (186) 702(b)
S0AE     0x00ae	- (198) 167(b)
S0B0     0x00b0	- (190) 188(b)
S0B1     0x00b1	- (201) 176(b) 196(b)
S0B8     0x00b8	- (200) 173(b)
RANDOM   0x00c0	- (267) 388(c) 411(c) 771(c) 1077(c) 2095(c) 2656(c) 4219(b)
S0C9     0x00c9	- (318) 275(b)
S0D5     0x00d5	- (327) 268(c) 270(c)
S0D6     0x00d6	- (289) 310(b)
S0E3     0x00e3	- (303) 286(b)
S0E7     0x00e7	- (283) 317(b)
S0E9     0x00e9	- (311) 279(b)
S0EF     0x00ef	- (278) 325(b)
AD2B10   0x0100	- (354) 398(c) 404(b) 420(c) 434(b) 1087(c) 2593(b) 3259(b) 5444(b)
L107     0x0107	- (357) 2068(c)
ADD16    0x0115	- (429) 1338(c) 1340(c)
S11D     0x011d	- (376) 369(b)
L129     0x0129	- (410) 2774(b)
S12B     0x012b	- (379) 375(b)
L130     0x0130	- (387) 1323(c)
S13A     0x013a	- (377) 371(b)
S13D     0x013d	- (365) 380(b)
SUMB10   0x013f	- (360) 2023(c) 2027(c) 3094(b) 5440(b)
DSPRSLT  0x0140	- (448) 2609(b) 3213(c) 3472(c) 4107(c)
S14C     0x014c	- (516) 514(b)
S152     0x0152	- (504) 489(b) 497(b)
S155     0x0155	- (522) 507(b) 515(b)
S157     0x0157	- (486) 470(b)
S173     0x0173	- (467) 451(b)
S176     0x0176	- (498) 496(b)
S180     0x0180	- (535) 527(b)
S18C     0x018c	- (601) 586(b) 594(b)
S19F     0x019f	- (540) 538(b)
S1A2     0x01a2	- (595) 593(b)
S1B0     0x01b0	- (565) 549(b)
S1B1     0x01b1	- (577) 575(b)
S1B6     0x01b6	- (583) 568(b) 576(b)
L1B7     0x01b7	- (546) 526(b) 539(b)
L1C0     0x01c0	- (618) 612(b)
S1C5     0x01c5	- (656) 649(b)
L1C6     0x01c6	- (679) 229(b)
S1CA     0x01ca	- (704) 689(c)
PROMPT   0x01cb	- (671) 1232(c) 1303(c) 1367(c) 1448(c) 1524(c) 2806(c) 3392(c) 3551(c) 3824(c) 4029(c)
L1D4     0x01d4	- (708) 145(b)
L1DF     0x01df	- (624) 605(b) 613(b)
L1F8     0x01f8	- (675) 2995(c)
S1F9     0x01f9	- (636) 634(b)
S1FA     0x01fa	- (646) 627(b) 635(b)
L200     0x0200	- (720) 745(b) 1481(c) 3701(b)
S205     0x0205	- (755) 758(b)
L20D     0x020d	- (772) 4224(b)
ROTDRUM  0x0215	- (801) 457(c) 476(c) 500(c) 518(c) 542(c) 555(c) 579(c) 597(c) 620(c) 638(c) 653(c) 1150(c) 1382(c) 2426(b) 3668(b)
S218     0x0218	- (747) 744(b)
S21B     0x021b	- (773) 776(b)
S21D     0x021d	- (740) 737(b)
RND0TO2  0x0223	- (770) 1211(c) 1216(c) 3528(c)
BUF2DSP  0x0224	- (784) 463(c) 482(c) 561(c) 1971(c) 3156(b)
S230     0x0230	- (752) 721(c) 722(c) 723(c) 725(c) 726(c) 727(c) 729(c) 730(c) 731(c)
S234     0x0234	- (777) 774(b)
LTTOPCL  0x0240	- (813) 520(c) 581(c) 1156(b) 2132(c) 3373(c)
L241     0x0241	- (814) 465(c) 1388(c) 4195(b)
S248     0x0248	- (884) 814(c) 822(c) 830(c)
CPYBRIG  0x0249	- (892) 3104(b) 3659(c)
LTMIDCL  0x024f	- (821) 544(c) 599(c) 640(c) 1158(b) 2125(c) 2319(c) 3337(c)
S25A     0x025a	- (876) 813(c) 821(c) 829(c)
L25F     0x025f	- (822) 484(c) 1390(c) 4199(b)
L267     0x0267	- (841) 2961(c) 3160(b)
S26C     0x026c	- (851) 857(b) 860(b)
S26F     0x026f	- (836) 816(b) 824(b)
L27B     0x027b	- (830) 563(c) 1392(c) 2953(c) 4214(b)
LTLWRCL  0x027d	- (829) 502(c) 622(c) 655(c) 1159(b) 2312(c)
REFRLED  0x0280	- (916) 680(c) 682(c) 684(c) 853(c) 1007(b)
L28C     0x028c	- (992) 3709(b) 5408(c)
S294     0x0294	- (1005) 1008(b)
S299     0x0299	- (993) 997(b)
S29A     0x029a	- (974) 943(b) 951(b)
S2A1     0x02a1	- (955) 919(b) 945(b)
L2A2     0x02a2	- (984) 223(b)
S2A9     0x02a9	- (976) 977(b) 979(b)
S2AB     0x02ab	- (947) 928(b) 931(b)
S2AE     0x02ae	- (960) 958(b)
S2B6     0x02b6	- (968) 966(b)
S2BA     0x02ba	- (944) 940(b)
L2C0     0x02c0	- (1016) 4166(b)
L2C3     0x02c3	- (1018) 4159(b)
S2C5     0x02c5	- (1054) 1052(b)
L2CF     0x02cf	- (1020) 4152(b)
L2D6     0x02d6	- (1045) 3692(b)
ROL5     0x02df	- (1022) 1016(c) 1017(c) 1018(c) 1019(c) 1020(c)
L2E5     0x02e5	- (1093) 1329(b)
S2E7     0x02e7	- (1035) 1039(b)
S2EA     0x02ea	- (1096) 
L2ED     0x02ed	- (1072) 3783(c)
S2EE     0x02ee	- (1057) 1056(c)
L2F3     0x02f3	- (1034) 3717(b) 5427(c)
S2F8     0x02f8	- (1059) 1062(b)
S2FD     0x02fd	- (1026) 1029(b)
SU2B10   0x0300	- (1119) 2601(b) 2925(c) 3990(b)
L307     0x0307	- (1122) 1928(c)
S309     0x0309	- (1180) 1187(b) 1271(b)
L30D     0x030d	- (1163) 3246(b)
L316     0x0316	- (1145) 3176(b)
S327     0x0327	- (1135) 1141(b)
S335     0x0335	- (1140) 1131(b)
S33D     0x033d	- (1127) 1136(b)
L33F     0x033f	- (1125) 3067(c) 5431(c)
L340     0x0340	- (1201) 1345(b)
S342     0x0342	- (1231) 1243(b) 1246(b)
S34D     0x034d	- (1241) 1239(b)
S36B     0x036b	- (1222) 1220(b)
L36C     0x036c	- (1227) 1193(b)
S36D     0x036d	- (1245) 1235(b)
L4INIT   0x0372	- (1263) 1321(b)
S379     0x0379	- (1215) 1221(b)
L380     0x0380	- (1278) 1420(b)
S397     0x0397	- (1312) 1310(b)
L2BINIT  0x03a6	- (1334) 1097(b) 1332(b)
BRGDONE  0x03aa	- (1341) 1098(b) 1333(b)
S3B5     0x03b5	- (1302) 1314(b) 1316(b)
S3B8     0x03b8	- (1315) 1306(b)
INIT     0x03c0	- (1352) 
S3C1     0x03c1	- (1353) 1361(b)
S3C4     0x03c4	- (1408) 1412(b)
L3E5     0x03e5	- (1416) 1280(b)
S3E8     0x03e8	- (1421) 1423(b)
L3ED     0x03ed	- (1398) 2893(b)
S3F4     0x03f4	- (1400) 1404(b)
L400     0x0400	- (1430) 2509(b)
ENDTURN  0x040f	- (1438) 1456(b) 1467(b) 1776(b) 1840(b) 2118(b) 2272(b) 2585(b) 2769(b) 2848(b) 3199(b)
L414     0x0414	- (1509) 2134(b)
NEWTURN  0x0417	- (1475) 1259(b) 1573(b)
S418     0x0418	- (1466) 1459(b)
S426     0x0426	- (1500) 1483(b) 1512(b)
S435     0x0435	- (1458) 1450(b)
L440     0x0440	- (1517) 1507(b)
S441     0x0441	- (1521) 1532(b) 1536(b) 1540(b) 1544(b) 1555(b)
DOBUTTN  0x0444	- (1595) 1547(b)
S446     0x0446	- (1577) 1563(c) 1565(c) 1567(c) 3654(c)
S44E     0x044e	- (1546) 1543(b)
DOCLEAR  0x0458	- (1562) 1464(b) 1554(b) 3408(b) 3565(b) 3841(b) 4038(b)
S46F     0x046f	- (1538) 1535(b)
S479     0x0479	- (1542) 1539(b)
S47D     0x047d	- (1534) 1531(b)
L480     0x0480	- (1620) 2329(b)
S48B     0x048b	- (1666) 1651(b)
S48E     0x048e	- (1648) 1662(b)
S494     0x0494	- (1707) 1685(c)
L4B7     0x04b7	- (1637) 1604(b)
L4C0     0x04c0	- (1718) 1695(b)
S4C8     0x04c8	- (1778) 1773(b)
S4CB     0x04cb	- (1754) 1749(b)
S4D3     0x04d3	- (1786) 1762(c) 1764(c) 1766(c)
L4EF     0x04ef	- (1733) 1705(b)
S4F8     0x04f8	- (1761) 1728(b) 1750(b)
L500     0x0500	- (1806) 1782(b)
L505     0x0505	- (1851) 3516(b)
S50F     0x050f	- (1813) 1807(b)
S514     0x0514	- (1898) 1890(b)
S519     0x0519	- (1889) 1881(b)
S523     0x0523	- (1861) 1821(b)
S529     0x0529	- (1872) 1862(b)
S52B     0x052b	- (1841) 1837(b)
KEYMISS  0x052c	- (1846) 3517(b)
S53A     0x053a	- (1839) 1842(b) 1857(b)
S53D     0x053d	- (1820) 1814(b)
SUBWARR  0x0540	- (1908) 1723(c) 2202(c) 2303(c) 3490(b)
SUBGOLD  0x0544	- (1978) 2185(c) 3486(b)
S54A     0x054a	- (1986) 1983(c)
S55D     0x055d	- (1937) 1949(b)
S567     0x0567	- (1932) 1941(b)
L569     0x0569	- (1968) 3251(b)
S56C     0x056c	- (1945) 1930(b)
ADDGOLD  0x0580	- (2000) 2255(c) 2734(c) 3498(b)
S588     0x0588	- (2061) 2034(b)
S58B     0x058b	- (2036) 2069(b)
S5A4     0x05a4	- (2057) 2039(b) 2048(b)
S5A5     0x05a5	- (2077) 2081(b)
CPY2TO5  0x05b2	- (2076) 461(c) 1638(c) 1912(c) 2013(c) 2187(c) 2387(c) 2641(c) 2674(c) 2695(c) 4228(b) 5417(c)
L5BB     0x05bb	- (2012) 1933(b)
DOMOVE   0x05c0	- (2092) 1809(b)
S5C6     0x05c6	- (2138) 2097(b)
S5EC     0x05ec	- (2122) 2107(b)
L600     0x0600	- (2175) 2170(b)
L617     0x0617	- (2208) 2159(b)
L640     0x0640	- (2251) 2247(b)
S652     0x0652	- (2309) 2288(b)
L65D     0x065d	- (2276) 2140(b)
L66A     0x066a	- (2325) 1612(b)
L66F     0x066f	- (2265) 2204(b)
L679     0x0679	- (2268) 2418(b)
SWPDWAR  0x0680	- (2336) 2193(c) 2200(c)
SWP4ND5  0x0682	- (2373) 2053(c) 2166(c) 2189(c) 3089(b)
ADDWARR  0x0686	- (2386) 2233(c) 2413(c) 2702(c) 3494(b)
S688     0x0688	- (2400) 2405(b)
S68B     0x068b	- (2375) 2380(b)
L68C     0x068c	- (2412) 2888(b)
ADDFOOD  0x068e	- (2357) 2759(c) 4093(c)
ROTDRM2  0x0694	- (2423) 1848(c) 1955(c) 2103(c) 2128(c) 2146(c) 2284(c) 2315(c) 2327(c)
CPY5TO1  0x06a4	- (2399) 1687(c) 2365(c)
L6B2     0x06b2	- (2414) 2305(b)
L6C0     0x06c0	- (2441) 2168(c) 2191(c) 3482(b) 5398(c)
S6CB     0x06cb	- (2473) 2459(b)
S6DD     0x06dd	- (2460) 2477(b)
S6E1     0x06e1	- (2468) 2466(b)
L6E5     0x06e5	- (2507) 2278(b)
S6E7     0x06e7	- (2458) 2483(b)
S6EC     0x06ec	- (2465) 2463(b)
S6EF     0x06ef	- (2452) 2450(b)
S6F1     0x06f1	- (2479) 2457(b)
SWPDGLD  0x06f6	- (2487) 2176(c) 2183(c)
S6FD     0x06fd	- (2449) 2447(b)
CPY5TO2  0x0700	- (2524) 1916(c) 2394(b)
S701     0x0701	- (2525) 2530(b)
SUBB10   0x0708	- (2598) 1649(c) 1683(c) 1747(c) 1914(c) 1981(c) 2046(c)
CALLDSP  0x0709	- (2606) 1455(c) 1629(c) 2269(c) 2583(c) 2767(c)
L70D     0x070d	- (2581) 1868(b)
S70E     0x070e	- (2549) 2553(b)
S70F     0x070f	- (2528) 
CPY0TO5  0x0717	- (2570) 559(c) 1979(c) 2001(c) 2044(c) 2164(c) 2713(c) 3478(b)
S718     0x0718	- (2560) 2564(b)
DOSANCT  0x0719	- (2614) 1816(b)
CPY5TO4  0x0727	- (2548) 424(b) 1092(b) 1739(c) 1743(c) 2015(c) 2019(c) 2042(c) 2700(c) 3099(b) 5448(b)
CPY1TO5  0x072c	- (2559) 480(c) 1681(c) 1745(c) 2358(c) 2745(c)
S72E     0x072e	- (2571) 2575(b)
ADDB10   0x0734	- (2590) 1491(c) 1737(c) 1741(c) 2003(c) 2017(c) 2178(c) 2195(c) 2360(c) 2389(c) 2647(c) 2667(c) 2680(c) 2726(c) 2751(c)
S73B     0x073b	- (2537) 2542(b)
CPY5TO0  0x073d	- (2536) 1985(b) 2008(c) 2055(c)
L740     0x0740	- (2630) 2622(b)
L74F     0x074f	- (2640) 2623(b)
S751     0x0751	- (2699) 2668(b)
S757     0x0757	- (2673) 2649(b)
S759     0x0759	- (2712) 2632(b) 2682(b) 2690(b)
S764     0x0764	- (2694) 2689(b)
L780     0x0780	- (2725) 2719(b)
S797     0x0797	- (2771) 2732(c) 2757(c)
CPYTRNC  0x079b	- (2785) 1485(c) 1496(c) 5412(c)
S7A1     0x07a1	- (2766) 2753(b)
LOAD99   0x07b1	- (2776) 1494(c) 2006(c) 2181(c) 2198(c) 2363(c) 2392(c) 2920(c)
L7B2     0x07b2	- (2803) 1973(b)
S7B7     0x07b7	- (2744) 2728(b)
PLYOPEN  0x07c0	- (2818) 3169(c)
S7C2     0x07c2	- (2849) 2841(b)
S7CB     0x07cb	- (2855) 2822(c) 2839(c)
S7CE     0x07ce	- (2839) 2846(b) 2850(b)
S7CF     0x07cf	- (2822) 2830(b)
L7D4     0x07d4	- (2890) 2808(b)
S7E4     0x07e4	- (2871) 2872(b)
L7E5     0x07e5	- (2885) 2323(b)
S7EF     0x07ef	- (2829) 2825(b)
S7F2     0x07f2	- (2881) 2828(b)
S7F4     0x07f4	- (2868) 2875(b) 2877(b)
PLYCLOS  0x07fc	- (2835) 3187(b)
S7FD     0x07fd	- (2826) 2824(b)
L800     0x0800	- (2900) 3192(c)
S80D     0x080d	- (2937) 2921(b) 2930(b) 2933(b)
S816     0x0816	- (2922) 2913(b)
S831     0x0831	- (2934) 2927(b)
L836     0x0836	- (2939) 3629(c)
L840     0x0840	- (2970) 2963(b) 3152(b)
S842     0x0842	- (2998) 3018(b)
S851     0x0851	- (3019) 2997(b)
S855     0x0855	- (3030) 2998(c) 3119(c)
S85B     0x085b	- (3010) 2991(b)
S86B     0x086b	- (2992) 3013(b) 3017(b)
S87B     0x087b	- (2980) 2975(b) 2977(b)
L880     0x0880	- (3039) 3029(b)
LSWP4N5  0x0888	- (3086) 3061(c) 3076(c) 3079(c) 3442(c) 3446(c) 3451(c) 4021(c)
LSUMB10  0x0889	- (3091) 3052(c) 3078(c) 3080(c) 3081(c)
LCPBRIG  0x0895	- (3101) 2944(c) 3058(c) 3133(c)
S898     0x0898	- (3063) 3074(b)
LCP5TO4  0x0899	- (3096) 3048(c) 3057(c) 3077(c) 3420(c) 3439(c) 3976(c) 3982(c) 4017(c) 4023(c) 4079(c) 4098(c) 4124(b)
S8AF     0x08af	- (3050) 3056(b)
S8B9     0x08b9	- (3053) 3049(b)
L8C0     0x08c0	- (3111) 3084(b)
S8C6     0x08c6	- (3147) 3141(b)
S8C8     0x08c8	- (3157) 3126(c) 3135(c)
S8C9     0x08c9	- (3162) 3122(c) 3131(c)
L8D4     0x08d4	- (3173) 3278(c) 3536(c)
L8D9     0x08d9	- (3166) 1885(b)
S8ED     0x08ed	- (3151) 3146(b)
5TODSPB  0x08f4	- (3153) 2946(c) 3125(c) 3134(c) 4025(c) 4173(c)
S8FB     0x08fb	- (3120) 3117(b)
L8FE     0x08fe	- (3118) 3070(b)
L900     0x0900	- (3180) 3171(b)
L913     0x0913	- (3243) 2938(c) 3116(c)
S91A     0x091a	- (3232) 3227(b)
S91D     0x091d	- (3203) 3190(b) 3194(b)
LADDB10  0x092a	- (3256) 2915(c) 3767(c) 3980(c) 4015(c) 4122(c)
L932     0x0932	- (3248) 4131(b)
S936     0x0936	- (3229) 3234(b)
L937     0x0937	- (3191) 2516(b)
S939     0x0939	- (3196) 3230(b) 3280(b) 3474(b) 3623(b) 3633(b) 3922(b) 4109(b)
S93D     0x093d	- (3189) 3183(b)
L940     0x0940	- (3264) 3241(b)
S946     0x0946	- (3321) 3299(b)
S954     0x0954	- (3354) 3349(b)
S959     0x0959	- (3345) 3322(b)
L96F     0x096f	- (3284) 3240(b)
S973     0x0973	- (3291) 3266(b)
L97A     0x097a	- (3298) 3219(b)
S97B     0x097b	- (3279) 3317(b) 3329(b) 3341(b) 3350(b)
S97E     0x097e	- (3277) 3287(b) 3294(b)
L980     0x0980	- (3364) 3357(b)
S98E     0x098e	- (3382) 3379(b)
S998     0x0998	- (3389) 3410(b)
S9A9     0x09a9	- (3409) 3398(b)
S9AE     0x09ae	- (3397) 3394(b)
S9B2     0x09b2	- (3424) 3428(b)
S9B7     0x09b7	- (3374) 3380(b) 3395(b)
S9B8     0x09b8	- (3399) 3404(b)
L9C0     0x09c0	- (3436) 3432(b)
L9D1     0x09d1	- (3483) 3430(c) 4100(c)
L9D3     0x09d3	- (3487) 3035(b) 3447(c)
S9D8     0x09d8	- (3460) 3464(b)
S9E7     0x09e7	- (3452) 3457(b)
L9E9     0x09e9	- (3479) 3422(c) 3440(c)
L9EA     0x09ea	- (3495) 3206(c) 3465(c)
S9F2     0x09f2	- (3491) 3458(c) 4088(c)
L9F6     0x09f6	- (3475) 3418(c) 3996(c)
LA00     0x0a00	- (3506) 3728(b)
SA09     0x0a09	- (3575) 3529(b) 3582(b)
SA0B     0x0a0b	- (3548) 3585(b)
SA0C     0x0a0c	- (3578) 3576(b)
SA0E     0x0a0e	- (3533) 3581(b)
SA15     0x0a15	- (3584) 3568(b)
LA1E     0x0a1e	- (3525) 3614(b)
SA24     0x0a24	- (3567) 3561(b)
SA36     0x0a36	- (3560) 3554(b)
SA3A     0x0a3a	- (3535) 3558(b)
SA3D     0x0a3d	- (3521) 3507(b)
LA40     0x0a40	- (3597) 3589(b)
ROTDRM3  0x0a44	- (3665) 2949(c) 3305(c) 3333(c) 3369(c) 3638(c) 3912(c) 4183(c) 4203(c)
SA4C     0x0a4c	- (3670) 3627(c) 3655(c)
SA5D     0x0a5d	- (3627) 3606(b)
SA5E     0x0a5e	- (3618) 3601(b)
SA70     0x0a70	- (3637) 3631(b)
SA72     0x0a72	- (3672) 3677(b)
ROT7LFT  0x0a80	- (3689) 3769(c) 3776(c) 3785(c) 3849(c)
SA89     0x0a89	- (3780) 3789(b)
ROTPLYR  0x0a8f	- (3698) 3375(c) 3400(c) 3453(c)
LA94     0x0a94	- (3794) 3855(b)
LA98     0x0a98	- (3742) 1894(b)
CPY7TO5  0x0a9e	- (3714) 3449(c) 3794(c)
LAA7     0x0aa7	- (3721) 1901(b)
CPY5TO7  0x0abd	- (3706) 3444(c) 3768(c) 3784(c)
LAC0     0x0ac0	- (3804) 3796(b)
SAC4     0x0ac4	- (3884) 3844(b)
SAC8     0x0ac8	- (3880) 3875(b)
SAD8     0x0ad8	- (3843) 3834(b)
SADA     0x0ada	- (3874) 3869(b)
SADC     0x0adc	- (3854) 3872(b) 3878(b) 3882(b)
SADD     0x0add	- (3833) 3827(b)
SADF     0x0adf	- (3812) 3831(b) 3957(b)
SAE1     0x0ae1	- (3848) 3871(b) 3877(b) 3881(b)
SAF1     0x0af1	- (3865) 3853(b)
SAFC     0x0afc	- (3823) 
LAFE     0x0afe	- (3814) 3963(b)
SB00     0x0b00	- (3910) 3901(b) 3936(b) 3943(b) 4001(b)
LB06     0x0b06	- (3961) 3886(b)
SB16     0x0b16	- (3941) 3934(b)
LB24     0x0b24	- (3973) 4046(b)
SB2A     0x0b2a	- (3987) 3953(c) 3998(c)
SB30     0x0b30	- (3947) 3937(b)
SB34     0x0b34	- (3970) 3972(b)
LB3C     0x0b3c	- (3929) 3896(b) 3900(b)
LB40     0x0b40	- (3995) 3986(b)
SB50     0x0b50	- (4068) 4064(b) 4066(b)
SB53     0x0b53	- (4057) 4007(b)
SB5A     0x0b5a	- (4040) 4031(b)
SB64     0x0b64	- (4050) 4041(b)
SB68     0x0b68	- (4067) 4060(b)
SB6A     0x0b6a	- (4065) 4062(b)
SB70     0x0b70	- (4020) 4055(b) 4075(b)
LB80     0x0b80	- (4073) 4052(b)
LB86     0x0b86	- (4111) 3204(c)
LB89     0x0b89	- (4126) 5435(b)
SB8E     0x0b8e	- (4090) 4086(b)
SB94     0x0b94	- (4138) 4127(c)
SBA5     0x0ba5	- (4133) 4129(c)
LBAB     0x0bab	- (4095) 4069(b) 4089(b)
ROL5BY2  0x0bc0	- (4149) 3952(c) 3974(c) 3978(c) 4019(c) 4081(c) 4171(c)
ROL5BY4  0x0bcf	- (4156) 3984(c) 4096(c)
LBD4     0x0bd4	- (4225) 2909(c) 3045(c) 3124(c) 3437(c)
DSPWARE  0x0bde	- (4171) 3813(c) 4054(c)
SBE2     0x0be2	- (4211) 4189(b)
SBE3     0x0be3	- (4196) 4191(b) 4209(b)
LBE5     0x0be5	- (4221) 2903(c)
LRANDOM  0x0be6	- (4216) 2901(c) 3020(c) 3027(c) 3181(c) 3216(c) 3753(c) 3930(c) 4112(c)
SBEE     0x0bee	- (4192) 4210(b)
SBF6     0x0bf6	- (4201) 4180(b)
ROL5BY6  0x0bfd	- (4163) 3805(c) 3955(c) 4009(c) 4077(c) 4174(c)
PLAYBUF  0x0c00	- (4242) 4379(b) 4433(c) 4496(c) 4546(b) 4577(b) 4616(c) 4636(b) 4682(b) 4717(b) 4758(c) 4801(c) 4838(c) 4867(c) 4891(c) 4928(b) 4973(b) 5011(b) 5055(b) 5119(b) 5152(c) 5198(c) 5260(c) 5286(b) 5304(b) 5358(b) 5392(b)
LC08     0x0c08	- (4305) 4361(b)
PLYTHEM  0x0c0c	- (4317) 1255(c) 3644(c)
SC0F     0x0c0f	- (4246) 4308(b)
LC13     0x0c13	- (4311) 1625(c)
SC1C     0x0c1c	- (4282) 4283(b) 4285(b)
SC1D     0x0c1d	- (4262) 4301(b)
SC39     0x0c39	- (4258) 4297(b)
SC3A     0x0c3a	- (4264) 4250(b) 4254(b)
SC40     0x0c40	- (4335) 4355(b)
LC4D     0x0c4d	- (4384) 4327(b)
SC4F     0x0c4f	- (4339) 4359(b)
LC5F     0x0c5f	- (4344) 4256(b)
PLYTICK  0x0c6c	- (4366) 234(c)
SC7E     0x0c7e	- (4346) 4352(b)
LC80     0x0c80	- (4414) 4410(b)
LCC0     0x0cc0	- (4485) 4481(b)
PLAYEOT  0x0cd5	- (4551) 1471(c)
LD00     0x0d00	- (4560) 4556(b)
LD0C     0x0d0c	- (4618) 4652(b) 4804(b) 4840(b) 4869(b) 4893(b) 4901(b) 5201(b) 5319(b)
PLYBAZR  0x0d1d	- (4582) 3745(c)
SD22     0x0d22	- (4612) 4614(b)
SD29     0x0d29	- (4607) 4609(b)
LD40     0x0d40	- (4632) 4628(b)
SD4E     0x0d4e	- (4657) 4641(c) 4642(c) 4643(c) 4644(c) 4645(c)
SD5B     0x0d5b	- (4678) 4680(b)
PLYSANC  0x0d5f	- (4641) 2617(c)
SD61     0x0d61	- (4666) 4670(b)
SD64     0x0d64	- (4689) 4693(b)
SD66     0x0d66	- (4696) 4700(b)
SD69     0x0d69	- (4687) 4646(c) 4647(c) 4648(c) 4649(c) 4650(c)
SD6A     0x0d6a	- (4703) 4705(b)
SD78     0x0d78	- (4673) 4675(b)
SD7A     0x0d7a	- (4659) 4663(b)
LD80     0x0d80	- (4711) 4707(b)
SD83     0x0d83	- (4713) 4715(b)
SDB6     0x0db6	- (4754) 4756(b)
SDB8     0x0db8	- (4748) 4751(b)
PLYATTK  0x0dbe	- (4722) 3724(c)
LDC0     0x0dc0	- (4783) 4779(b)
PLYWINR  0x0dcc	- (4845) 3150(c)
PLYBUGL  0x0deb	- (4809) 2942(c)
SDEF     0x0def	- (4794) 4796(b)
LE00     0x0e00	- (4859) 4855(b)
SE0D     0x0e0d	- (4905) 4909(b)
SE12     0x0e12	- (4912) 4916(b)
SE13     0x0e13	- (4919) 4921(b)
SE23     0x0e23	- (4903) 4898(c) 4899(c)
SE25     0x0e25	- (4924) 4926(b)
PLYFRNT  0x0e2e	- (4898) 1825(c)
PLYLOSR  0x0e2f	- (4874) 3145(c) 4312(b)
PLYDRGN  0x0e40	- (4940) 2152(c)
SE42     0x0e42	- (4968) 4971(b)
SE59     0x0e59	- (5002) 5004(b)
SE6A     0x0e6a	- (5007) 5009(b)
SE6B     0x0e6b	- (4962) 4965(b)
SE73     0x0e73	- (4956) 4959(b)
PLYDSWD  0x0e78	- (4978) 2214(c)
SE7B     0x0e7b	- (4950) 4953(b)
SE7E     0x0e7e	- (4948) 4940(c) 4941(c) 4942(c) 4943(c) 4944(c) 4945(c) 4946(c)
LE80     0x0e80	- (5018) 4979(c)
SE98     0x0e98	- (5042) 5083(b)
LE9B     0x0e9b	- (5059) 4981(c)
SE9C     0x0e9c	- (5050) 5053(b)
SEA1     0x0ea1	- (5044) 5047(b)
PLYFAIL  0x0ec0	- (5092) 1854(c) 2114(c) 3621(c) 3918(c)
PLYDETH  0x0ec5	- (5124) 1727(c) 1961(c) 2295(c) 3004(c)
SEC6     0x0ec6	- (5132) 5135(b)
SED7     0x0ed7	- (5126) 5129(b)
SEDD     0x0edd	- (5110) 5112(b)
SEE6     0x0ee6	- (5148) 5150(b)
SEEC     0x0eec	- (5115) 5117(b)
SEFC     0x0efc	- (5105) 5107(b)
LF00     0x0f00	- (5164) 5160(b)
PLYPEGA  0x0f0d	- (5206) 3311(c)
SF17     0x0f17	- (5194) 5196(b)
LF40     0x0f40	- (5236) 5232(b)
SF42     0x0f42	- (5264) 5266(b)
PLYBEEP  0x0f49	- (5291) 840(c) 1433(c) 5310(b)
LF80     0x0f80	- (5309) 3165(b)
PLWFOOD  0x0f83	- (5315) 1757(c)
SF8A     0x0f8a	- (5377) 5380(b)
SF93     0x0f93	- (5371) 5374(b)
SF9B     0x0f9b	- (5354) 5356(b)
SFA4     0x0fa4	- (5365) 5368(b)
PLYCLR   0x0fa9	- (5363) 1571(c)
SFB8     0x0fb8	- (5349) 5351(b)
SFBE     0x0fbe	- (5323) 5315(c) 5316(c) 5317(c)
LFC0     0x0fc0	- (5387) 5383(b) 5457(b)
SFC1     0x0fc1	- (5388) 5390(b)
SFD4     0x0fd4	- (5455) 5458(b)
SFE2     0x0fe2	- (5437) 5404(c) 5420(c) 5422(c)
SFE5     0x0fe5	- (5445) 5394(c) 5413(c) 5419(c) 5421(c) 5423(c)
SFE6     0x0fe6	- (5441) 5399(c) 5418(c)
LFFF     0x0fff	- (5394) 3663(b)
